# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

Bienvenido a tu herramienta interactiva para el anÃ¡lisis y procesamiento de informaciÃ³n. En esta guÃ­a, encontrarÃ¡s instrucciones claras y amigables para sacar el mÃ¡ximo provecho a nuestra aplicaciÃ³n.

---

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?

- **PropÃ³sito principal**:  
  Esta herramienta permite analizar y procesar informaciÃ³n contenida en archivos PDF, conversaciones y la Voz del Cliente (VoC) a travÃ©s de una interfaz web interactiva, utilizando modelos de lenguaje basados en IA.

- **Problema que resuelve**:  
  Facilita la extracciÃ³n de informaciÃ³n valiosa y la generaciÃ³n de insights de documentos y comunicaciones, eliminando la necesidad de acudir a soluciones manuales o mÃºltiples herramientas separadas para gestionar datos dispersos.

- **Beneficios clave**:  
  â€¢ ConsolidaciÃ³n de diferentes fuentes de informaciÃ³n en una sola plataforma.  
  â€¢ Rapidez en el procesamiento y anÃ¡lisis de datos.  
  â€¢ Acceso a insights relevantes y personalizados para mejorar la toma de decisiones.  
  â€¢ Interfaz intuitiva que simplifica el trabajo con datos.

- **Audiencia objetivo**:  
  Profesionales, analistas y equipos de atenciÃ³n al cliente o Ã¡reas de operaciones que necesiten procesar grandes volÃºmenes de documentos y conversaciones para obtener informaciÃ³n accionable.

---

## âœ¨ Funcionalidades Principales

### Interfaz Web Interactiva con Streamlit
- **Â¿QuÃ© hace?**:  
  Proporciona una interfaz amigable donde puedes interactuar con la herramienta, cargar documentos, ver resultados y navegar entre las distintas funcionalidades de forma intuitiva.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Siempre que inicies la aplicaciÃ³n para cargar nuevos datos o revisar anÃ¡lisis previos.
  
- **Â¿CÃ³mo acceder?**:  
  1. Abre tu navegador web y accede a la URL proporcionada.  
  2. Inicia sesiÃ³n si se requiere autenticaciÃ³n.
  
- **Resultado esperado**:  
  VisualizarÃ¡s el panel principal con opciones de menÃº y botones para cargar archivos y ejecutar anÃ¡lisis.

### Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**:  
  Extrae y organiza el contenido de archivos PDF, permitiendo que la informaciÃ³n se procese posteriormente.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites analizar documentos o reportes que tengas en formato PDF.
  
- **Â¿CÃ³mo acceder?**:  
  1. En el panel principal, selecciona la opciÃ³n â€œProcesar PDFâ€.  
  2. Sube el archivo desde tu computador.
  
- **Resultado esperado**:  
  El contenido del PDF se visualizarÃ¡ en una estructura organizada, lista para el anÃ¡lisis.

### AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**:  
  Utiliza algoritmos de inteligencia artificial para interpretar y extraer insights significativos del texto, mejorando la comprensiÃ³n de la informaciÃ³n.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando se requiere transformar texto sin procesar en informaciÃ³n relevante y accionable.
  
- **Â¿CÃ³mo acceder?**:  
  1. DespuÃ©s de procesar un documento o conversaciÃ³n, selecciona â€œAnalizar con IAâ€.  
  2. Confirma el anÃ¡lisis y espera a que se presente el reporte.
  
- **Resultado esperado**:  
  AparecerÃ¡n grÃ¡ficos y resÃºmenes de texto que destacan los puntos clave y las tendencias.

### AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**:  
  Permite analizar diÃ¡logos y transcripciones de conversaciones para identificar patrones, temas recurrentes y sentimientos.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Al trabajar con registros de chat, llamadas o reuniones que necesiten ser evaluados para mejorar procesos o atenciÃ³n al cliente.
  
- **Â¿CÃ³mo acceder?**:  
  1. En el menÃº principal, elige â€œAnalizar Conversacionesâ€.  
  2. Sube el archivo o ingresa la transcripciÃ³n.
  
- **Resultado esperado**:  
  Se generarÃ¡ un reporte con las principales conclusiones y Ã¡reas de mejora basadas en el anÃ¡lisis de diÃ¡logo.

### AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**:  
  Recopila y analiza comentarios y opiniones de los clientes para identificar nivel de satisfacciÃ³n y Ã¡reas crÃ­ticas de atenciÃ³n.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites evaluar la experiencia y feedback de tus clientes de forma sistemÃ¡tica.
  
- **Â¿CÃ³mo acceder?**:  
  1. Selecciona â€œAnÃ¡lisis de Voz del Clienteâ€ desde el panel de navegaciÃ³n.  
  2. Carga el archivo con comentarios o conecta las fuentes de feedback.
  
- **Resultado esperado**:  
  VerÃ¡s informes detallados que resaltan tendencias en la satisfacciÃ³n del cliente y posibles oportunidades de mejora.

---

## ğŸš€ CÃ³mo Empezar

### Primer Uso

1. **Requisitos previos**:  
   â€¢ Tener acceso a un navegador web actualizado.  
   â€¢ Contar con los documentos o archivos de conversaciÃ³n que deseas analizar.
   
2. **Acceso inicial**:  
   Ingresa a la URL de la aplicaciÃ³n e inicia sesiÃ³n (si es necesario).

3. **ConfiguraciÃ³n bÃ¡sica**:  
   Revisa la secciÃ³n de configuraciÃ³n (ubicada en el menÃº o en la pÃ¡gina de bienvenida) para ajustar preferencias de idioma, notificaciones y formato de exportaciÃ³n de reportes.

4. **Primera tarea recomendada**:  
   Comienza subiendo un archivo PDF para familiarizarte con el proceso de extracciÃ³n y visualizaciÃ³n de contenido.

### Flujo TÃ­pico de Uso

1. **Paso 1**:  
   Accede a la aplicaciÃ³n mediante tu navegador y dirige tu atenciÃ³n al panel principal.

2. **Paso 2**:  
   Selecciona el tipo de anÃ¡lisis deseado (por ejemplo, "Procesar PDF" o "Analizar Conversaciones").

3. **Paso 3**:  
   Carga los archivos correspondientes, espera a que se complete el procesamiento y revisa el informe o los insights generados.

---

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: AnÃ¡lisis de Reportes en PDF
**SituaciÃ³n**:  
Necesitas extraer y analizar informaciÃ³n de reportes financieros o de proyectos almacenados en formato PDF.

**Pasos**:
1. Accede a la funciÃ³n â€œProcesar PDFâ€.
2. Sube el documento deseado.
3. Ejecuta el anÃ¡lisis con IA para obtener un resumen ejecutivo y conclusiones.
4. Revisa el reporte visual para identificar Ã¡reas clave.

### Escenario 2: EvaluaciÃ³n de Conversaciones de AtenciÃ³n al Cliente
**SituaciÃ³n**:  
Quieres identificar patrones en las interacciones del servicio al cliente para mejorar la experiencia.

**Pasos**:
1. Selecciona â€œAnalizar Conversacionesâ€ desde el menÃº.
2. Carga la transcripciÃ³n del chat o llamada.
3. Revisa el anÃ¡lisis que identifica temas y emociones recurrentes.
4. Utiliza la informaciÃ³n para ajustar protocolos de atenciÃ³n.

### Escenario 3: RecopilaciÃ³n de Voz del Cliente (VoC)
**SituaciÃ³n**:  
Buscas evaluar el feedback recibido a travÃ©s de encuestas y comentarios en redes sociales.

**Pasos**:
1. Ve a la opciÃ³n â€œAnÃ¡lisis de Voz del Clienteâ€.
2. Sube los archivos de feedback o conecta la fuente de datos.
3. Examina el reporte que resalta niveles de satisfacciÃ³n y Ã¡reas de mejora.
4. Implementa cambios basÃ¡ndote en los insights obtenidos.

---

## â“ Preguntas Frecuentes

P: Â¿CÃ³mo inicio sesiÃ³n en la aplicaciÃ³n?  
R: Ingresa a la URL proporcionada, introduce tus credenciales y, en caso de ser tu primer acceso, sigue las instrucciones de registro.

P: Â¿QuÃ© hago si el archivo PDF no se carga correctamente?  
R: Verifica que el archivo no estÃ© corrupto y que tenga un tamaÃ±o permitido. Si el problema persiste, intenta con otro documento o revisa la conexiÃ³n a internet.

P: Â¿Es seguro enviar mis documentos y conversaciones a travÃ©s de esta herramienta?  
R: SÃ­. La aplicaciÃ³n implementa medidas de seguridad para proteger tus datos. No obstante, te recomendamos evitar subir informaciÃ³n altamente confidencial sin haber verificado estas polÃ­ticas.

P: Â¿CuÃ¡les son las limitaciones principales de la herramienta?  
R:  
â€¢ No soporta formatos de archivo distintos de PDF para documentos.  
â€¢ El anÃ¡lisis automatizado depende de la calidad del texto; textos muy complejos o poco claros podrÃ­an no rendir los mejores insights.  
â€¢ La herramienta estÃ¡ diseÃ±ada para anÃ¡lisis y no para ediciÃ³n de documentos.

---

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: Error al cargar un archivo PDF
- **SÃ­ntomas**:  
  Mensaje de error indicando fallo en la carga o visualizaciÃ³n del documento.
- **Causa probable**:  
  Archivo en un formato incompatible o daÃ±ado.
- **SoluciÃ³n**:  
  1. Verifica el formato y la integridad del archivo.  
  2. AsegÃºrate de que cumpla con los requisitos de tamaÃ±o.  
  3. Intenta subir el archivo nuevamente.

### Problema: El anÃ¡lisis tarda demasiado en completarse
- **SÃ­ntomas**:  
  La aplicaciÃ³n muestra un indicador de carga durante un periodo prolongado.
- **Causa probable**:  
  Grandes volÃºmenes de datos o conexiÃ³n a internet lenta.
- **SoluciÃ³n**:  
  1. Revisa tu conexiÃ³n de red.  
  2. Si el documento es muy extenso, considera dividirlo en partes.  
  3. Espera unos minutos adicionales o reinicia el anÃ¡lisis.

### Problema: No se muestran resultados despuÃ©s del anÃ¡lisis con IA
- **SÃ­ntomas**:  
  La pantalla permanece en blanco o muestra un mensaje sin contenido.
- **Causa probable**:  
  Error interno en el procesamiento del modelo o datos incompletos.
- **SoluciÃ³n**:  
  1. Verifica que el documento o transcripciÃ³n estÃ© completo y sin errores.  
  2. Reinicia la funciÃ³n de anÃ¡lisis.  
  3. Si el problema continÃºa, contacta al soporte tÃ©cnico.

---

## ğŸ“ Soporte y Contacto

- **Â¿Necesitas ayuda adicional?**  
  Para asistencia personalizada, comunÃ­cate con el equipo de soporte a travÃ©s del correo soporte@tudominio.com o llamando al +34 912 345 678.
  
- **Â¿Encontraste un error?**  
  Reporta cualquier incidencia mediante nuestro formulario de feedback accesible en la secciÃ³n â€œAyudaâ€ del menÃº o directamente al correo reportes@tudominio.com.
  
- **Â¿Tienes sugerencias?**  
  Comparte tus ideas para mejorar la aplicaciÃ³n en nuestro buzÃ³n de sugerencias: sugerencias@tudominio.com.

---

Esperamos que esta guÃ­a te ayude a navegar y aprovechar al mÃ¡ximo todas las funcionalidades que ofrecemos. Â¡Disfruta de tu experiencia y saca el mayor provecho de los anÃ¡lisis para mejorar tus procesos y decisiones!

## DocumentaciÃ³n TÃ©cnica
A continuaciÃ³n se presenta la documentaciÃ³n tÃ©cnica completa en Markdown, estructurada segÃºn la guÃ­a solicitada. Se ha analizado el cÃ³digo y la guÃ­a de usuario para integrar todos los aspectos relevantes.

------------------------------------------------------------
# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n estÃ¡ orientada a desarrolladores y equipos tÃ©cnicos interesados en comprender, mantener y extender la aplicaciÃ³n VoC Analyst. La herramienta procesa archivos (por ejemplo, documentos PDF) y analiza interacciones y conversaciones mediante Modelos de Lenguaje (LLM). La interfaz de usuario se implementa con Streamlit, mientras que el backend integra mÃºltiples proveedores LLM (OpenAI, Anthropic y Google GenAI).

------------------------------------------------------------
## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n arquitectÃ³nico utilizado:**  
  La aplicaciÃ³n adopta una arquitectura modular monolÃ­tica (â€œhÃ­bridaâ€). Se separan las responsabilidades en dos grandes capas:
  - **Capa de PresentaciÃ³n (Frontend):** Implementada mediante Streamlit, se encarga de la carga de archivos, la interacciÃ³n directa con el usuario, la visualizaciÃ³n de resultados y la gestiÃ³n del estado de la sesiÃ³n mediante `st.session_state`.
  - **Capa de LÃ³gica y Procesamiento (Backend):** Incluye mÃ³dulos para extracciÃ³n y validaciÃ³n de archivos (utilizando PyPDF2 para documentos PDF), procesamiento y parsing de conversaciones (con redacciÃ³n de PII) y la integraciÃ³n con proveedores LLM para anÃ¡lisis de sentimientos, detecciÃ³n de temas y generaciÃ³n de insights.

- **Diagrama de componentes (Mermaid):**

  ```mermaid
  graph LR
      A[Interfaz Streamlit (Frontend)] --> B[Procesamiento y ValidaciÃ³n de Archivos]
      A --> C[GestiÃ³n del Estado (st.session_state)]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[Parser y RedacciÃ³n de PII]
      A --> F[LLMBackend (LÃ³gica de Negocio)]
      F --> G[Proveedores LLM (OpenAI, Anthropic, Gemini)]
  ```

- **Flujo de datos principal:**  
  1. El usuario carga archivos (por ejemplo, archivos PDF o TXT) a travÃ©s de la interfaz web.  
  2. Se valida el tamaÃ±o del archivo (por ejemplo, mediante la funciÃ³n `validate_file_size`) y se extrae el contenido textual de documentos PDF usando `extract_text_from_pdf` (con PyPDF2).  
  3. El texto extraÃ­do es procesado mediante funciones de parsing para normalizar la conversaciÃ³n y redactar informaciÃ³n sensible (PII).  
  4. El mÃ³dulo **LLMBackend** envÃ­a el contenido a los proveedores LLM configurados usando prompts predefinidos (por ejemplo, _parse_prompt_ y _analyze_prompt_) para obtener insights, anÃ¡lisis de sentimientos, detecciÃ³n de temas y recomendaciones.  
  5. Los resultados del anÃ¡lisis se almacenan en `st.session_state` y se visualizan en la interfaz mediante paneles, tablas y grÃ¡ficos.

- **Dependencias crÃ­ticas y su propÃ³sito:**  
  - **Streamlit:** Construye la interfaz web interactiva y gestiona el estado en tiempo real.  
  - **PyPDF2:** Extrae el contenido textual de los documentos en PDF.  
  - **Pandas:** Facilita la manipulaciÃ³n y visualizaciÃ³n de datos tabulados (por ejemplo, para mostrar resÃºmenes y KPIs).  
  - **LLM SDKs (openai, anthropic, google-genai):** Permiten la integraciÃ³n con proveedores de modelos de lenguaje para realizar anÃ¡lisis semÃ¡ntico avanzado.

------------------------------------------------------------
## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  Principalmente Python (los archivos se clasifican como â€œotherâ€ en el repositorio).

- **Frameworks / LibrerÃ­as:**  
  - **Streamlit:** (>= 1.49.1) para crear la interfaz web interactiva.  
  - **PyPDF2:** (>= 3.0.1) para la extracciÃ³n de texto de documentos PDF.  
  - **Pandas:** (>= 2.3.2) para manipulaciÃ³n y visualizaciÃ³n de datos.  
  - **LLM SDKs:**  
    - `openai` para integrar modelos de OpenAI.  
    - `anthropic` para conectarse a proveedores de Anthropic.  
    - `google-genai` para la integraciÃ³n con Google GenAI (Gemini).  
  - **Otras librerÃ­as:** json, os, time, datetime, uuid, zipfile, io, typing

- **Base de datos:**  
  No se utiliza una base de datos persistente; el almacenamiento de datos se realiza de forma transitoria mediante `st.session_state`.

- **APIs externas:**  
  Se integran las APIs de los proveedores LLM para el anÃ¡lisis semÃ¡ntico y generaciÃ³n de insights.

- **Infraestructura:**  
  La aplicaciÃ³n se despliega como una aplicaciÃ³n web simple mediante Streamlit, ejecutable en entornos locales, servidores o contenedores Docker.

------------------------------------------------------------
## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Proporciona la interfaz de usuario donde se realizan las siguientes tareas:
  - ConfiguraciÃ³n de la pÃ¡gina (tÃ­tulo, Ã­cono, layout, etc.).
  - Carga y validaciÃ³n de archivos, con funciones especÃ­ficas (por ejemplo, `extract_text_from_pdf` y `validate_file_size`).
  - VisualizaciÃ³n interactiva de resultados y de los KPIs generados.
  - GestiÃ³n del estado de la sesiÃ³n mediante `st.session_state`.

- **UbicaciÃ³n:**  
  Normalmente el punto de entrada es el archivo `app.py`, ubicado en la raÃ­z o en la carpeta `app/`.

- **Interfaces y MÃ©todos Expuestos:**  
  - ConfiguraciÃ³n de la pÃ¡gina usando `st.set_page_config`.
  - Funciones auxiliares para la extracciÃ³n de texto y validaciÃ³n de archivos.
  - Uso de `st.session_state` para almacenar variables claves que se utilizan en el flujo de anÃ¡lisis (p.ej. `analysis_results`, `run_id`, `uploaded_files_data`).

- **Ejemplo de Uso:**

  ```python
  st.set_page_config(
      page_title="VoC Analyst - AnÃ¡lisis de Voz del Cliente con LLM",
      page_icon="ğŸ“Š",
      layout="wide",
      initial_sidebar_state="expanded"
  )
  
  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None
  ```

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  ActÃºa como capa de integraciÃ³n entre la aplicaciÃ³n y los proveedores de modelos de lenguaje (LLM). Su funciÃ³n principal es enviar datos (texto o conversaciones) para su anÃ¡lisis y obtener insights mediante el uso de prompts preconfigurados.

- **UbicaciÃ³n:**  
  Se encuentra en el archivo `llm_backend.py` ubicado en la raÃ­z del proyecto.

- **Interfaces / Funciones Destacadas:**
  - **ModelConfig:**  
    Clase que define la configuraciÃ³n necesaria para el uso del proveedor LLM, con atributos como:
    - `provider`: Proveedor a utilizar ("openai", "anthropic" o "gemini").
    - `model`: Modelo especÃ­fico a emplear.
    - `api_key`: Clave de autenticaciÃ³n.
    - `max_retries` y `retry_delay`: ParÃ¡metros para reintentar en caso de fallo.
    
  - **LLMBackend:**  
    MÃ©todos importantes incluyen:
    - `__init__(config: ModelConfig)`: Inicializa el backend con la configuraciÃ³n.
    - `_initialize_client()`: Selecciona el cliente LLM de acuerdo al proveedor.
    - `_load_parse_prompt()` y `_load_analyze_prompt()`: Preparan los prompts que se utilizarÃ¡n para parsear y analizar el texto.
    - `analyze_text(text: str) â†’ Dict[str, Any]`: EnvÃ­a el texto a analizar y retorna los insights recibidos.
  
- **Ejemplo de CÃ³digo:**

  ```python
  @dataclass
  class ModelConfig:
      provider: str
      model: str
      api_key: str
      max_retries: int = 3
      retry_delay: float = 1.0

  class LLMBackend:
      def __init__(self, config: ModelConfig):
          self.config = config
          self.client = self._initialize_client()
          self.parse_prompt = self._load_parse_prompt()
          self.analyze_prompt = self._load_analyze_prompt()
      
      def _initialize_client(self):
          if self.config.provider == 'openai':
              return OpenAI(api_key=self.config.api_key)
          elif self.config.provider == 'anthropic':
              return Anthropic(api_key=self.config.api_key)
          elif self.config.provider == 'gemini':
              return genai.Client(api_key=self.config.api_key)
          else:
              raise ValueError(f"Proveedor no soportado: {self.config.provider}")
      
      def analyze_text(self, text: str) -> dict:
          # LÃ³gica simplificada para el anÃ¡lisis
          response = self.client.create_completion(
              engine=self.config.model,
              prompt=f"{self.analyze_prompt}\n{text}",
              max_tokens=150
          )
          return {"analysis": response}
  ```

---

### 3. Parser y AnÃ¡lisis de Conversaciones

- **PropÃ³sito:**  
  Procesar y normalizar el contenido textual extraÃ­do o ingresado para:
  - Estructurarlo en formato JSON.
  - Extraer metadatos como `conversation_id`, timestamps y roles de interlocutores.
  - Redactar informaciÃ³n sensible (PII), sustituyÃ©ndola por etiquetas estandarizadas (e.g., [EMAIL], [PHONE]).

- **Funcionalidades EspecÃ­ficas:**  
  - Extraer la conversaciÃ³n a partir del contenido obtenido de un PDF o transcripciÃ³n.
  - Dividir la conversaciÃ³n en mensajes y asociar metadatos.
  - Aplicar expresiones regulares para detectar y redactar PII antes de enviar el contenido al anÃ¡lisis LLM.

- **Ejemplo de Proceso (Requerimientos):**

  ```
  ## VoC Conversation Parser
  
  Transformar el texto de una interacciÃ³n en un JSON estructurado con:
  - conversation_id derivado del nombre del archivo o metadatos.
  - Lista de mensajes con campos: sender, timestamp, content (con PII redactada) y metadata.
  ```

------------------------------------------------------------
## ğŸš€ APIs y Endpoints

Aunque la aplicaciÃ³n no expone endpoints REST pÃºblicos, dispone de â€œAPIs internasâ€ a travÃ©s de funciones y mÃ©todos empleados para orquestar el flujo de anÃ¡lisis. Entre las principales se incluyen:

- **FunciÃ³n: extract_text_from_pdf(pdf_file) â†’ str:**  
  Extrae el contenido textual de un archivo PDF utilizando PyPDF2. Gestiona errores mediante bloques try/except y notifica al usuario usando `st.error`.

- **FunciÃ³n: validate_file_size(file) â†’ bool:**  
  Verifica que el archivo subido no exceda el lÃ­mite de 100MB, utilizando operaciones en el puntero de archivo.

- **MÃ©todo: LLMBackend.analyze_text(text: str) â†’ Dict[str, Any]:**  
  EnvÃ­a una solicitud al proveedor LLM, combinando el texto y un prompt predefinido, y retorna los insights obtenidos (por ejemplo, anÃ¡lisis de sentimientos, detecciÃ³n de temas, recomendaciones).

- **Funciones del Parser:**  
  Transforman el contenido de una conversaciÃ³n en un JSON estructurado, asegurando la correcta redacciÃ³n de PII y la extracciÃ³n de metadatos.

------------------------------------------------------------
## ğŸ’¾ Modelo de Datos

- **Entidad Principal - ConversaciÃ³n:**  
  La informaciÃ³n se organiza en un objeto JSON con los siguientes campos:
  - `conversation_id`: Identificador Ãºnico de la conversaciÃ³n (derivado de metadatos o nombre de archivo).
  - `messages`: Lista de mensajes, donde cada mensaje incluye:
    - `sender`: Rol del emisor (cliente, agente o desconocido).
    - `timestamp`: Momento de envÃ­o del mensaje.
    - `content`: Texto del mensaje con PII redactada.
    - `metadata`: InformaciÃ³n adicional (por ejemplo, canal, duraciÃ³n, etc.).

- **Transformaciones y Validaciones:**
  - Se valida que el texto extraÃ­do sea vÃ¡lido y estÃ© normalizado.
  - Se aplican reglas para redactar y anonimizar informaciÃ³n sensible.
  - Los resultados se estructuran para facilitar la visualizaciÃ³n y anÃ¡lisis subsecuente en la interfaz.

------------------------------------------------------------
## ğŸ› ï¸ GuÃ­a de Desarrollo

### ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**  
   - Python 3.8 o superior.  
   - ConexiÃ³n a Internet para acceder a las APIs de proveedores LLM en producciÃ³n.
  
2. **InstalaciÃ³n:**
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/VoC-Analyst.git
     cd VoC-Analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv venv
     source venv/bin/activate    # Linux/Mac
     venv\Scripts\activate       # Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de Entorno:**  
   Configure las API keys necesarias para los proveedores LLM mediante variables de entorno:
   - `OPENAI_API_KEY`
   - `ANTHROPIC_API_KEY`
   - `GEMINI_API_KEY`

---

### Estructura de CÃ³digo

El repositorio se organiza de la siguiente manera:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Punto de entrada (interfaz Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones de parsing y normalizaciÃ³n de conversaciones
â”‚   â””â”€â”€ utils.py              # Funciones auxiliares (extracciÃ³n de texto, validaciÃ³n de archivos, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo de integraciÃ³n con proveedores LLM
â”œâ”€â”€ requirements.txt          # Lista de dependencias
â””â”€â”€ README.md                 # DocumentaciÃ³n general y guÃ­a de usuario
```

---

### EstÃ¡ndares de CÃ³digo

- **Convenciones de Naming:**  
  Se utiliza nombres descriptivos en minÃºsculas y con guiones bajos para archivos y funciones (por ejemplo, `extract_text_from_pdf`).

- **Patrones de DiseÃ±o Recomendados:**  
  - SeparaciÃ³n de la lÃ³gica de la interfaz (Streamlit) y la lÃ³gica de negocio (LLMBackend y Parser).  
  - InyecciÃ³n de dependencias mediante la clase `ModelConfig` para configurar dinÃ¡micamente los proveedores LLM.

- **Testing y ValidaciÃ³n:**  
  - Implementar pruebas unitarias para funciones crÃ­ticas (extracciÃ³n de texto, validaciÃ³n del tamaÃ±o, anÃ¡lisis LLM) utilizando frameworks como pytest.
  - Validar la integraciÃ³n del mÃ³dulo LLMBackend simulando respuestas de los proveedores y verificando el manejo correcto de reintentos.

- **Manejo de Errores y Logging:**  
  - Emplear bloques try/except en funciones crÃ­ticas para capturar y notificar errores (por ejemplo, durante la extracciÃ³n de textos o el anÃ¡lisis LLM).  
  - Utilizar el mÃ³dulo logging para registrar eventos importantes y facilitar la depuraciÃ³n.

---

## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**  
  - La extracciÃ³n de texto depende de PyPDF2; PDFs basados en imÃ¡genes pueden requerir OCR.
  - El anÃ¡lisis LLM es tan preciso como la calidad y formato del texto extraÃ­do.
  - Actualmente la aplicaciÃ³n procesa un archivo a la vez; el anÃ¡lisis en lote aÃºn se estÃ¡ evaluando.

- **Consideraciones de Rendimiento:**  
  - El procesamiento de archivos muy grandes (cercanos a 100MB) puede afectar la velocidad de respuesta.
  - Se recomienda implementar tÃ©cnicas de caching o procesamiento asÃ­ncrono para optimizar el rendimiento en anÃ¡lisis repetitivos.

- **Aspectos de Seguridad:**  
  - Asegurar el manejo seguro de las API keys utilizando variables de entorno.
  - Redactar adecuadamente la informaciÃ³n sensible (PII) antes de enviarla a cualquier proveedor externo.
  - Revisar e implementar polÃ­ticas de privacidad y protecciÃ³n de datos conforme a las normativas vigentes.

- **TODOs y Mejoras Sugeridas:**  
  - Extender el soporte a nuevos formatos de archivo (por ejemplo, TXT).  
  - Integrar OCR para PDFs que contienen imÃ¡genes.  
  - Mejorar la modularidad del parser y la robustez en el manejo de errores en la comunicaciÃ³n con proveedores LLM.

---

## Diagrama de Componentes

El siguiente diagrama Mermaid ilustra la relaciÃ³n e interacciÃ³n entre las principales capas y mÃ³dulos del sistema:

```mermaid
graph LR
    A[Interfaz Streamlit] --> B[Procesamiento y ValidaciÃ³n de Archivos]
    B --> C[ExtracciÃ³n de Texto y Parser de Conversaciones]
    A --> D[LLMBackend]
    D --> E[Proveedores LLM (OpenAI, Anthropic, Gemini)]
```

------------------------------------------------------------
## ConclusiÃ³n

Esta documentaciÃ³n tÃ©cnica proporciona un panorama completo del sistema VoC Analyst, desde la arquitectura y componentes principales hasta la configuraciÃ³n, desarrollo y puntos de atenciÃ³n crÃ­ticos. Se recomienda a los desarrolladores mantener actualizada la documentaciÃ³n y los comentarios en el cÃ³digo conforme se realicen mejoras y se integren nuevos proveedores o funcionalidades.

Para cualquier duda, aporte o actualizaciÃ³n, revise el repositorio de issues y consulte las guÃ­as de contribuciÃ³n.

------------------------------------------------------------
## Diagrama Final

```mermaid
graph LR
App[app]-->Deps[dependencies]
```

------------------------------------------------------------

Happy Coding y Â¡Ã©xito en el desarrollo y anÃ¡lisis de la Voz del Cliente!


## Diagrama
```mermaid
graph LR\nApp["app"]-->Deps["dependencies"]\n
```
