# Documentaci√≥n del Proyecto

## Documentaci√≥n T√©cnica

A continuaci√≥n se presenta la documentaci√≥n t√©cnica completa en formato Markdown para desarrolladores del proyecto VoC Analyst. Este documento abarca la arquitectura general, los componentes principales, las APIs internas y las gu√≠as de desarrollo, basado en el an√°lisis del c√≥digo fuente proporcionado.

---

# VoC Analyst ‚Äì Documentaci√≥n T√©cnica

VoC Analyst es una aplicaci√≥n dise√±ada para el an√°lisis de la Voz del Cliente (VoC). La aplicaci√≥n permite la carga y procesamiento de archivos (por ejemplo, archivos PDF), el an√°lisis de conversaciones, la detecci√≥n de temas y emociones, y la generaci√≥n de insights mediante Modelos de Lenguaje (LLM). La interfaz de usuario se implementa con Streamlit y el backend integra varios proveedores LLM (como OpenAI, Anthropic y Google GenAI) para realizar an√°lisis avanzados.

---

## Tabla de Contenidos

1. [Resumen del Repositorio](#resumen-del-repositorio)
2. [Arquitectura General](#arquitectura-general)
3. [Componentes Principales](#componentes-principales)  
   3.1 [Aplicaci√≥n Streamlit](#aplicaci√≥n-streamlit)  
   3.2 [M√≥dulo LLMBackend](#m√≥dulo-llmbackend)  
   3.3 [Parser y An√°lisis de Conversaciones](#parser-y-an√°lisis-de-conversaciones)
4. [APIs Internas y Funciones Destacadas](#apis-internas-y-funciones-destacadas)
5. [Configuraci√≥n y Dependencias](#configuraci√≥n-y-dependencias)
6. [Gu√≠as de Desarrollo](#gu√≠as-de-desarrollo)
7. [Diagrama de Componentes](#diagrama-de-componentes)

---

## 1. Resumen del Repositorio

- **Lenguajes:** Se han detectado 11 archivos en el lenguaje ‚Äúother‚Äù, lo que indica una diversidad de scripts y configuraciones.
- **Endpoints:** No se han detectado endpoints p√∫blicos, ya que la comunicaci√≥n se realiza internamente entre la interfaz (Streamlit) y los m√≥dulos de backend.
- **Objetivo Principal:** Analizar las interacciones y conversaciones de clientes, extrayendo datos relevantes, normalizando la informaci√≥n y generando insights mediante modelos de lenguaje.

---

## 2. Arquitectura General

La arquitectura de VoC Analyst se basa en una separaci√≥n de responsabilidades entre una **capa de interfaz** (implementada en Streamlit) y una **capa de procesamiento y an√°lisis** que incluye:  
- **Extracci√≥n y normalizaci√≥n de datos (PDF, texto).**
- **Procesamiento y an√°lisis de conversaciones.**
- **Integraci√≥n con API de Modelos de Lenguaje (LLM).**

La siguiente representaci√≥n en Mermaid resume la relaci√≥n entre la aplicaci√≥n y sus dependencias:

```mermaid
graph LR
    App[app] --> Deps[dependencies]
```

Cada componente se comunica internamente para transformar los datos ingresados en insights accionables.

---

## 3. Componentes Principales

### 3.1 Aplicaci√≥n Streamlit

- **Funcionalidad:**  
  - Configura la p√°gina mediante la funci√≥n `st.set_page_config`.
  - Inicializa y utiliza el `st.session_state` para almacenar resultados de an√°lisis, identificadores de ejecuci√≥n y datos de archivos subidos.
  - Integra funcionalidades de carga de archivos y visualizaci√≥n interactiva de resultados.

- **Ejemplo de C√≥digo (Fragmento):**

  ```python
  import streamlit as st
  # Configuraci√≥n de la p√°gina
  st.set_page_config(
      page_title="VoC Analyst - An√°lisis de Voz del Cliente con LLM",
      page_icon="üìä",
      layout="wide",
      initial_sidebar_state="expanded"
  )

  # Inicializar el estado de la sesi√≥n
  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None
  # ... (m√°s inicializaciones)
  ```

- **Responsabilidades:**  
  - Interfaz de usuario.
  - Gesti√≥n del estado de la sesi√≥n.
  - Coordinaci√≥n de cargas y visualizaci√≥n de datos.

---

### 3.2 M√≥dulo LLMBackend

- **Funcionalidad:**  
  - Proporciona una abstracci√≥n para la comunicaci√≥n con los proveedores LLM (OpenAI, Anthropic, Google Gemini).
  - Permite la configuraci√≥n din√°mica del modelo a usar a trav√©s de la clase `ModelConfig`.
  - Inicializa el cliente correspondiente basado en el proveedor elegido.
  
- **Componentes Clave:**  
  - **ModelConfig:**  
    - Contiene atributos como `provider`, `model`, `api_key`, `max_retries` y `retry_delay`.
  - **LLMBackend:**  
    - M√©todos para inicializar el cliente LLM.
    - M√©todos internos para cargar prompts de an√°lisis y parsing (por ejemplo, `_load_parse_prompt` y `_load_analyze_prompt`).

- **Ejemplo de C√≥digo (Fragmento):**

  ```python
  from dataclasses import dataclass

  @dataclass
  class ModelConfig:
      """Configuraci√≥n para la selecci√≥n del modelo LLM"""
      provider: str  # Ej: 'openai', 'anthropic', 'gemini'
      model: str
      api_key: str
      max_retries: int = 3
      retry_delay: float = 1.0

  class LLMBackend:
      """Backend para el an√°lisis LLM en VoC Analyst"""
      
      def __init__(self, config: ModelConfig):
          self.config = config
          self.client = self._initialize_client()
          self.parse_prompt = self._load_parse_prompt()
          self.analyze_prompt = self._load_analyze_prompt()
      
      def _initialize_client(self):
          """Inicializa el cliente LLM correspondiente seg√∫n el proveedor configurado"""
          if self.config.provider == 'openai':
              return OpenAI(api_key=self.config.api_key)
          elif self.config.provider == 'anthropic':
              return Anthropic(api_key=self.config.api_key)
          elif self.config.provider == 'gemini':
              return genai.Client(api_key=self.config.api_key)
          else:
              raise ValueError(f"Proveedor no soportado: {self.config.provider}")
  ```

- **Responsabilidades:**  
  - Selecci√≥n y configuraci√≥n din√°mica del proveedor LLM.
  - Manejo de la comunicaci√≥n y solicitudes a los modelos de lenguaje.
  - Implementaci√≥n de mecanismos de reintentos en caso de fallos (uso de `max_retries` y `retry_delay`).

---

### 3.3 Parser y An√°lisis de Conversaciones

- **Funcionalidad:**  
  - Transforma archivos de conversaciones (por ejemplo, transcripciones de interacciones con clientes) a un formato JSON estructurado.
  - Realiza la extracci√≥n de metadatos como `conversation_id`, `agent_id`, `channel` y otros.
  - Implementa la redacci√≥n de PII (redacci√≥n de correos electr√≥nicos, n√∫meros telef√≥nicos, etc.) sustituy√©ndolos por etiquetas como `[EMAIL]`, `[PHONE]`, `[CARD]`, y `[ID]`.
  - Realiza validaciones para asegurar que el archivo corresponda a una √∫nica conversaci√≥n.

- **Requisitos y Ejemplos de Proceso:**  
  - **Identificaci√≥n de Conversaci√≥n:** Utilizar el nombre del archivo (o metadatos del documento) para derivar o extraer el `conversation_id`.
  - **Extracci√≥n de Mensajes:** Detectar cada turno de conversaci√≥n, identificar el rol del interlocutor (cliente o agente) y extraer la informaci√≥n disponible (por ejemplo, timestamps, canal de comunicaci√≥n).
  - **P√°rrafo de Redacci√≥n:**  
    El algoritmo debe buscar patrones que correspondan a PII y reemplazarlos utilizando expresiones regulares.

- **Citas de Requerimientos (Ejemplo):**

  ```
  ## VoC Conversation Parser

  Transformar texto crudo de una interacci√≥n en JSON con mensajes normalizados y redacci√≥n de PII.
  - Conversaci√≥n √∫nica (error si se detectan m√∫ltiples conversaciones).
  - Extracci√≥n de metadatos y mensajes.
  - Redacci√≥n de datos sensibles: correos, tel√©fonos, tarjetas e identificadores.
  ```

- **Responsabilidades:**  
  - Normalizaci√≥n y estructuraci√≥n de transcripciones.
  - Reducci√≥n de riesgos de exposici√≥n de informaci√≥n sensible mediante t√©cnicas de redacci√≥n.
  - Garantizar consistencia en el formato de salida para su posterior an√°lisis.

---

## 4. APIs Internas y Funciones Destacadas

### Funciones de Utilidad

1. **Extracci√≥n de Texto de PDF:**

   - Prop√≥sito: Extraer el contenido textual de un archivo PDF.
   - Implementaci√≥n: Utiliza `PyPDF2.PdfReader` para recorrer las p√°ginas y concatenar el texto.
   - Manejo de errores: Captura excepciones y muestra un mensaje de error en la interfaz (utilizando `st.error`).

   ```python
   def extract_text_from_pdf(pdf_file) -> str:
       """Extraer texto de archivo PDF"""
       try:
           pdf_reader = PyPDF2.PdfReader(pdf_file)
           text = ""
           for page in pdf_reader.pages:
               text += page.extract_text() + "\n"
           return text.strip()
       except Exception as e:
           st.error(f"Error al extraer texto de PDF: {str(e)}")
           return ""
   ```

2. **Validaci√≥n del Tama√±o del Archivo:**

   - Prop√≥sito: Garantizar que el archivo sea de un tama√±o aceptable (por ejemplo, menos de 100 MB).
   - Detalle: Se mueve el puntero del archivo para determinar su tama√±o.

   ```python
   def validate_file_size(file) -> bool:
       """Validar que el tama√±o del archivo sea menor a 100MB"""
       file.seek(0, 2)  # Mover al final del archivo
       size = file.tell()
       # Aqu√≠ se puede agregar una verificaci√≥n, por ejemplo:
       return size < 100 * 1024 * 1024
   ```

### M√©todos del M√≥dulo LLMBackend

- **_initialize_client:**  
  Inicializa el cliente basado en el proveedor configurado (OpenAI, Anthropic o Gemini).

- **_load_parse_prompt / _load_analyze_prompt:**  
  M√©todos internos que cargan los prompts predefinidos para el an√°lisis (los detalles pueden variar seg√∫n la integraci√≥n y necesidades).

---

## 5. Configuraci√≥n y Dependencias

### Dependencias

El proyecto utiliza m√∫ltiples bibliotecas y m√≥dulos para cubrir diversas funcionalidades:

- **Streamlit:** Para la interfaz web interactiva.
- **Pandas:** Manejo y transformaci√≥n de datos.
- **PyPDF2:** Extracci√≥n de texto desde archivos PDF.
- **Llibrer√≠as para LLM:**  
  - OpenAI  
  - Anthropics (por ejemplo, la librer√≠a `anthropic`)  
  - Google GenAI (por ejemplo, `google.genai`)
- **Otras:**  
  - json, os, time, datetime, uuid, zipfile, io, re, logging.

### Configuraci√≥n de Entorno

Se recomienda utilizar un entorno virtual (por ejemplo, virtualenv o conda) e instalar las dependencias mediante un archivo requirements.txt o similar. Un ejemplo de requirements.txt podr√≠a lucir de la siguiente manera:

```
streamlit
pandas
PyPDF2
openai
anthropic
google-genai
```

Adem√°s, es importante definir las variables de entorno necesarias para el API Key de cada proveedor LLM.

---

## 6. Gu√≠as de Desarrollo

### 6.1 Instalaci√≥n y Ejecuci√≥n

1. Clonar el repositorio:
   > git clone https://ejemplo.com/tu-repositorio.git

2. Crear y activar un entorno virtual:
   > python -m venv venv  
   > source venv/bin/activate  (Linux/Mac)  
   > .\venv\Scripts\activate  (Windows)

3. Instalar dependencias:
   > pip install -r requirements.txt

4. Ejecutar la aplicaci√≥n:
   > streamlit run app.py

### 6.2 Extender y Configurar LLMBackend

- Para a√±adir un nuevo proveedor LLM o extender funcionalidades, se puede modificar la clase LLMBackend.  
- Aseg√∫rese de agregar la validaci√≥n del proveedor en el m√©todo `_initialize_client` y definir los m√©todos que se requieran para el manejo de prompts.  
- Actualice la clase ModelConfig con los par√°metros necesarios para el nuevo proveedor.

### 6.3 Pruebas y Validaci√≥n

- Se recomienda la integraci√≥n de pruebas unitarias para cada funci√≥n cr√≠tica, en especial para:
  - Extracci√≥n y validaci√≥n de archivos.
  - Procesamiento y parsing de las conversaciones.
  - Conexi√≥n y respuesta de los proveedores LLM.
- Utilice frameworks de testing como pytest para automatizar la validaci√≥n de cambios.

### 6.4 Manejo de Errores y Logging

- El m√≥dulo de logging se configura para registrar eventos importantes, facilitando la depuraci√≥n y monitoreo de la aplicaci√≥n.
- Cada funci√≥n cr√≠tica, especialmente las relacionadas con la extracci√≥n de datos y la comunicaci√≥n con servicios externos, debe implementar un manejo robusto de errores.

---

## 7. Diagrama de Componentes

El siguiente diagrama en Mermaid ilustra la relaci√≥n b√°sica entre la aplicaci√≥n y sus dependencias:

```mermaid
graph LR
    A[Interfaz (Streamlit)]
    B[Procesamiento de Datos]
    C[LLMBackend (OpenAI, Anthropic, Gemini)]
    D[Parser de Conversaciones]

    A --> B
    B --> D
    B --> C
```

---

## Conclusi√≥n

Esta documentaci√≥n t√©cnica est√° pensada para orientar a desarrolladores en la comprensi√≥n, extensi√≥n e integraci√≥n del sistema VoC Analyst. Se recomienda mantener actualizadas las secciones de APIs internas y dependencias conforme se implementen nuevas funcionalidades o se integren nuevos proveedores.

Para cualquier consulta adicional o contribuci√≥n, por favor refi√©rase a las gu√≠as de contribuci√≥n del repositorio o contacte al equipo de desarrollo.

¬°Feliz desarrollo!

---



## Diagrama
```mermaid
graph LR
App[app]-->Deps[dependencies]

```


---

## Gu√≠a de Usuario

# Gu√≠a de Usuario: Herramienta de An√°lisis y Procesamiento de Informaci√≥n

Bienvenido a la gu√≠a de usuario de nuestra aplicaci√≥n, una herramienta dise√±ada para facilitar el an√°lisis y procesamiento de documentos e informaci√≥n utilizando t√©cnicas avanzadas de Inteligencia Artificial. A continuaci√≥n, encontrar√°s una descripci√≥n detallada de la aplicaci√≥n, sus funcionalidades principales, instrucciones para su uso y una secci√≥n de preguntas frecuentes.

---

## Descripci√≥n de la Aplicaci√≥n

Esta aplicaci√≥n cuenta con una interfaz web interactiva desarrollada en Streamlit, una biblioteca de Python que permite construir aplicaciones web de manera r√°pida y sencilla. La herramienta est√° especialmente dise√±ada para:

- **Procesar archivos PDF:** Permite la carga y extracci√≥n de contenido de documentos en formato PDF.
- **An√°lisis con modelos de lenguaje (IA):** Utiliza modelos de lenguaje para analizar, interpretar y extraer informaci√≥n relevante de los documentos.
- **Interfaz interactiva:** Facilita la interacci√≥n mediante una interfaz amigable, permitiendo a los usuarios cargar documentos y visualizar resultados de manera inmediata.

Gracias a estas capacidades, la herramienta se posiciona como un recurso valioso para profesionales y usuarios que necesiten automatizar la gesti√≥n y an√°lisis de grandes vol√∫menes de informaci√≥n.

---

## Principales Funcionalidades

La aplicaci√≥n se estructura en torno a tres funcionalidades fundamentales:

1. **Interfaz Web Interactiva con Streamlit**
   - Visualiza de manera din√°mica los resultados del proceso de an√°lisis.
   - Ofrece controles intuitivos para la navegaci√≥n y manipulaci√≥n de datos.
   - Posibilita una experiencia de usuario fluida sin necesidad de conocimientos t√©cnicos avanzados.

2. **Procesamiento de Archivos PDF**
   - Permite la carga de archivos PDF a trav√©s de la interfaz web.
   - Extrae texto e informaci√≥n relevante de los documentos.
   - Prepara el contenido para su posterior an√°lisis mediante t√©cnicas de IA.

3. **An√°lisis con Modelos de Lenguaje (IA)**
   - Aplica modelos de procesamiento de lenguaje natural para analizar el contenido extra√≠do.
   - Identifica patrones, temas, entidades y otros elementos importantes dentro del texto.
   - Presenta resultados y reportes que facilitan la toma de decisiones.

Estas funcionalidades est√°n integradas para brindar una soluci√≥n completa en la gesti√≥n y an√°lisis de informaci√≥n.

---

## Descripci√≥n de Uso

A continuaci√≥n, se detalla el flujo de trabajo para utilizar la aplicaci√≥n de manera efectiva:

1. **Acceso a la Aplicaci√≥n**
   - Abre tu navegador web e ingresa a la URL de la aplicaci√≥n.
   - Se desplegar√° la interfaz de usuario de Streamlit, dise√±ada de forma intuitiva.

2. **Carga de Archivos PDF**
   - Localiza el bot√≥n de ‚ÄúCargar Archivo‚Äù en el panel principal.
   - Selecciona el archivo PDF que deseas procesar desde tu dispositivo.
   - La aplicaci√≥n mostrar√° un indicador de progreso mientras se carga y procesa el documento.

3. **Procesamiento y An√°lisis**
   - Una vez cargado el documento, la aplicaci√≥n extraer√° el contenido textual del PDF.
   - Los modelos de lenguaje (IA) analizar√°n el contenido para extraer informaci√≥n clave, identificar temas y generar res√∫menes.
   - Los resultados se presentar√°n de forma interactiva en la misma interfaz.

4. **Visualizaci√≥n de Resultados**
   - Revisa los resultados del an√°lisis en la secci√≥n de reportes de la aplicaci√≥n.
   - Puedes explorar diferentes vistas y filtros para profundizar en la informaci√≥n.
   - Si es necesario, exporta o guarda los resultados para uso posterior.

5. **Interacci√≥n y Retroalimentaci√≥n**
   - Utiliza los controles y opciones que la aplicaci√≥n ofrece para ajustar el an√°lisis (por ejemplo, seleccionar diferentes modelos o par√°metros de procesamiento).
   - Aprovecha la posibilidad de cargar m√∫ltiples archivos para comparar y combinar resultados en un solo informe.

---

## Preguntas Frecuentes (FAQ)

**1. ¬øQu√© tipos de archivos puedo procesar?**  
La aplicaci√≥n est√° optimizada para archivos PDF, sin embargo, futuras actualizaciones podr√≠an incluir soporte para otros formatos.

**2. ¬øNecesito conocimientos t√©cnicos para usar la aplicaci√≥n?**  
No, la interfaz est√° dise√±ada para ser intuitiva y accesible para usuarios sin conocimientos t√©cnicos avanzados. Basta con seguir las instrucciones en pantalla.

**3. ¬øC√≥mo protege la aplicaci√≥n la seguridad de mis datos?**  
La seguridad es una prioridad. Todos los archivos y datos procesados se manejan de forma confidencial y se utilizan √∫nicamente para el an√°lisis en la sesi√≥n activa. Revisa la pol√≠tica de privacidad para m√°s detalles.

**4. ¬øPuedo realizar un an√°lisis en lote o m√∫ltiples archivos a la vez?**  
Actualmente, la aplicaci√≥n permite cargar y analizar un archivo a la vez. En futuras versiones se incluir√° la opci√≥n de an√°lisis en lote.

**5. ¬øQu√© hacer si el an√°lisis no se realiza correctamente?**  
Si experimentas problemas o el an√°lisis produjera resultados inesperados:
- Verifica que el archivo PDF no est√© da√±ado.
- Confirma que el documento contenga texto seleccionable.
- Consulta la secci√≥n de ayuda o contacta al soporte t√©cnico para asistencia.

**6. ¬øSe puede personalizar el nivel de an√°lisis del modelo de IA?**  
La aplicaci√≥n permite algunos ajustes en los par√°metros de an√°lisis. Sin embargo, se recomienda utilizar la configuraci√≥n predeterminada para la mayor√≠a de los usuarios.

---

Esperamos que esta gu√≠a te ayude a aprovechar al m√°ximo las funcionalidades de la herramienta. Si tienes alguna duda adicional o sugerencia, no dudes en ponerte en contacto con nuestro equipo de soporte. ¬°Disfruta de una experiencia de an√°lisis y procesamiento potente e intuitiva!