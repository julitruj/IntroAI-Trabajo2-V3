# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

Bienvenido a nuestra aplicaciÃ³n, una herramienta especializada en el anÃ¡lisis y procesamiento de informaciÃ³n a partir de diferentes fuentes. A continuaciÃ³n te mostramos cÃ³mo sacarle el mÃ¡ximo provecho.

---

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?

- **PropÃ³sito principal**:  
  Esta aplicaciÃ³n estÃ¡ diseÃ±ada para simplificar y automatizar el anÃ¡lisis de informaciÃ³n proveniente de archivos PDF, conversaciones y datos de clientes, utilizando modelos de lenguaje basados en inteligencia artificial y analizando sentimientos y emociones.

- **Problema que resuelve**:  
  Los usuarios a menudo necesitan extraer insights relevantes de documentos extensos, conversaciones y feedback de clientes. Nuestra herramienta procesa y analiza estos datos de forma rÃ¡pida y precisa, ayudÃ¡ndote a tomar decisiones informadas sin tener que hacerlo manualmente.

- **Beneficios clave**:  
  - ReducciÃ³n significativa del tiempo de anÃ¡lisis.
  - ObtenciÃ³n de insights profundos sobre el sentimiento y las emociones en la comunicaciÃ³n.
  - Mejora en la toma de decisiones basada en datos reales.
  - Interfaz intuitiva y fÃ¡cil de usar para cualquier usuario.

- **Audiencia objetivo**:  
  Profesionales de anÃ¡lisis de datos, equipos de atenciÃ³n al cliente, responsables de marketing y cualquier persona que necesite extraer informaciÃ³n Ãºtil de documentos y conversaciones complejas.

---

## âœ¨ Funcionalidades Principales

### 1. Interfaz Web Interactiva con Streamlit
- **Â¿QuÃ© hace?**:  
  Proporciona un entorno amigable y visual para interactuar con la aplicaciÃ³n, acceder a funcionalidades y ver resultados de manera inmediata.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Al iniciar la aplicaciÃ³n y cada vez que necesites navegar entre las distintas opciones de anÃ¡lisis.
  
- **Â¿CÃ³mo acceder?**:  
  Abre tu navegador favorito e ingresa la URL provista, o accede a travÃ©s del acceso directo en tu escritorio.
  
- **Resultado esperado**:  
  VerÃ¡s una interfaz clara con menÃºs y botones que te permitirÃ¡n cargar archivos y seleccionar los tipos de anÃ¡lisis de datos.

### 2. Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**:  
  Permite subir y extraer contenido de documentos PDF para facilitar su anÃ¡lisis y transformaciÃ³n en datos estructurados.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando desees analizar documentos, reportes o cualquier archivo en formato PDF.
  
- **Â¿CÃ³mo acceder?**:  
  Desde la interfaz web, selecciona la opciÃ³n â€œSubir PDFâ€ y arrastra o selecciona el archivo deseado.
  
- **Resultado esperado**:  
  El contenido del PDF se mostrarÃ¡ procesado y listo para que puedas aplicarle las demÃ¡s funciones de anÃ¡lisis.

### 3. AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**:  
  Utiliza inteligencia artificial para procesar el texto de los documentos y generar insights relevantes, como resÃºmenes y detecciÃ³n de temas.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites comprender rÃ¡pidamente el contenido de un documento o extraer informaciÃ³n clave sin leerlo por completo.
  
- **Â¿CÃ³mo acceder?**:  
  DespuÃ©s de subir un PDF, selecciona la opciÃ³n â€œAnalizar con IAâ€ en el menÃº de resultados.
  
- **Resultado esperado**:  
  ObtendrÃ¡s reportes con resÃºmenes, palabras clave y una interpretaciÃ³n del contenido.

### 4. AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**:  
  EvalÃºa y extrae patrones de interacciÃ³n de archivos de conversaciÃ³n, ayudando a identificar temas comunes y Ã¡reas de mejora.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Al trabajar con transcripciones de reuniones, chats o cualquier intercambio textual entre personas.
  
- **Â¿CÃ³mo acceder?**:  
  Desde la interfaz, elige â€œAnalizar Conversacionesâ€ y sube el archivo correspondiente.
  
- **Resultado esperado**:  
  VerÃ¡s una representaciÃ³n visual de los temas y patrones principales en la conversaciÃ³n.

### 5. AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**:  
  Recoge y analiza feedback de clientes para entender sus opiniones, necesidades y emociones respecto a productos o servicios.
  
- **Â¿CuÃ¡ndo usarla?**:  
  En situaciones donde deseas evaluar la satisfacciÃ³n del cliente y descubrir oportunidades de mejora.
  
- **Â¿CÃ³mo acceder?**:  
  Selecciona â€œAnÃ¡lisis de Voz del Clienteâ€ y carga el archivo o ingresa los comentarios recogidos.
  
- **Resultado esperado**:  
  ObtendrÃ¡s un informe detallado con insights sobre la experiencia del cliente.

### 6. AnÃ¡lisis de Sentimientos y Emociones
- **Â¿QuÃ© hace?**:  
  Analiza el tono y las emociones presentes en textos o conversaciones, identificando sentimientos positivos, negativos o neutros.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites evaluar el impacto emocional de un contenido o entender mejor la reacciÃ³n de la audiencia.
  
- **Â¿CÃ³mo acceder?**:  
  DespuÃ©s de procesar un contenido (PDF o conversaciÃ³n), selecciona la opciÃ³n â€œAnalizar Sentimientos y Emocionesâ€.
  
- **Resultado esperado**:  
  Se mostrarÃ¡ un grÃ¡fico o reporte que clasifica el contenido segÃºn diferentes categorÃ­as emocionales.

---

## ğŸš€ CÃ³mo Empezar

### Primer Uso
1. **Requisitos previos**:  
   - ConexiÃ³n a internet.
   - Archivo(s) PDF o datos de conversaciÃ³n listos para analizar.
   
2. **Acceso inicial**:  
   - Abre tu navegador e ingresa la URL asignada para acceder a la interfaz de la aplicaciÃ³n.
   
3. **ConfiguraciÃ³n bÃ¡sica**:  
   - No requiere configuraciÃ³n compleja. Sigue las instrucciones en pantalla para familiarizarte con el menÃº y las opciones.
   
4. **Primera tarea recomendada**:  
   - Sube un documento PDF y realiza un anÃ¡lisis bÃ¡sico con IA para ver cÃ³mo se procesan y presentan los datos.

### Flujo TÃ­pico de Uso
1. **Paso 1**: Inicia sesiÃ³n en la aplicaciÃ³n accediendo a la interfaz web.
2. **Paso 2**: Sube el archivo PDF o el documento de conversaciÃ³n a analizar.
3. **Paso 3**: Selecciona la opciÃ³n deseada (por ejemplo, â€œAnalizar con IAâ€, â€œAnalizar Conversacionesâ€ o â€œAnÃ¡lisis de Voz del Clienteâ€).
4. **Paso 4**: Revisa el informe o los grÃ¡ficos generados y obtÃ©n insights prÃ¡cticos para tu toma de decisiones.

---

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: AnÃ¡lisis RÃ¡pido de Documentos Extensos
**SituaciÃ³n**:  
Tienes un informe largo en PDF y necesitas extraer las partes mÃ¡s relevantes sin leer todo el documento.

**Pasos**: 
1. Sube el documento PDF desde la interfaz web.
2. Selecciona la opciÃ³n â€œAnalizar con IAâ€.
3. Revisa el resumen y las palabras clave generadas.

**Resultado final**:  
Obtienes un resumen conciso y puntos clave del documento que te permiten tomar decisiones rÃ¡pidamente.

### Escenario 2: EvaluaciÃ³n de Conversaciones de Soporte al Cliente
**SituaciÃ³n**:  
Deseas entender las preguntas y preocupaciones frecuentes de tus clientes a partir de transcripciones de chats.

**Pasos**: 
1. Sube las transcripciones de las conversaciones.
2. Selecciona â€œAnalizar Conversacionesâ€.
3. Observa los temas comunes y patrones en las interacciones.

**Resultado final**:  
Identificas Ã¡reas de mejora en el servicio al cliente y ajustas tus estrategias de atenciÃ³n.

### Escenario 3: MediciÃ³n de la EmociÃ³n en Feedback de Clientes
**SituaciÃ³n**:  
Recibes mÃºltiples comentarios de clientes y necesitas evaluar el sentimiento general para ajustar la estrategia de marketing.

**Pasos**: 
1. Ingresa el feedback de los clientes en la secciÃ³n â€œAnÃ¡lisis de Voz del Clienteâ€.
2. Selecciona â€œAnalizar Sentimientos y Emocionesâ€.
3. Revisa el grÃ¡fico emocional y el reporte detallado.

**Resultado final**:  
Comprendes el estado emocional de tus clientes y optimizas tus campaÃ±as de marketing.

---

## â“ Preguntas Frecuentes

**P: Â¿CÃ³mo se asegura la confidencialidad de mis documentos?**  
R: La aplicaciÃ³n procesa los datos de manera segura y confidencial. No se almacenan datos sensibles mÃ¡s allÃ¡ de la sesiÃ³n activa, garantizando tu privacidad.

**P: Â¿QuÃ© hago si mi PDF no se carga correctamente?**  
R: Verifica que el archivo estÃ© en formato PDF y que no estÃ© daÃ±ado. Si el problema persiste, reinicia la aplicaciÃ³n y vuelve a intentarlo.

**P: Â¿Puedo usar la aplicaciÃ³n sin tener conocimientos tÃ©cnicos?**  
R: SÃ­, la aplicaciÃ³n estÃ¡ diseÃ±ada para ser intuitiva y fÃ¡cil de usar. Cada paso cuenta con instrucciones claras y la interfaz es amigable.

**P: Â¿CuÃ¡les son las limitaciones principales?**  
R:  
- No puede procesar archivos que no estÃ©n en formato PDF.
- La precisiÃ³n del anÃ¡lisis depende de la calidad del texto original.
- Puede haber limitaciones en el tamaÃ±o del archivo a subir en cada sesiÃ³n.

---

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: El PDF no se carga correctamente
- **SÃ­ntomas**:  
  Mensaje de error al intentar subir el archivo o el archivo no aparece en la lista de documentos.
- **Causa probable**:  
  El archivo podrÃ­a estar daÃ±ado o no cumplir con el formato requerido.
- **SoluciÃ³n**:  
  1. Verifica que el archivo sea un PDF vÃ¡lido.  
  2. AsegÃºrate de que el tamaÃ±o no exceda el lÃ­mite permitido.  
  3. Si el problema continÃºa, intÃ©ntalo en otro navegador o reinicia la aplicaciÃ³n.

### Problema: Resultados de anÃ¡lisis inexactos o incompletos
- **SÃ­ntomas**:  
  Los informes generados no reflejan adecuadamente el contenido del documento.
- **Causa probable**:  
  El contenido del archivo puede incluir errores tipogrÃ¡ficos, formatos inusuales o ser muy extenso.
- **SoluciÃ³n**:  
  1. Revisa el documento y asegÃºrate de que el texto sea claro y bien formateado.  
  2. Intenta dividir el documento en secciones mÃ¡s pequeÃ±as y analiza cada una por separado.  
  3. Consulta la secciÃ³n de ayuda para ajustar parÃ¡metros o mejorar la calidad del texto.

### Problema: La interfaz presenta lentitud o errores de carga
- **SÃ­ntomas**:  
  Retrasos en la respuesta de la pÃ¡gina o mensajes de error al navegar.
- **Causa probable**:  
  Problemas temporales de conectividad o alta demanda en el servidor.
- **SoluciÃ³n**:  
  1. Verifica tu conexiÃ³n a internet.  
  2. Espera unos minutos y vuelve a intentarlo.  
  3. Si persiste, contacta al soporte tÃ©cnico.

---

## ğŸ“ Soporte y Contacto

- **Â¿Necesitas ayuda adicional?**  
  Puedes contactarnos a travÃ©s del correo soporte@tuapp.com, donde nuestro equipo te asistirÃ¡ con cualquier duda o inconveniente.

- **Â¿Encontraste un error?**  
  Reporta el problema mediante el formulario de feedback disponible en la interfaz o envÃ­a un correo a reportes@tuapp.com con el detalle del error.

- **Â¿Tienes sugerencias?**  
  Nos encantarÃ­a saber tu opiniÃ³n. EnvÃ­a tus comentarios y sugerencias a feedback@tuapp.com para ayudarnos a mejorar la aplicaciÃ³n.

---

Esperamos que esta guÃ­a te sea Ãºtil y disfrutes de todas las funcionalidades de nuestra herramienta para transformar y analizar tus datos de manera fÃ¡cil y efectiva. Â¡Bienvenido y Ã©xito en tu anÃ¡lisis!

## DocumentaciÃ³n TÃ©cnica
A continuaciÃ³n se presenta la documentaciÃ³n tÃ©cnica completa en Markdown, organizada segÃºn la estructura obligatoria solicitada:

------------------------------------------------------------
# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n estÃ¡ orientada a desarrolladores y profesionales que deseen comprender, mantener y extender la aplicaciÃ³n â€œVoC Analystâ€. La herramienta procesa archivos (por ejemplo, PDFs) para extraer y analizar la â€œVoz del Clienteâ€ a travÃ©s de modelos de lenguaje (LLM). La interfaz se implementa con Streamlit y el backend integra mÃºltiples proveedores LLM (OpenAI, Anthropic y Google GenAI).

------------------------------------------------------------
## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n arquitectÃ³nico utilizado:**  
  Se utiliza un enfoque monolÃ­tico modular. La capa de presentaciÃ³n se implementa con Streamlit, que gestiona la interfaz de usuario, la carga de archivos y la visualizaciÃ³n interactiva. La lÃ³gica de negocio se encarga de la extracciÃ³n y procesamiento de datos (por ejemplo, extrayendo texto de PDFs y parseando conversaciones) y de la integraciÃ³n con proveedores LLM mediante un mÃ³dulo denominado â€œLLMBackendâ€.
  
- **Diagrama de componentes:**  
  A continuaciÃ³n se presenta un diagrama Mermaid que representa la relaciÃ³n entre los componentes principales:
  
  ```mermaid
  graph LR
      A[Interfaz Streamlit] --> B[MÃ³dulo de Procesamiento y ValidaciÃ³n]
      A --> C[Manejo del Estado (st.session_state)]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[Parser y RedacciÃ³n de PII]
      A --> F[LLMBackend]
      F --> G[Proveedores LLM (OpenAI, Anthropic, Gemini)]
  ```

- **Flujo de datos principal entre componentes:**  
  1. El usuario carga uno o varios archivos (por ejemplo, PDFs) a travÃ©s de la interfaz de Streamlit.  
  2. Se valida el tamaÃ±o del archivo y se extrae el contenido textual mediante funciones como â€œextract_text_from_pdfâ€ (usando PyPDF2).  
  3. El texto extraÃ­do se procesa; se parsea la conversaciÃ³n, se normaliza el contenido y se redacta la informaciÃ³n sensible (PII).  
  4. La capa de negocio utiliza el mÃ³dulo â€œLLMBackendâ€ para enviar prompts a los proveedores LLM y obtener insights (anÃ¡lisis de sentimientos, detecciÃ³n de temas, etc.).  
  5. Los resultados se almacenan en el estado de la sesiÃ³n (`st.session_state`) y se presentan de forma interactiva en la interfaz.

- **Dependencias crÃ­ticas y su propÃ³sito:**  
  - **Streamlit:** Facilita la creaciÃ³n de la interfaz web interactiva y la gestiÃ³n del estado de la sesiÃ³n.  
  - **PyPDF2:** Extrae el contenido textual de documentos PDF.  
  - **Pandas:** Permite el manejo y visualizaciÃ³n de datos tabulares (por ejemplo, para mostrar resÃºmenes o tablas de anÃ¡lisis).  
  - **LLM SDKs (openai, anthropic, google-genai):** Proveen la capacidad de anÃ¡lisis avanzado del contenido textual y la generaciÃ³n de insights mediante modelos de lenguaje.

------------------------------------------------------------
## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  - Principalmente Python (se clasifica como â€œotherâ€ en el repositorio).

- **Frameworks / LibrerÃ­as:**  
  - **Streamlit:** (>=1.49.1) para la interfaz web interactiva.  
  - **PyPDF2:** (>=3.0.1) para extraer el contenido textual de PDFs.  
  - **Pandas:** (>=2.3.2) para la manipulaciÃ³n y visualizaciÃ³n de datos.  
  - **LLM SDKs:**  
    - `openai` para integrar modelos de OpenAI.  
    - `anthropic` para conectar con modelos de Anthropic.  
    - `google-genai` para la integraciÃ³n con Google GenAI (Gemini).  
  - **LibrerÃ­as estÃ¡ndar de Python:** json, os, time, datetime, uuid, zipfile, io, typing.

- **Base de datos:**  
  No se utiliza una base de datos tradicional. El procesamiento y almacenamiento temporal de datos se maneja en memoria mediante `st.session_state`.

- **APIs externas:**  
  Se integran APIs de proveedores LLM (OpenAI, Anthropic y Google GenAI) para realizar anÃ¡lisis semÃ¡ntico avanzados.

- **Infraestructura:**  
  La aplicaciÃ³n se despliega como una aplicaciÃ³n web simple mediante Streamlit y puede ejecutarse en entornos locales, servidores o contenedores Docker.

------------------------------------------------------------
## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Gestionar la interfaz de usuario, la carga y validaciÃ³n de archivos, y la presentaciÃ³n interactiva de los resultados. Se usa para configurar la pÃ¡gina, inicializar el estado de sesiÃ³n (por ejemplo, `analysis_results`, `run_id`, `uploaded_files_data`, `processing_complete`), y coordinar funciones de extracciÃ³n de texto.

- **UbicaciÃ³n:**  
  El punto de entrada principal suele ser un archivo como `app.py` dentro del directorio principal o en la carpeta `app/`.

- **Interfaces y MÃ©todos Expuestos:**  
  - ConfiguraciÃ³n de la pÃ¡gina mediante `st.set_page_config`.  
  - Funciones auxiliares:
    - `extract_text_from_pdf(pdf_file) â†’ str`: Recorre cada pÃ¡gina de un PDF y concatena el texto extraÃ­do.  
    - `validate_file_size(file) â†’ bool`: Verifica que el archivo no exceda un tamaÃ±o predefinido (por ejemplo, 100â€¯MB).

- **Ejemplo de CÃ³digo:**

  ```python
  import streamlit as st
  import PyPDF2

  st.set_page_config(
      page_title="VoC Analyst - AnÃ¡lisis de Voz del Cliente con LLM",
      page_icon="ğŸ“Š",
      layout="wide",
      initial_sidebar_state="expanded"
  )

  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None
  if 'run_id' not in st.session_state:
      st.session_state.run_id = None
  if 'uploaded_files_data' not in st.session_state:
      st.session_state.uploaded_files_data = []
  if 'processing_complete' not in st.session_state:
      st.session_state.processing_complete = False

  def extract_text_from_pdf(pdf_file) -> str:
      """Extraer texto de archivo PDF"""
      try:
          pdf_reader = PyPDF2.PdfReader(pdf_file)
          text = ""
          for page in pdf_reader.pages:
              text += page.extract_text() + "\n"
          return text.strip()
      except Exception as e:
          st.error(f"Error al extraer texto de PDF: {str(e)}")
          return ""
  ```

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  Gestiona la integraciÃ³n con proveedores de modelos de lenguaje (LLM) y permite el anÃ¡lisis avanzado del contenido extraÃ­do. Este mÃ³dulo facilita la selecciÃ³n dinÃ¡mica del proveedor, la inicializaciÃ³n del cliente mediante una clase de configuraciÃ³n, y el manejo de solicitudes y respuestas.

- **UbicaciÃ³n:**  
  Se encuentra en el archivo `llm_backend.py` en la raÃ­z del repositorio.

- **Interfaces y MÃ©todos Expuestos:**  
  - **ModelConfig:**  
    Es un dataclass que define la configuraciÃ³n del modelo, incluyendo atributos tales como:
    - `provider`: Tipo de proveedor (ejemplo, "openai", "anthropic" o "gemini").
    - `model`: Modelo a utilizar.
    - `api_key`: Clave para autenticaciÃ³n.
    - `max_retries` y `retry_delay`: ParÃ¡metros para reintentos en caso de fallo.
  
  - **LLMBackend:**  
    Contiene mÃ©todos tales como:
    - `__init__(config: ModelConfig)`: Inicializa el backend con la configuraciÃ³n proporcionada.
    - `_initialize_client()`: Selecciona e instancia el cliente adecuado segÃºn el proveedor.
    - `_load_parse_prompt()` y `_load_analyze_prompt()`: Cargan los prompts que se usarÃ¡n para el parseo y anÃ¡lisis del contenido.
    - `analyze_text(text: str) â†’ Dict[str, Any]`: EnvÃ­a el texto a analizar y retorna los insights generados por el modelo LLM.

- **Ejemplo de CÃ³digo:**

  ```python
  from dataclasses import dataclass
  import openai
  import anthropic
  from google import genai

  @dataclass
  class ModelConfig:
      provider: str  # 'openai', 'anthropic', 'gemini'
      model: str
      api_key: str
      max_retries: int = 3
      retry_delay: float = 1.0

  class LLMBackend:
      def __init__(self, config: ModelConfig):
          self.config = config
          self.client = self._initialize_client()
          self.parse_prompt = self._load_parse_prompt()
          self.analyze_prompt = self._load_analyze_prompt()
      
      def _initialize_client(self):
          if self.config.provider == 'openai':
              return openai.OpenAI(api_key=self.config.api_key)
          elif self.config.provider == 'anthropic':
              return anthropic.Anthropic(api_key=self.config.api_key)
          elif self.config.provider == 'gemini':
              return genai.Client(api_key=self.config.api_key)
          else:
              raise ValueError(f"Proveedor no soportado: {self.config.provider}")
      
      def _load_parse_prompt(self) -> str:
          return "Prompt de parseo de conversaciÃ³n"
      
      def _load_analyze_prompt(self) -> str:
          return "Prompt de anÃ¡lisis de conversaciÃ³n"
      
      def analyze_text(self, text: str) -> dict:
          # Ejemplo simplificado de anÃ¡lisis; se debe implementar manejo de reintentos y comunicaciÃ³n real con la API
          response = self.client.create_completion(
              engine=self.config.model,
              prompt=f"{self.analyze_prompt}\n{text}",
              max_tokens=150
          )
          return {"analysis": response}
  ```

---

### 3. MÃ³dulo de ConversaciÃ³n y Parser

- **PropÃ³sito:**  
  Procesar y normalizar el contenido textual extraÃ­do de documentos o ingresado por el usuario. Entre sus responsabilidades se incluyen:
  - Convertir el texto en un formato estructurado (por ejemplo, JSON) que contenga la informaciÃ³n de la conversaciÃ³n.
  - Extraer metadatos esenciales (conversation_id, timestamps, roles de interlocutores, etc.).
  - Redactar informaciÃ³n sensible (PII) reemplazÃ¡ndola por etiquetas estÃ¡ndar (por ejemplo, `[EMAIL]`, `[PHONE]`, `[CARD]`, `[ID]`).

- **Requerimientos y Proceso:**  
  - Identificar la conversaciÃ³n a partir de metadatos o el nombre del archivo.  
  - Dividir el texto en turnos (mensajes) asignando el rol correspondiente.  
  - Aplicar expresiones regulares para detectar y redactar datos sensibles.

------------------------------------------------------------
## ğŸš€ APIs y Endpoints

Aunque la aplicaciÃ³n no expone endpoints REST pÃºblicos, dispone de â€œAPIs internasâ€ mediante las funciones y mÃ©todos que orquestan el procesamiento:

- **FunciÃ³n: extract_text_from_pdf(pdf_file) â†’ str**  
  Extrae el contenido textual de un archivo PDF utilizando PyPDF2 y retorna el texto limpio.

- **FunciÃ³n: validate_file_size(file) â†’ bool**  
  Verifica que el archivo subido no supere el lÃ­mite de 100MB.

- **MÃ©todo: LLMBackend.analyze_text(text: str) â†’ dict**  
  EnvÃ­a el texto a analizar al modelo LLM configurado y retorna un diccionario con los resultados obtenidos (por ejemplo, resumen, anÃ¡lisis de sentimiento, identificaciÃ³n de temas).

- **Parser de Conversaciones:**  
  Funciones internas (no expuestas como endpoints pÃºblicos) que transforman la transcripciÃ³n en un JSON estructurado, listo para la llamada a LLM y posterior visualizaciÃ³n.

------------------------------------------------------------
## ğŸ’¾ Modelo de Datos

- **Entidades Principales:**

  - **ConversaciÃ³n:**  
    Representada en un formato JSON que contiene:
    - `conversation_id`: Identificador Ãºnico de la conversaciÃ³n.
    - `messages`: Lista de mensajes, donde cada mensaje contiene:
      - `sender`: Identifica el rol del emisor (cliente, agente, u otro).  
      - `timestamp`: Marca temporal del mensaje (si aplica).
      - `content`: Texto del mensaje, con informaciÃ³n sensible redactada.
      - `metadata`: Datos adicionales como canal, duraciÃ³n u otros atributos.

- **Transformaciones y Validaciones:**  
  - Verificar que el contenido extraÃ­do no estÃ© vacÃ­o.  
  - Redactar informaciÃ³n sensible utilizando reglas predefinidas (por ejemplo, con expresiones regulares).  
  - Estructurar el resultado para facilitar el anÃ¡lisis y la visualizaciÃ³n en la interfaz.

------------------------------------------------------------
## ğŸ› ï¸ GuÃ­a de Desarrollo

### ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**  
   - Python 3.8 o superior.  
   - ConexiÃ³n a Internet para acceder a las APIs de proveedores LLM en producciÃ³n.

2. **InstalaciÃ³n:**
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/voc-analyst.git
     cd voc-analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv venv
     source venv/bin/activate    # En Linux/Mac
     venv\Scripts\activate       # En Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de entorno:**  
   - Configure las API keys para los proveedores LLM mediante variables de entorno, por ejemplo:  
     - `OPENAI_API_KEY`  
     - `ANTHROPIC_API_KEY`  
     - `GEMINI_API_KEY`

### Estructura del CÃ³digo

El repositorio se organiza de la siguiente manera:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Entrada principal (interfaz Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones para procesar y parsear conversaciones
â”‚   â””â”€â”€ utils.py              # Funciones auxiliares (extracciÃ³n, validaciÃ³n, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo para integraciÃ³n con proveedores LLM
â”œâ”€â”€ requirements.txt          # Dependencias del proyecto
â””â”€â”€ README.md                 # DocumentaciÃ³n general
```

### Extender y Configurar LLMBackend

- Para agregar un nuevo proveedor LLM, modifique el mÃ©todo `_initialize_client()` en la clase LLMBackend e incluya la lÃ³gica para la instancia del cliente.
- Actualice o defina nuevos prompts a travÃ©s de `_load_parse_prompt()` y `_load_analyze_prompt()` para adaptar la herramienta a nuevos requerimientos.
- Se recomienda escribir pruebas unitarias para validar la integraciÃ³n del nuevo proveedor.

### Pruebas y ValidaciÃ³n

- Implemente tests unitarios (por ejemplo, con pytest) para:
  - Validar la extracciÃ³n de texto de archivos PDF.
  - Probar la funciÃ³n validate_file_size().
  - Simular la comunicaciÃ³n con los proveedores LLM y verificar la correcta generaciÃ³n de insights.
- Utilice logs y manejo de excepciones en cada mÃ³dulo para facilitar la depuraciÃ³n y el monitoreo.

------------------------------------------------------------
## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**  
  - La extracciÃ³n de texto depende de la capacidad de PyPDF2; archivos PDF basados en imÃ¡genes pueden requerir OCR.  
  - El rendimiento al procesar archivos muy grandes (cercanos a 100MB) podrÃ­a verse afectado.  
  - Los anÃ¡lisis del modelo LLM dependen de la calidad del texto extraÃ­do y la correcta configuraciÃ³n de los prompts.
  
- **Consideraciones de Rendimiento:**  
  - Es recomendable implementar procesamiento en lote o tÃ©cnicas de caching para anÃ¡lisis repetitivos de documentos grandes.  
  - Ajustar los parÃ¡metros de reintentos (`max_retries` y `retry_delay`) en la configuraciÃ³n de ModelConfig para asegurar una conexiÃ³n robusta con el proveedor LLM.
  
- **Aspectos de Seguridad:**  
  - Proteja las API keys utilizando variables de entorno y archivos de configuraciÃ³n seguros.  
  - Redacte adecuadamente la informaciÃ³n sensible (PII) antes de procesarla o enviarla a proveedores externos.

- **Mejoras Sugeridas / TODOs:**  
  - Ampliar el soporte a formatos adicionales (por ejemplo, TXT).  
  - Integrar OCR para trabajar con PDFs basados en imÃ¡genes.  
  - Mejorar la modularidad y la documentaciÃ³n inline para facilitar la incorporaciÃ³n de nuevos proveedores.

------------------------------------------------------------
## Diagrama del Sistema

El siguiente diagrama Mermaid resume la relaciÃ³n principal entre la aplicaciÃ³n y sus dependencias:

```mermaid
graph LR
    A[Interfaz Streamlit] --> B[MÃ³dulo de Procesamiento y ValidaciÃ³n]
    B --> C[ExtracciÃ³n de Texto y Parser]
    A --> D[LLMBackend]
    D --> E[Proveedores LLM (OpenAI, Anthropic, Gemini)]
```

------------------------------------------------------------
## Consideraciones Finales

- Mantenga la documentaciÃ³n actualizada a medida que se realizan cambios o se aÃ±aden nuevas funcionalidades.
- Siga buenas prÃ¡cticas de codificaciÃ³n y asegÃºrese de realizar pruebas en cada actualizaciÃ³n para prevenir regresiones.
- Para cualquier duda o contribuciÃ³n, consulte la secciÃ³n de issues del repositorio o contacte directamente al equipo de desarrollo.

------------------------------------------------------------
## GuÃ­a de Usuario

Esta secciÃ³n estÃ¡ destinada a los usuarios finales para explicar de forma breve el uso de la aplicaciÃ³n:

1. **Acceso a la AplicaciÃ³n:**  
   Abra la URL proporcionada en su navegador para acceder a la interfaz de Streamlit.

2. **Carga y Procesamiento de Archivos:**  
   Utilice el botÃ³n â€œSubir Archivoâ€ para cargar un PDF. Espere a que la aplicaciÃ³n extraiga y procese el contenido.

3. **AnÃ¡lisis de Contenido:**  
   DespuÃ©s de cargar el archivo, inicie el anÃ¡lisis haciendo clic en â€œAnalizar con LLMâ€. La herramienta procesarÃ¡ el texto y generarÃ¡ un informe con insights, resÃºmenes y recomendaciones.

4. **VisualizaciÃ³n y ExportaciÃ³n:**  
   Revise los resultados en el panel de control, donde se mostrarÃ¡n grÃ¡ficos, tablas y mÃ©tricas clave. Opcionalmente, exporte los resultados a formatos compatibles (por ejemplo, JSON o CSV).

5. **Soporte:**  
   Si tiene problemas o preguntas, consulte la secciÃ³n â€œSoporteâ€ o â€œFAQâ€ en la aplicaciÃ³n, o contacte al equipo de asistencia segÃºn las instrucciones disponibles.

------------------------------------------------------------
Happy Coding y Â¡Ã©xito en el anÃ¡lisis de la Voz del Cliente!

------------------------------------------------------------
## Diagrama Final
```mermaid
graph LR
App[app]-->Deps[dependencies]
```

Esta documentaciÃ³n tÃ©cnica y la guÃ­a de usuario han sido diseÃ±adas para proporcionar una visiÃ³n integral del sistema VoC Analyst, facilitando tanto su uso como su extensiÃ³n y mantenimiento.


## Diagrama
```mermaid
graph LR\nApp["app"]-->Deps["dependencies"]\n
```
