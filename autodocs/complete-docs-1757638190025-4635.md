# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

Bienvenido a esta guÃ­a diseÃ±ada para ayudarte a sacar el mÃ¡ximo provecho de nuestra herramienta de anÃ¡lisis y procesamiento de informaciÃ³n. AquÃ­ encontrarÃ¡s informaciÃ³n amigable y pasos claros para comenzar a trabajar con la aplicaciÃ³n.

---

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?

- **PropÃ³sito principal**:  
  Esta aplicaciÃ³n facilita el anÃ¡lisis y procesamiento de informaciÃ³n a travÃ©s de una interfaz web interactiva. Permite cargar archivos PDF, analizarlos usando modelos de lenguaje basados en inteligencia artificial y extraer insights de conversaciones, sentimientos, emociones y la Voz del Cliente (VoC).  

- **Problema que resuelve**:  
  Ayuda a empresas y profesionales que necesitan procesar grandes volÃºmenes de informaciÃ³n textual de manera rÃ¡pida y precisa, extrayendo datos relevantes para la toma de decisiones, sin la necesidad de conocimientos tÃ©cnicos avanzados.

- **Beneficios clave**:  
  â€¢ ObtÃ©n resÃºmenes y anÃ¡lisis profundos de documentos PDF y conversaciones.  
  â€¢ Detecta sentimientos y emociones presentes en los textos.  
  â€¢ Analiza la Voz del Cliente para comprender mejor las necesidades y opiniones de tus usuarios.  
  â€¢ Interfaz intuitiva que hace todo el proceso sencillo y accesible.

- **Audiencia objetivo**:  
  Profesionales, equipos de atenciÃ³n al cliente, analistas de datos y empresas que requieran profundizar en el contenido de documentos y conversaciones para optimizar estrategias y mejorar la experiencia del usuario.

---

## âœ¨ Funcionalidades Principales

### Interfaz Web Interactiva (Streamlit)
- **Â¿QuÃ© hace?**:  
  Proporciona una experiencia visual e interactiva para navegar por todas las funciones de la aplicaciÃ³n de forma sencilla y accesible.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cada vez que necesites analizar documentos o revisar resultados de anÃ¡lisis, esta interfaz serÃ¡ tu punto de acceso principal para interactuar con la herramienta.

- **Â¿CÃ³mo acceder?**:  
  1. Abre tu navegador web.  
  2. Ingresa la URL proporcionada para la aplicaciÃ³n.  
  3. InteractÃºa con los menÃºs y secciones disponibles.
  
- **Resultado esperado**:  
  Una pantalla limpia y organizada con botones y opciones que te permiten cargar archivos, elegir anÃ¡lisis y visualizar resultados de manera inmediata.

---

### Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**:  
  Permite cargar archivos PDF y extraer el contenido textual necesario para el anÃ¡lisis posterior.
  
- **Â¿CuÃ¡ndo usarla?**:  
  UtilÃ­zala cuando dispongas de documentos en formato PDF que necesites analizar o extraer informaciÃ³n relevante.
  
- **Â¿CÃ³mo acceder?**:  
  1. Dentro de la interfaz principal, selecciona la opciÃ³n â€œCargar PDFâ€.  
  2. Elige el archivo PDF desde tu dispositivo.  
  3. Confirma la carga para iniciar su procesamiento.
  
- **Resultado esperado**:  
  VisualizaciÃ³n del contenido del PDF en la aplicaciÃ³n, listo para ser analizado o convertido en insights.

---

### AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**:  
  Emplea inteligencia artificial para analizar y extraer patrones, temas y respuestas significativas del contenido textual.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando desees obtener un entendimiento mÃ¡s profundo del contenido, identificar temas recurrentes o resumir grandes volÃºmenes de texto.
  
- **Â¿CÃ³mo acceder?**:  
  1. Luego de cargar un documento PDF o texto, selecciona la opciÃ³n â€œAnÃ¡lisis IAâ€.  
  2. Configura los parÃ¡metros del anÃ¡lisis si lo deseas.  
  3. Inicia el anÃ¡lisis y espera a que se muestren los resultados.
  
- **Resultado esperado**:  
  Un informe resumido con insights, temas detectados y patrones relevantes extraÃ­dos del texto analizado.

---

### AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**:  
  Examina registros de conversaciones (chat, correos, foros) para identificar interacciones, temas y patrones en la comunicaciÃ³n.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Al analizar diÃ¡logos o comunicaciones de equipos y clientes para comprender mejor el flujo de comunicaciÃ³n y detectar Ã¡reas de mejora.
  
- **Â¿CÃ³mo acceder?**:  
  1. Selecciona â€œAnÃ¡lisis de Conversacionesâ€ en la interfaz.  
  2. Carga o introduce el contenido de la conversaciÃ³n.  
  3. Ejecuta el anÃ¡lisis y revisa los insights.
  
- **Resultado esperado**:  
  VisualizaciÃ³n de los componentes clave de la conversaciÃ³n, destacando temas y patrones de comunicaciÃ³n.

---

### AnÃ¡lisis de Sentimientos y Emociones
- **Â¿QuÃ© hace?**:  
  EvalÃºa el contenido textual para determinar el tono emocional y los sentimientos expresados (positivo, negativo, neutral).
  
- **Â¿CuÃ¡ndo usarla?**:  
  Es Ãºtil cuando necesitas entender la reacciÃ³n emocional de los usuarios, clientes o del pÃºblico objetivo a un tema o producto.
  
- **Â¿CÃ³mo acceder?**:  
  1. Tras cargar un texto o conversaciÃ³n, selecciona la opciÃ³n â€œAnÃ¡lisis de Sentimientosâ€.  
  2. Configura el anÃ¡lisis si es necesario.  
  3. Inicia el proceso y revisa los resultados.
  
- **Resultado esperado**:  
  Un reporte grÃ¡fico y resumido que muestra la distribuciÃ³n de sentimientos y emociones a lo largo del documento o conversaciÃ³n analizada.

---

### AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**:  
  Extrae y analiza las opiniones y comentarios de los clientes para ofrecer una visiÃ³n clara de las percepciones y necesidades del pÃºblico.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites conocer en detalle quÃ© opinan tus clientes de tus productos/servicios, y detectar Ã¡reas de mejora o tendencias en el feedback.
  
- **Â¿CÃ³mo acceder?**:  
  1. DirÃ­gete a la secciÃ³n â€œVoz del Clienteâ€ en la interfaz.  
  2. Carga los datos de feedback o conecta la fuente de comentarios.  
  3. Ejecuta el anÃ¡lisis y revisa los insights.
  
- **Resultado esperado**:  
  Un informe que resalta los comentarios mÃ¡s recurrentes, puntos de dolor y aspectos positivos valorados por los clientes.

---

## ğŸš€ CÃ³mo Empezar

### Primer Uso
1. **Requisitos previos**:  
   - ConexiÃ³n estable a internet.  
   - Navegador web actualizado.  
   - Documentos PDF o textos listos para analizar (si ya tienes datos a la mano).

2. **Acceso inicial**:  
   - Ingresa a la URL de la aplicaciÃ³n en tu navegador.  
   - Si es necesario, crea una cuenta o inicia sesiÃ³n.

3. **ConfiguraciÃ³n bÃ¡sica**:  
   - FamiliarÃ­zate con el menÃº principal y las opciones de carga de documentos.  
   - Configura los parÃ¡metros de anÃ¡lisis (opcional) segÃºn tu preferencia.

4. **Primera tarea recomendada**:  
   - Carga un archivo PDF y prueba el â€œAnÃ¡lisis IAâ€ para ver cÃ³mo se transforma el contenido en insights Ãºtiles.

---

### Flujo TÃ­pico de Uso
1. **Paso 1**:  
   Ingresa a la interfaz web y selecciona la opciÃ³n para cargar un PDF o texto.

2. **Paso 2**:  
   Una vez cargado el contenido, elige el tipo de anÃ¡lisis que deseas (IA, conversaciones, sentimientos o VoC).

3. **Paso 3**:  
   Revisa el informe generado en pantalla, que incluirÃ¡ resÃºmenes, grÃ¡ficos y puntos destacados del anÃ¡lisis realizado.

---

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: AnÃ¡lisis de Reportes de Clientes
**SituaciÃ³n**: Necesitas identificar Ã¡reas de mejora y aspectos destacados en el feedback recibido de los clientes.  
**Pasos**: 
1. Carga los documentos PDF o registros de conversaciones con clientes.  
2. Selecciona "AnÃ¡lisis de Voz del Cliente" y "AnÃ¡lisis de Sentimientos".  
3. Revisa el informe para detectar opiniones recurrentes y emociones predominantes.

### Escenario 2: EvaluaciÃ³n de Comunicaciones Internas
**SituaciÃ³n**: Quieres mejorar la comunicaciÃ³n dentro de tu equipo.  
**Pasos**: 
1. Ingresa a la opciÃ³n "AnÃ¡lisis de Conversaciones".  
2. Sube el registro de chats o correos internos.  
3. Identifica patrones y temas comunes para tomar medidas de mejora.

### Escenario 3: Resumen AutomÃ¡tico de Documentos
**SituaciÃ³n**: Tienes varios reportes y documentos largos y necesitas un resumen rÃ¡pido.  
**Pasos**: 
1. Carga cada documento PDF en la secciÃ³n correspondiente.  
2. Selecciona "AnÃ¡lisis IA" para que el sistema resuma la informaciÃ³n.  
3. Utiliza el resumen generado para reuniones o informes ejecutivos.

---

## â“ Preguntas Frecuentes

**P: Â¿CÃ³mo puedo cargar un archivo PDF para su anÃ¡lisis?**  
R: Desde el menÃº principal, selecciona "Cargar PDF", busca el archivo en tu dispositivo y confirma la carga. El contenido se mostrarÃ¡ en pantalla listo para ser analizado.

**P: Â¿QuÃ© hago si el anÃ¡lisis no muestra resultados?**  
R: Verifica que el documento haya sido cargado correctamente. Si el problema persiste:
   1. Revisa tu conexiÃ³n a internet.
   2. Intenta recargar la pÃ¡gina.
   3. Consulta la secciÃ³n de soluciÃ³n de problemas.

**P: Â¿Es seguro subir mis documentos a la plataforma?**  
R: SÃ­. La aplicaciÃ³n utiliza protocolos de seguridad y encriptaciÃ³n para proteger tus datos y garantizar la confidencialidad de la informaciÃ³n.

**P: Â¿CuÃ¡les son las limitaciones principales?**  
R:  
- No se recomienda cargar documentos en formatos distintos a PDF para el procesamiento.  
- Los anÃ¡lisis son tan precisos como la calidad del contenido proporcionado; textos con errores o poco claros pueden afectar los resultados.  
- No sustituye el anÃ¡lisis humano en casos complejos que requieran interpretaciÃ³n contextual profunda.

---

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: El PDF no se carga
**SÃ­ntomas**:  
- La aplicaciÃ³n muestra un mensaje de error o no reconoce el archivo.

**Causa probable**:  
- El archivo puede estar corrupto o en un formato incompatible.

**SoluciÃ³n**:  
1. Verifica que el archivo estÃ© en formato PDF y que no estÃ© daÃ±ado.  
2. Intenta cargar otro documento para descartar problemas especÃ­ficos del archivo.

---

### Problema: Los resultados del anÃ¡lisis son lentos o incompletos
**SÃ­ntomas**:  
- El proceso de anÃ¡lisis se interrumpe o dura mÃ¡s de lo esperado.

**Causa probable**:  
- ConexiÃ³n a internet inestable o archivos demasiado extensos.

**SoluciÃ³n**:  
1. AsegÃºrate de tener una conexiÃ³n estable.  
2. Intenta dividir documentos muy extensos en partes mÃ¡s pequeÃ±as y analiza cada tramo por separado.

---

### Problema: La interfaz no responde a los comandos
**SÃ­ntomas**:  
- Los botones o enlaces no funcionan correctamente.

**Causa probable**:  
- Error temporal en la aplicaciÃ³n o en el navegador.

**SoluciÃ³n**:  
1. Refresca la pÃ¡gina o reinicia el navegador.  
2. Si el problema persiste, cierra sesiÃ³n y vuelve a iniciar.  
3. Consulta la secciÃ³n de soporte para reportar el error.

---

## ğŸ“ Soporte y Contacto

- **Â¿Necesitas ayuda adicional?**  
  Puedes comunicarte con nuestro equipo de soporte enviando un correo a soporte@tuaplicacion.com o utilizando el chat en lÃ­nea disponible en la plataforma.

- **Â¿Encontraste un error?**  
  Reporta cualquier anomalÃ­a a travÃ©s del formulario â€œReportar un Errorâ€ disponible en el menÃº de ayuda de la aplicaciÃ³n.

- **Â¿Tienes sugerencias?**  
  Tu feedback es importante para nosotros. EnvÃ­a tus sugerencias a feedback@tuaplicacion.com.

---

Gracias por confiar en nuestra herramienta para optimizar el anÃ¡lisis y procesamiento de informaciÃ³n. Â¡Esperamos que esta guÃ­a te sea Ãºtil y disfrutes de la experiencia de usuario!

## DocumentaciÃ³n TÃ©cnica
A continuaciÃ³n se presenta la documentaciÃ³n tÃ©cnica completa en Markdown para el repositorio VoC Analyst. Esta guÃ­a estÃ¡ orientada tanto a desarrolladores que deseen comprender, mantener y extender el sistema como a quienes necesiten conocer en detalle la arquitectura, los componentes y las buenas prÃ¡cticas de desarrollo.

------------------------------------------------------------

# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n describe la arquitectura, el stack tecnolÃ³gico, los componentes principales, las APIs internas, el modelo de datos, la guÃ­a de desarrollo y los puntos de atenciÃ³n del sistema VoC Analyst.

------------------------------------------------------------

## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n ArquitectÃ³nico Utilizado:**  
  Se emplea un enfoque monolÃ­tico modular. La interfaz de usuario (Frontend) se implementa en Streamlit y se integra directamente con la lÃ³gica de negocio (Backend). Se ha obtenido una separaciÃ³n clara entre:
  - **Capa de PresentaciÃ³n:** Gestionada por Streamlit, la cual permite la carga de archivos, visualizaciÃ³n interactiva y manejo del estado de la sesiÃ³n.
  - **Capa de Procesamiento y AnÃ¡lisis:** Incluye mÃ³dulos encargados de la extracciÃ³n de texto desde archivos PDF, el procesamiento de conversaciones (normalizaciÃ³n, particiÃ³n en turnos y redacciÃ³n de informaciÃ³n sensible) y la integraciÃ³n con proveedores de Modelos de Lenguaje (LLM).

- **Diagrama de Componentes (Mermaid):**

  ```mermaid
  graph LR
      A[Interfaz Streamlit] --> B[Procesamiento & ValidaciÃ³n de Archivos]
      A --> C[GestiÃ³n de Estado (st.session_state)]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[Parser de Conversaciones y RedacciÃ³n de PII]
      A --> F[LLMBackend]
      F --> G[Proveedores LLM (OpenAI, Anthropic, Gemini)]
  ```

- **Flujo de Datos Principal:**  
  1. El usuario carga uno o mÃ¡s archivos PDF (u otros formatos de texto) a travÃ©s de la interfaz web en Streamlit.  
  2. Se ejecuta la validaciÃ³n (por ejemplo, verificaciÃ³n del tamaÃ±o del archivo con `validate_file_size`) y se extrae el contenido textual (usando `extract_text_from_pdf` con PyPDF2).  
  3. El texto extraÃ­do es procesado mediante funciones de parsing que normalizan la conversaciÃ³n, segmentan los mensajes y redactan la informaciÃ³n sensible (PII).  
  4. La capa de negocio utiliza el mÃ³dulo LLMBackend para enviar el contenido a los proveedores configurados (usando la clase ModelConfig y mÃ©todos como `analyze_text`) y obtener insights, resÃºmenes y anÃ¡lisis de sentimientos.  
  5. Los resultados se almacenan en el estado de sesiÃ³n (`st.session_state`) y se presentan de manera interactiva en la interfaz (con visualizaciones, tablas y mensajes).

- **Dependencias CrÃ­ticas:**  
  - **Streamlit:** Facilita la creaciÃ³n de la interfaz web interactiva y la gestiÃ³n del estado en tiempo real.  
  - **PyPDF2:** Utilizada para la extracciÃ³n de texto de archivos PDF.  
  - **Pandas:** Ayuda en el manejo de datos y generaciÃ³n de DataFrames para la visualizaciÃ³n.  
  - **LLM SDKs (openai, anthropic, google-genai):** Permiten la integraciÃ³n con distintos proveedores de Modelos de Lenguaje para el anÃ¡lisis de conversaciones y extracciÃ³n de insights.

------------------------------------------------------------

## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  Principalmente Python (clasificado como "other" en el repositorio), utilizado para el backend, procesamiento de archivos y scripts de la aplicaciÃ³n.

- **Frameworks / LibrerÃ­as:**  
  - **Streamlit:** Para la creaciÃ³n de la interfaz web interactiva.  
  - **PyPDF2:** (>=3.0.1) Para extraer el contenido textual de documentos PDF.  
  - **Pandas:** (>=2.3.2) Para manipulaciÃ³n y visualizaciÃ³n de datos.  
  - **LLM SDKs:**  
    - `openai` â€“ Para integrar modelos de OpenAI.  
    - `anthropic` â€“ Para la integraciÃ³n con los servicios de Anthropic.  
    - `google-genai` â€“ Para conectar con Google Gemini u otros modelos de Google.

- **Base de Datos:**  
  No se utiliza una base de datos tradicional; el procesamiento se realiza en memoria y el almacenamiento se gestiona de forma transitoria a travÃ©s de `st.session_state`.

- **APIs Externas:**  
  Se realiza la integraciÃ³n con APIs de proveedores de Modelos de Lenguaje (LLM), tales como OpenAI, Anthropic y Google GenAI, para el anÃ¡lisis semÃ¡ntico y la generaciÃ³n de insights.

- **Infraestructura:**  
  La aplicaciÃ³n se puede ejecutar en entornos locales, servidores o contenedores Docker. Se despliega como una aplicaciÃ³n web simple mediante Streamlit.

------------------------------------------------------------

## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Gestionar la interfaz de usuario, la carga de archivos y la presentaciÃ³n de resultados. Se encarga tambiÃ©n de la inicializaciÃ³n del estado de la sesiÃ³n para almacenar resultados, identificadores de ejecuciÃ³n y datos subidos.

- **UbicaciÃ³n:**  
  Generalmente en el archivo de entrada (por ejemplo, `app.py`) y mÃ³dulos auxiliarmente ubicados en el directorio `app/`.

- **Interfaces / MÃ©todos Expuestos:**
  - **ConfiguraciÃ³n de la PÃ¡gina:** Uso de `st.set_page_config` para definir tÃ­tulo, Ã­cono, layout y estado inicial del sidebar.
  - **GestiÃ³n del Estado:** Uso de `st.session_state` para almacenar variables como:
    - `analysis_results` (resultados del anÃ¡lisis).
    - `run_id` (identificador Ãºnico de la ejecuciÃ³n).
    - `uploaded_files_data` (datos y metadatos de archivos subidos).
    - `processing_complete` (indicador del estado del proceso).
  - **Funciones Auxiliares:**  
    - `extract_text_from_pdf(pdf_file) â†’ str`  
      Extrae el contenido textual de un archivo PDF utilizando PyPDF2.
    - `validate_file_size(file) â†’ bool`  
      Verifica que el archivo no exceda el tamaÃ±o mÃ¡ximo permitido (100 MB).

- **Dependencias Internas:**  
  Requiere Streamlit, PyPDF2, Pandas y otras librerÃ­as bÃ¡sicas de Python (os, time, uuid, etc.).

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  Encapsular la lÃ³gica de integraciÃ³n con proveedores de modelos de lenguaje. Este mÃ³dulo se encarga de:
  - Inicializar la conexiÃ³n con el proveedor configurado.
  - Cargar prompts especÃ­ficos para parseo y generaciÃ³n de anÃ¡lisis.
  - Gestionar la comunicaciÃ³n con el servicio LLM y manejar reintentos en caso de fallo.

- **UbicaciÃ³n:**  
  Se encuentra en el archivo `llm_backend.py`.

- **Interfaces / MÃ©todos Expuestos:**
  - **ModelConfig:**  
    Clase que define parÃ¡metros como:
    - `provider`: Tipo de proveedor (por ejemplo, "openai", "anthropic" o "gemini").
    - `model`: Nombre o versiÃ³n del modelo.
    - `api_key`: Clave de autenticaciÃ³n.
    - `max_retries` y `retry_delay`: ParÃ¡metros para la gestiÃ³n de reintentos.
  - **LLMBackend:**  
    MÃ©todos clave:
    - `__init__(config: ModelConfig)`: Inicializa la instancia con la configuraciÃ³n dada.
    - `_initialize_client()`: Selecciona e instancia el cliente adecuado segÃºn el proveedor.
    - `_load_parse_prompt()` y `_load_analyze_prompt()`: Cargan los textos de prompt para parseo y anÃ¡lisis.
    - `analyze_text(text: str) â†’ Dict[str, Any]`: EnvÃ­a el texto a analizar y recibe la respuesta con insights y anÃ¡lisis.

- **Dependencias Externas:**  
  Utiliza las librerÃ­as especÃ­ficas de cada proveedor (openai, anthropic, google-genai).

---

### 3. Parser de Conversaciones y AnÃ¡lisis

- **PropÃ³sito:**  
  Procesar y estructurar las conversaciones extraÃ­das de archivos PDF o entradas de usuario. Entre sus responsabilidades se encuentran:
  - **NormalizaciÃ³n y EstructuraciÃ³n:** Convertir el texto crudo en un JSON estructurado con campos como `conversation_id`, `messages`, `sender`, `timestamp` y `metadata`.
  - **RedacciÃ³n de PII:** Buscar y reemplazar informaciÃ³n sensible (como correos, nÃºmeros telefÃ³nicos, tarjetas, etc.) por etiquetas estÃ¡ndar (por ejemplo, â€œ[EMAIL]â€, â€œ[PHONE]â€).
  - **DetecciÃ³n de Metadatos:** Extraer informaciÃ³n adicional como el idioma, ID de la conversaciÃ³n, duraciÃ³n, canal de comunicaciÃ³n, etc.

- **Requisitos de AnÃ¡lisis:**  
  - Procesar Ãºnicamente un archivo que contenga una Ãºnica conversaciÃ³n.
  - Generar identificadores y clasificaciones (por ejemplo, detecciÃ³n de sentimiento, emociones y temas destacados).

- **ImplementaciÃ³n:**  
  Este mÃ³dulo puede estar distribuido en funciones independientes (por ejemplo, en `parser.py` o funciones integradas en `app.py`) que se invocan tras la extracciÃ³n del texto.

------------------------------------------------------------

## ğŸš€ APIs y Endpoints

**Nota:**  
Aunque la aplicaciÃ³n no expone endpoints REST pÃºblicos, se han implementado â€œAPIs internasâ€ â€“ funciones y mÃ©todos que orquestan el flujo de procesamiento:

- **FunciÃ³n:** `extract_text_from_pdf(pdf_file) â†’ str`  
  Extrae texto de un PDF utilizando PyPDF2, con manejo de excepciones mediante `st.error`.

- **FunciÃ³n:** `validate_file_size(file) â†’ bool`  
  Verifica que el archivo subido no exceda el lÃ­mite de 100 MB.

- **MÃ©todo:** `LLMBackend.analyze_text(text: str) â†’ Dict[str, Any]`  
  EnvÃ­a la cadena de texto a analizar (combinado con prompt de anÃ¡lisis) y retorna un diccionario con los resultados e insights.

- **Parser de Conversaciones:**  
  Funciones que transforman la conversaciÃ³n en un formato normalizado (JSON) con redacciÃ³n de PII y extracciÃ³n de metadatos relevantes.

------------------------------------------------------------

## ğŸ’¾ Modelo de Datos

- **Entidades Principales:**
  - **ConversaciÃ³n:**  
    Representada internamente como un JSON que incluye:
    - `conversation_id`: Identificador Ãºnico.
    - `messages`: Lista de mensajes, donde cada mensaje contiene:
      - `sender`: Rol del emisor (cliente, agente, desconocido).
      - `timestamp`: Marca de tiempo (si se detecta).
      - `content`: Texto del mensaje, ya procesado y con PII redactada.
      - `metadata`: InformaciÃ³n adicional (por ejemplo, canal, duraciÃ³n, etc.).

- **Transformaciones de Datos y Validaciones:**  
  - ValidaciÃ³n de que el texto extraÃ­do no estÃ© vacÃ­o.
  - RedacciÃ³n de PII utilizando expresiones regulares.
  - SegmentaciÃ³n de la conversaciÃ³n en turnos y asignaciÃ³n de roles y metadatos.

------------------------------------------------------------

## ğŸ› ï¸ GuÃ­a de Desarrollo

### ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**
   - Python 3.8 o superior.
   - ConexiÃ³n a Internet (para llamadas a APIs de proveedores LLM, si se utiliza en producciÃ³n).

2. **InstalaciÃ³n:**
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/VoC-Analyst.git
     cd VoC-Analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv venv
     source venv/bin/activate    # En Linux/Mac
     venv\Scripts\activate       # En Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de Entorno:**
   - Configurar las API keys necesarias para cada proveedor LLM mediante variables de entorno (por ejemplo, `OPENAI_API_KEY`, `ANTHROPIC_API_KEY`, `GEMINI_API_KEY`).

---

### Estructura del CÃ³digo

La organizaciÃ³n del proyecto es la siguiente:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Punto de entrada de la aplicaciÃ³n (interfaz Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones para parsear y procesar conversaciones
â”‚   â””â”€â”€ utils.py              # Funciones auxiliares (extracciÃ³n de texto, validaciones, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo para integraciÃ³n y configuraciÃ³n de proveedores LLM
â”œâ”€â”€ requirements.txt          # Lista de dependencias
â””â”€â”€ README.md                 # DocumentaciÃ³n general y guÃ­a de usuario
```

---

### EstÃ¡ndares de CÃ³digo

- **Convenciones de Naming:**  
  Se utilizan nombres descriptivos en minÃºsculas con guiones bajos para funciones y nombres de archivos.  
- **Patrones Recomendados:**  
  Se utiliza un enfoque modular, separando estrictamente la lÃ³gica de interfaz (Streamlit) de la lÃ³gica de negocio (LLMBackend y Parser).  
- **Testing:**  
  Se recomienda la implementaciÃ³n de pruebas unitarias (por ejemplo, usando pytest) para:
  - Validar la extracciÃ³n de texto de archivos.
  - Probar las validaciones de tamaÃ±o de archivo y manejo de excepciones.
  - Simular peticiones al mÃ³dulo LLMBackend y verificar la respuesta de anÃ¡lisis.

---

## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**
  - La aplicaciÃ³n depende de la capacidad de extracciÃ³n de texto de los PDFs. Archivos basados en imÃ¡genes pueden requerir OCR.
  - El proceso de anÃ¡lisis a travÃ©s de LLM puede verse afectado por la calidad y formataciÃ³n del texto extraÃ­do.
  - AnÃ¡lisis en lote aÃºn se encuentra en una modalidad optimizada para procesar mÃºltiples archivos de forma secuencial (aunque se ha implementado procesamiento en lote en el backend, se debe considerar la carga de archivos muy grandes).
  
- **Consideraciones de Rendimiento:**
  - Procesar archivos muy grandes (cercanos a 100 MB) puede ralentizar la aplicaciÃ³n.  
  - Se recomienda implementar cachÃ© o procesamiento asÃ­ncrono en futuras versiones.

- **Aspectos de Seguridad:**
  - Proteger las API keys utilizando variables de entorno y otros mecanismos de seguridad.
  - Redactar adecuadamente la informaciÃ³n sensible (PII) antes de enviar datos a proveedores externos.

- **Mejoras Sugeridas (TODOs):**
  - Ampliar el soporte a otros formatos de entrada (por ejemplo, TXT).
  - Integrar OCR para PDFs basados en imÃ¡genes.
  - Desarrollar mÃ¡s controles de validaciÃ³n y manejo de errores para garantizar la robustez del sistema.

------------------------------------------------------------

## ğŸ“„ GuÃ­a de Usuario (Breve)

Aunque la presente documentaciÃ³n tÃ©cnica estÃ¡ orientada a desarrolladores, a continuaciÃ³n se detalla brevemente el flujo bÃ¡sico de uso para los usuarios finales:

1. **Acceso a la AplicaciÃ³n:**  
   Ingrese a la URL indicada y acceda a la interfaz de Streamlit.

2. **Carga de Archivos:**  
   Utilice la opciÃ³n â€œSubir Archivoâ€ para seleccionar y cargar el PDF deseado.

3. **Inicio del AnÃ¡lisis:**  
   Una vez verificados y procesados los archivos, inicie el anÃ¡lisis (â€œAnalizar con LLMâ€). Espere a que se genere el reporte.

4. **VisualizaciÃ³n y ExportaciÃ³n:**  
   Revise los resultados presentados en el panel, que incluyen los insights, mÃ©tricas de sentimiento, temas detectados y recomendaciones. Exporte los resultados si fuera necesario para informes o anÃ¡lisis adicionales.

------------------------------------------------------------

## Diagrama del Sistema

El siguiente diagrama Mermaid resume la relaciÃ³n y el flujo entre los componentes principales del sistema:

```mermaid
graph LR
    A[Interfaz Streamlit] --> B[ExtracciÃ³n y ValidaciÃ³n de Archivos]
    B --> C[Parser de Conversaciones y RedacciÃ³n de PII]
    A --> D[LLMBackend]
    D --> E[Proveedores LLM (OpenAI, Anthropic, Gemini)]
```

------------------------------------------------------------

## ConclusiÃ³n

Esta documentaciÃ³n tÃ©cnica proporciona una visiÃ³n completa de VoC Analyst: su arquitectura modular, el stack tecnolÃ³gico, los componentes clave (Interfaz, LLMBackend, Parser de Conversaciones) y la guÃ­a de desarrollo necesaria para realizar modificaciones o extensiones en el sistema. Se recomienda mantener actualizada la documentaciÃ³n conforme se realicen cambios y mejoras en el proyecto.

Â¡Feliz desarrollo y que disfrutes de una experiencia poderosa en el anÃ¡lisis de la Voz del Cliente!

------------------------------------------------------------

## Diagrama
```mermaid
graph LR
App[app] --> Deps[dependencies]
```


## Diagrama
```mermaid
graph LR\nApp[app]-->Deps[dependencies]\n
```
