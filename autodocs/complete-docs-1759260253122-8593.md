# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?
- **PropÃ³sito principal**: Es una herramienta diseÃ±ada para facilitar el anÃ¡lisis y procesamiento de informaciÃ³n. Permite extraer contenido de archivos PDF, analizar conversaciones y evaluar la Voz del Cliente mediante modelos de lenguaje basados en inteligencia artificial, todo a travÃ©s de una interfaz web interactiva.
- **Problema que resuelve**: Elimina la necesidad de procesos manuales y tediosos para extraer y analizar datos, ayudÃ¡ndote a obtener insights prÃ¡cticos y relevantes de documentos y conversaciones de forma rÃ¡pida y precisa.
- **Beneficios clave**: 
  - Ahorro de tiempo al automatizar el procesamiento de informaciÃ³n.
  - IdentificaciÃ³n de patrones y tendencias en documentos y conversaciones.
  - Mejora en la toma de decisiones a partir de insights claros y estructurados.
  - Interfaz intuitiva y fÃ¡cil de usar para cualquier usuario.
- **Audiencia objetivo**: Analistas de datos, equipos de atenciÃ³n al cliente, gestores de calidad, y cualquier profesional que necesite procesar y extraer informaciÃ³n valiosa de documentos y conversaciones.

## âœ¨ Funcionalidades Principales

### Interfaz Web Interactiva con Streamlit
- **Â¿QuÃ© hace?**: Proporciona una pÃ¡gina web amigable y fÃ¡cil de navegar que integra todas las funciones de la aplicaciÃ³n.
- **Â¿CuÃ¡ndo usarla?**: Al iniciar la aplicaciÃ³n y durante todo el proceso de anÃ¡lisis, ya que es el punto de acceso para todas las funcionalidades.
- **Â¿CÃ³mo acceder?**: Abre tu navegador web y entra en la URL proporcionada por tu administrador o mediante el comando de inicio que abre la interfaz.
- **Resultado esperado**: VisualizaciÃ³n de un menÃº principal con opciones claras para cargar archivos, iniciar anÃ¡lisis y ver reportes.

### Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**: Permite cargar documentos en formato PDF y extraer el texto y los datos contenidos en ellos.
- **Â¿CuÃ¡ndo usarla?**: Cuando dispongas de reportes, manuales o cualquier documento en PDF que necesites analizar.
- **Â¿CÃ³mo acceder?**: Desde el menÃº principal, selecciona la opciÃ³n â€œCargar PDFâ€ y sigue las instrucciones para subir el archivo.
- **Resultado esperado**: El contenido del PDF se extrae y se muestra en pantalla, listo para proceder con el anÃ¡lisis.

### AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**: Utiliza inteligencia artificial para interpretar el contenido extraÃ­do de los documentos, identificando temas, patrones y ofreciendo insights.
- **Â¿CuÃ¡ndo usarla?**: Cuando hayas cargado un documento o conversaciÃ³n y necesites analizar su contenido a fondo.
- **Â¿CÃ³mo acceder?**: DespuÃ©s de cargar el documento, elige la opciÃ³n â€œAnalizar con IAâ€ en el menÃº para ejecutar el proceso.
- **Resultado esperado**: Se generarÃ¡ un informe visual que resalta los principales temas, patrones y sugerencias obtenidos del anÃ¡lisis.

### AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**: Examina transcripciones de diÃ¡logos o registros de conversaciones para identificar tendencias, preguntas frecuentes y puntos crÃ­ticos.
- **Â¿CuÃ¡ndo usarla?**: Cuando tengas registros de atenciÃ³n al cliente, reuniones o cualquier tipo de conversaciÃ³n que requiera un desglose analÃ­tico.
- **Â¿CÃ³mo acceder?**: En la interfaz web, selecciona â€œAnÃ¡lisis de Conversacionesâ€ y carga el archivo o ingresa la transcripciÃ³n.
- **Resultado esperado**: Se mostrarÃ¡ un resumen visual en forma de grÃ¡ficos o tablas, destacando las tendencias y los aspectos mÃ¡s relevantes de las conversaciones.

### AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**: EvalÃºa la retroalimentaciÃ³n de los clientes, identificando emociones, niveles de satisfacciÃ³n y Ã¡reas de mejora.
- **Â¿CuÃ¡ndo usarla?**: Cuando desees analizar opiniones, comentarios o encuestas para comprender mejor la percepciÃ³n de tu marca o servicio.
- **Â¿CÃ³mo acceder?**: Usa la opciÃ³n â€œVoz del Clienteâ€ desde el menÃº principal para cargar los datos o utilizar la informaciÃ³n preprocesada.
- **Resultado esperado**: Se mostrarÃ¡ un dashboard con mÃ©tricas de satisfacciÃ³n, grÃ¡ficos de emociones y recomendaciones prÃ¡cticas basadas en la retroalimentaciÃ³n.

## ğŸš€ CÃ³mo Empezar

### Primer Uso
1. **Requisitos previos**: 
   - ConexiÃ³n a internet.
   - Acceso a un navegador web moderno.
   - Credenciales de usuario (si la aplicaciÃ³n requiere autenticaciÃ³n).
2. **Acceso inicial**: 
   - Ingresa a la URL de la aplicaciÃ³n en tu navegador.
   - RegÃ­strate o inicia sesiÃ³n con tus credenciales.
3. **ConfiguraciÃ³n bÃ¡sica**: 
   - Selecciona tu idioma y ajusta las preferencias iniciales en el menÃº de configuraciÃ³n.
4. **Primera tarea recomendada**: 
   - Sube un documento PDF y realiza un anÃ¡lisis preliminar para familiarizarte con las funcionalidades de extracciÃ³n y anÃ¡lisis.

### Flujo TÃ­pico de Uso
1. **Paso 1**: Inicia sesiÃ³n y explora el menÃº principal.
2. **Paso 2**: Carga el documento PDF o la transcripciÃ³n de conversaciÃ³n que deseas analizar.
3. **Paso 3**: Selecciona la opciÃ³n de anÃ¡lisis correspondiente (IA, Conversaciones, o Voz del Cliente).
4. **Paso 4**: Revisa el informe o dashboard generado y utiliza los insights para tus decisiones.

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: AnÃ¡lisis de Reportes de Ventas
**SituaciÃ³n**: Necesitas obtener insights y tendencias de los reportes mensuales en PDF.  
**Pasos**: 
1. Sube el reporte en PDF usando la opciÃ³n â€œProcesamiento de Archivos PDFâ€.
2. Ejecuta el anÃ¡lisis con IA para identificar tendencias de ventas.
3. Revisa el informe generado y ajusta tu estrategia en base a los insights.

### Escenario 2: EvaluaciÃ³n del Servicio de AtenciÃ³n al Cliente
**SituaciÃ³n**: Deseas evaluar la calidad de las interacciones de tu equipo de atenciÃ³n al cliente.  
**Pasos**: 
1. Carga las transcripciones de conversaciones desde la opciÃ³n â€œAnÃ¡lisis de Conversacionesâ€.
2. Ejecuta el anÃ¡lisis para identificar preguntas frecuentes y puntos de mejora.
3. Implementa acciones basadas en el informe para optimizar la atenciÃ³n al cliente.

### Escenario 3: MonitorizaciÃ³n de la Voz del Cliente (VoC)
**SituaciÃ³n**: Quieres conocer la percepciÃ³n que tienen los clientes sobre tu marca o producto.  
**Pasos**: 
1. Accede a la secciÃ³n â€œVoz del Clienteâ€ y carga las opiniones y comentarios.
2. Selecciona las mÃ©tricas de anÃ¡lisis y espera el dashboard.
3. Utiliza los datos del dashboard para identificar Ã¡reas de mejora en tu producto o servicio.

## â“ Preguntas Frecuentes

P: Â¿CÃ³mo inicio sesiÃ³n en la aplicaciÃ³n?  
R: Ingresa a la URL de la aplicaciÃ³n e introduce tu usuario y contraseÃ±a. Si es la primera vez, selecciona â€œRegistrarseâ€ y sigue las instrucciones.

P: Â¿QuÃ© hago si el PDF no se procesa correctamente?  
R: AsegÃºrate de que el archivo estÃ© en formato PDF y no estÃ© corrupto. Si el problema persiste, intenta cargar otro archivo o contacta al soporte.

P: Â¿Es seguro usar la funcionalidad de anÃ¡lisis con IA?  
R: SÃ­, la aplicaciÃ³n procesa tus datos de forma segura y confidencial, aplicando estrictas medidas de seguridad para proteger tu informaciÃ³n.

P: Â¿CuÃ¡les son las limitaciones principales de la aplicaciÃ³n?  
R: Actualmente, la aplicaciÃ³n solo soporta archivos PDF y transcripciones en formatos compatibles. No se admiten otros tipos de documentos o archivos de audio.

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: La aplicaciÃ³n no carga en el navegador
- **SÃ­ntomas**: La pÃ¡gina web aparece en blanco o se muestran mensajes de error.
- **Causa probable**: Problemas de conexiÃ³n a internet o incompatibilidad con el navegador.
- **SoluciÃ³n**: 
  1. Verifica tu conexiÃ³n a internet.
  2. Refresca la pÃ¡gina.
  3. Prueba usar otro navegador.
  4. Si el problema continÃºa, contacta al soporte.

### Problema: Error al procesar un archivo PDF
- **SÃ­ntomas**: Se muestra un mensaje de error al subir el archivo.
- **Causa probable**: El archivo puede estar daÃ±ado o no es un PDF vÃ¡lido.
- **SoluciÃ³n**: 
  1. AsegÃºrate de que el PDF estÃ© intacto.
  2. Verifica que el archivo sea del tipo adecuado.
  3. Vuelve a intentar subir el archivo.
  4. Si el error persiste, contacta al soporte.

### Problema: Resultados de anÃ¡lisis incompletos
- **SÃ­ntomas**: El informe generado muestra datos faltantes o inconsistentes.
- **Causa probable**: El documento cargado puede no contener suficiente informaciÃ³n o haber problemas en la extracciÃ³n.
- **SoluciÃ³n**: 
  1. Revisa el contenido del documento para confirmar su integridad.
  2. Vuelve a cargar el archivo.
  3. Si el problema sigue, contacta al soporte para asistencia adicional.

## ğŸ“ Soporte y Contacto
- **Â¿Necesitas ayuda adicional?**  
  Contacta al soporte escribiendo a: soporte@tuempresa.com
- **Â¿Encontraste un error?**  
  Reporta el inconveniente mediante la secciÃ³n â€œReportar Errorâ€ en la aplicaciÃ³n.
- **Â¿Tienes sugerencias?**  
  EnvÃ­a tus comentarios y sugerencias a: feedback@tuempresa.com

---

## DocumentaciÃ³n TÃ©cnica
A continuaciÃ³n se muestra la documentaciÃ³n tÃ©cnica completa en Markdown, organizada segÃºn la estructura solicitada y basada en el anÃ¡lisis del repositorio, guÃ­as de usuario y muestras de cÃ³digo:

------------------------------------------------------------
# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n estÃ¡ orientada a desarrolladores y equipos tÃ©cnicos interesados en comprender, mantener y extender la aplicaciÃ³n VoC Analyst. La herramienta procesa archivos (por ejemplo, documentos PDF) y analiza la Voz del Cliente (VoC) mediante modelos de lenguaje (LLM). La interfaz se implementa con Streamlit y el backend integra la conexiÃ³n con mÃºltiples proveedores LLM (OpenAI, Anthropic y Google GenAI).

------------------------------------------------------------
## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n arquitectÃ³nico utilizado:**  
  La aplicaciÃ³n implementa una arquitectura modular monolÃ­tica â€œhÃ­bridaâ€ que separa la lÃ³gica de presentaciÃ³n de la lÃ³gica de negocio.  
  - **Capa de PresentaciÃ³n (Frontend):**  
    La interfaz se desarrolla completamente en Streamlit y se encarga de la carga de archivos, el manejo de la interacciÃ³n del usuario, la visualizaciÃ³n dinÃ¡mica de resultados y la gestiÃ³n del estado de la sesiÃ³n mediante `st.session_state`.
  
  - **Capa de LÃ³gica y AnÃ¡lisis (Backend):**  
    Comprende mÃ³dulos para la extracciÃ³n y validaciÃ³n de archivos (por ejemplo, usando PyPDF2 para extraer el texto de archivos PDF), el parser de conversaciones que normaliza y redacta informaciÃ³n sensible (PII), y la integraciÃ³n con proveedores de modelos de lenguaje (LLM) mediante la clase LLMBackend.

- **Diagrama de componentes:**  
  A continuaciÃ³n se presenta un diagrama Mermaid que resume la relaciÃ³n entre los principales componentes:
  
  ```mermaid
  graph LR
      A[Interfaz Streamlit (Frontend)] --> B[Procesamiento y ValidaciÃ³n de Archivos]
      A --> C[GestiÃ³n del Estado (st.session_state)]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[Parser y RedacciÃ³n de PII]
      A --> F[LLMBackend (LÃ³gica de Negocio)]
      F --> G[Proveedores LLM (OpenAI, Anthropic, Gemini)]
  ```

- **Flujo de datos principal entre componentes:**  
  1. El usuario accede a la aplicaciÃ³n mediante la interfaz web y carga archivos (por ejemplo, documentos PDF) a travÃ©s de Streamlit.  
  2. Se validan los archivos (por ejemplo, mediante la funciÃ³n `validate_file_size`) y se extrae el contenido textual usando la funciÃ³n `extract_text_from_pdf` (que utiliza PyPDF2).  
  3. El texto se envÃ­a al mÃ³dulo de parser, el cual segmenta la conversaciÃ³n en turnos, extrae metadatos y redacta informaciÃ³n sensible (PII).  
  4. La capa de negocio utiliza el mÃ³dulo LLMBackend, configurado a travÃ©s de la clase ModelConfig, para enviar prompts al proveedor LLM seleccionado y obtener insights (anÃ¡lisis de sentimientos, detecciÃ³n de temas, recomendaciones, etc.).  
  5. Los resultados se almacenan en `st.session_state` y se presentan en la interfaz mediante paneles, grÃ¡ficos y tablas.

- **Dependencias crÃ­ticas y su propÃ³sito:**  
  - **Streamlit:** Permite la construcciÃ³n de la interfaz web interactiva y la gestiÃ³n en tiempo real del estado de la sesiÃ³n.  
  - **PyPDF2:** Se utiliza para extraer el contenido textual de los documentos PDF.  
  - **Pandas:** Facilita la manipulaciÃ³n y visualizaciÃ³n de datos en forma de DataFrames, Ãºtil para mostrar resÃºmenes y KPIs.  
  - **LLM SDKs (openai, anthropic, google-genai):** Proveen la integraciÃ³n con proveedores externos para ejecutar anÃ¡lisis semÃ¡ntico y generar insights mediante modelos de lenguaje.  
  - Otras librerÃ­as estÃ¡ndar (json, os, time, datetime, uuid, zipfile, io, typing) ofrecen funcionalidades bÃ¡sicas y manejo de datos.

------------------------------------------------------------
## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  - Principalmente Python, clasificado en â€œotherâ€ en el repositorio.

- **Frameworks / LibrerÃ­as:**  
  - **Streamlit:** (>= 1.49.1) para desarrollar la interfaz web interactiva.  
  - **PyPDF2:** (>= 3.0.1) para extraer el contenido textual de documentos PDF.  
  - **Pandas:** (>= 2.3.2) para la manipulaciÃ³n y visualizaciÃ³n de datos.  
  - **LLM SDKs:**  
    - `openai` â€“ Para integrar y conectarse a la API de OpenAI.  
    - `anthropic` â€“ Para conectar con proveedores de modelos de Anthropic.  
    - `google-genai` â€“ Para integrarse con Google GenAI (Gemini).  
  - **LibrerÃ­as estÃ¡ndar:** json, os, time, datetime, uuid, zipfile, io, typing.

- **Base de Datos:**  
  No se utiliza una base de datos tradicional; el almacenamiento es transitorio y se gestiona en memoria mediante `st.session_state`.

- **APIs Externas:**  
  Se integran las APIs de proveedores de modelos LLM (OpenAI, Anthropic y Google GenAI) para realizar anÃ¡lisis semÃ¡ntico y generar insights.

- **Infraestructura:**  
  La aplicaciÃ³n se despliega como una aplicaciÃ³n web mediante Streamlit y puede ejecutarse en entornos locales, servidores o contenedores Docker.

------------------------------------------------------------
## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Gestionar la interfaz de usuario final, permitiendo la carga y validaciÃ³n de archivos, la visualizaciÃ³n interactiva de resultados y el manejo del estado de la sesiÃ³n mediante `st.session_state`.

- **UbicaciÃ³n:**  
  Principalmente en el archivo de entrada, por ejemplo, `app.py` (ubicado en la raÃ­z o en el directorio `app/`) junto con mÃ³dulos auxiliares (como `parser.py` y `utils.py`).

- **Interfaces y Funcionalidades:**  
  - **ConfiguraciÃ³n de la PÃ¡gina:**  
    Se utiliza `st.set_page_config` para definir el tÃ­tulo, el icono, el layout y la configuraciÃ³n inicial del sidebar.  
  - **GestiÃ³n del Estado:**  
    Se usan variables clave en `st.session_state` como:
    - `analysis_results`: Para almacenar los resultados obtenidos del anÃ¡lisis.
    - `run_id`: Identificador Ãºnico de cada ejecuciÃ³n del anÃ¡lisis.
    - `uploaded_files_data`: Datos y metadatos de los archivos subidos.
    - `processing_complete`: Indicador para saber cuÃ¡ndo se ha completado el procesamiento.
  - **Funciones Auxiliares de Procesamiento:**  
    - `extract_text_from_pdf(pdf_file) â†’ str`: Extrae y concatena el texto de cada pÃ¡gina del PDF utilizando PyPDF2.  
    - `validate_file_size(file) â†’ bool`: Verifica que el archivo subido no exceda el lÃ­mite preestablecido (por ejemplo, 100 MB).

- **Ejemplo de CÃ³digo:**
  ```python
  import streamlit as st
  import PyPDF2

  st.set_page_config(
      page_title="VoC Analyst - AnÃ¡lisis de Voz del Cliente con LLM",
      page_icon="ğŸ“Š",
      layout="wide",
      initial_sidebar_state="expanded"
  )

  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None
  if 'run_id' not in st.session_state:
      st.session_state.run_id = None
  if 'uploaded_files_data' not in st.session_state:
      st.session_state.uploaded_files_data = []
  if 'processing_complete' not in st.session_state:
      st.session_state.processing_complete = False

  def extract_text_from_pdf(pdf_file) -> str:
      """Extraer texto de archivo PDF"""
      try:
          pdf_reader = PyPDF2.PdfReader(pdf_file)
          text = ""
          for page in pdf_reader.pages:
              text += page.extract_text() + "\n"
          return text.strip()
      except Exception as e:
          st.error(f"Error al extraer texto de PDF: {str(e)}")
          return ""
  ```

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  Actuar como puente entre la aplicaciÃ³n y los proveedores de modelos de lenguaje (LLM) para analizar el contenido textual y generar insights automatizados, tales como anÃ¡lisis de sentimientos, detecciÃ³n de temas y recomendaciones.

- **UbicaciÃ³n:**  
  Se encuentra en el archivo `llm_backend.py` en la raÃ­z del proyecto.

- **Interfaces y Funcionalidades:**  
  - **ModelConfig:**  
    Una clase de configuraciÃ³n (por ejemplo, usando dataclasses) que define los parÃ¡metros necesarios:
    - `provider`: Nombre del proveedor (ej. "openai", "anthropic", "gemini").
    - `model`: Modelo especÃ­fico a emplear.
    - `api_key`: Clave de API para autenticaciÃ³n.
    - `max_retries` y `retry_delay`: ParÃ¡metros para la gestiÃ³n de reintentos en caso de error.
    
    ```python
    from dataclasses import dataclass

    @dataclass
    class ModelConfig:
        provider: str  # 'openai', 'anthropic', 'gemini'
        model: str
        api_key: str
        max_retries: int = 3
        retry_delay: float = 1.0
    ```
  
  - **LLMBackend:**  
    Provee mÃ©todos para:
    - Inicializar el cliente LLM adecuado mediante `_initialize_client()`.
    - Cargar los prompts para el parsing (`_load_parse_prompt()`) y el anÃ¡lisis (`_load_analyze_prompt()`).
    - Enviar el contenido a analizar a travÃ©s del mÃ©todo `analyze_text(text: str) â†’ Dict[str, Any]` y retornar un diccionario con los insights obtenidos.
    
    Ejemplo simplificado:
    ```python
    class LLMBackend:
        def __init__(self, config: ModelConfig):
            self.config = config
            self.client = self._initialize_client()
            self.parse_prompt = self._load_parse_prompt()
            self.analyze_prompt = self._load_analyze_prompt()
        
        def _initialize_client(self):
            if self.config.provider == 'openai':
                return openai.OpenAI(api_key=self.config.api_key)
            elif self.config.provider == 'anthropic':
                return anthropic.Anthropic(api_key=self.config.api_key)
            elif self.config.provider == 'gemini':
                return genai.Client(api_key=self.config.api_key)
            else:
                raise ValueError(f"Proveedor no soportado: {self.config.provider}")
        
        def analyze_text(self, text: str) -> dict:
            response = self.client.create_completion(
                engine=self.config.model,
                prompt=f"{self.analyze_prompt}\n{text}",
                max_tokens=150
            )
            return {"analysis": response}
    ```

---

### 3. ExtracciÃ³n y Procesamiento de Archivos

- **PropÃ³sito:**  
  Gestionar la carga y extracciÃ³n del contenido de archivos, especialmente documentos PDF, para convertirlos en texto procesable.  
- **Funciones Clave:**  
  - `extract_text_from_pdf(pdf_file) â†’ str`: Extraer el contenido textual de un PDF.
  - `validate_file_size(file) â†’ bool`: Verificar que el archivo no exceda un tamaÃ±o predefinido (100 MB).

---

### 4. Parser y AnÃ¡lisis de Conversaciones

- **PropÃ³sito:**  
  Procesar y normalizar el contenido textual extraÃ­do o ingresado para estructurarlo en un JSON que incluya:
  - Metadata de la conversaciÃ³n (por ejemplo, `conversation_id`, timestamps, roles de interlocutores).  
  - RedacciÃ³n (anonimizaciÃ³n) de informaciÃ³n sensible (PII) sustituyÃ©ndola por etiquetas estÃ¡ndar ([EMAIL], [PHONE], etc.).
  
- **Funcionamiento:**  
  El parser divide el texto en turnos, extrae datos relevantes y genera un objeto JSON estructurado que servirÃ¡ de entrada para el anÃ¡lisis LLM y la visualizaciÃ³n en la interfaz.

---

## ğŸš€ APIs y Endpoints

Aunque la aplicaciÃ³n no expone endpoints REST pÃºblicos, dispone de â€œAPIs internasâ€ implementadas como funciones y mÃ©todos que orquestan el flujo completo:

- **FunciÃ³n: extract_text_from_pdf(pdf_file) â†’ str**  
  Extrae el contenido textual de un archivo PDF utilizando PyPDF2 y maneja excepciones mediante try/except.
  
- **FunciÃ³n: validate_file_size(file) â†’ bool**  
  Verifica que el tamaÃ±o del archivo sea menor a 100 MB.
  
- **MÃ©todo: LLMBackend.analyze_text(text: str) â†’ Dict[str, Any]**  
  EnvÃ­a el contenido a analizar, junto con un prompt predefinido, al proveedor LLM y retorna los insights (anÃ¡lisis de sentimientos, detecciÃ³n de temas, etc.).

- **Funciones del Parser:**  
  Transforman el texto de la conversaciÃ³n en un formato estructurado (JSON) y redactan la informaciÃ³n sensible (PII).

---

## ğŸ’¾ Modelo de Datos

- **Entidades Principales:**  
  - **ConversaciÃ³n:**  
    Representada como un objeto JSON con los siguientes campos:
    - `conversation_id`: Identificador Ãºnico de la conversaciÃ³n.
    - `messages`: Lista de mensajes, donde cada mensaje contiene:
      - `sender`: Rol del emisor (cliente, agente o desconocido).
      - `timestamp`: Marca de tiempo del mensaje (si estÃ¡ disponible).
      - `content`: Texto del mensaje, con la PII ya redactada.
      - `metadata`: InformaciÃ³n adicional (por ejemplo, canal, duraciÃ³n, etc.).

- **Esquemas de Entrada y Salida:**  
  - **Entrada:** Archivos PDF o textos ingresados manualmente que contengan la transcripciÃ³n de la conversaciÃ³n.  
  - **Salida:** Objeto JSON estructurado, que contiene tanto la informaciÃ³n normalizada de la conversaciÃ³n como los insights generados.

- **Validaciones y Transformaciones:**  
  Se asegura que el contenido extraÃ­do no estÃ© vacÃ­o, se aplican reglas para redactar informaciÃ³n sensible y se estructura el resultado en un JSON homogÃ©neo.

---

## ğŸ› ï¸ GuÃ­a de Desarrollo

### 1. ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**  
   - Python 3.8 o superior.  
   - ConexiÃ³n a Internet (para acceder a las APIs de proveedores LLM en producciÃ³n).

2. **InstalaciÃ³n:**  
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/voc-analyst.git
     cd voc-analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv venv
     source venv/bin/activate    # En Linux/Mac
     venv\Scripts\activate       # En Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de Entorno:**  
   Configura las API keys para los proveedores LLM mediante variables de entorno:
   - `OPENAI_API_KEY`
   - `ANTHROPIC_API_KEY`
   - `GEMINI_API_KEY`

---

### 2. Estructura del CÃ³digo

El proyecto se organiza de la siguiente manera:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Punto de entrada de la aplicaciÃ³n (Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones de parseo y procesamiento de conversaciones
â”‚   â””â”€â”€ utils.py              # Funciones auxiliares (extracciÃ³n de texto, validaciÃ³n, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo para integraciÃ³n con proveedores LLM
â”œâ”€â”€ requirements.txt          # Lista de dependencias
â””â”€â”€ README.md                 # DocumentaciÃ³n general y guÃ­a de usuario
```

---

### 3. EstÃ¡ndares de CÃ³digo

- **Convenciones de Naming:**  
  Se utilizan nombres descriptivos en minÃºsculas y separados por guiones bajos (por ejemplo, `extract_text_from_pdf`).

- **PatrÃ³n de SeparaciÃ³n:**  
  La lÃ³gica de la interfaz (Streamlit) se separa de la lÃ³gica de negocio (LLMBackend, Parser). Se recomienda el uso de inyecciÃ³n de dependencias mediante la clase `ModelConfig`.
  
- **Testing y ValidaciÃ³n:**  
  Se recomienda implementar pruebas unitarias usando frameworks como pytest para:
  - Validar la extracciÃ³n de texto.  
  - Probar la funciÃ³n de validaciÃ³n del tamaÃ±o del archivo.  
  - Simular peticiones al mÃ³dulo LLMBackend y verificar la correcta gestiÃ³n de respuestas y reintentos.
  
- **Manejo de Errores y Logging:**  
  Cada mÃ³dulo debe utilizar bloques try/except para capturar excepciones y, opcionalmente, implementar logging para facilitar la depuraciÃ³n.

---

## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**  
  - La extracciÃ³n de texto depende de la calidad del PDF; archivos basados en imÃ¡genes pueden requerir integraciÃ³n de OCR.  
  - Los anÃ¡lisis LLM dependen de la calidad del texto ingresado y de la correcta configuraciÃ³n de la API key.
  - En la versiÃ³n actual se procesa un archivo o grupo de archivos por sesiÃ³n; el procesamiento asÃ­ncrono o en lote puede mejorar el rendimiento.

- **Consideraciones de Rendimiento:**  
  - Procesar archivos muy grandes (cercanos a 100 MB) podrÃ­a afectar la velocidad de respuesta.  
  - Se recomienda optimizar el procesamiento en lote o implementar tÃ©cnicas de caching para anÃ¡lisis repetitivos.

- **Aspectos de Seguridad:**  
  - Proteger las API keys mediante variables de entorno y evitar exponerlas en el cÃ³digo fuente.  
  - Redactar la informaciÃ³n sensible (PII) antes de enviarla a proveedores externos.

- **Mejoras Sugeridas (TODOs):**  
  - Ampliar el soporte a otros formatos de archivo (por ejemplo, TXT).  
  - Integrar OCR para documentos PDF basados en imÃ¡genes.  
  - Mejorar la modularidad y el manejo de errores en el parser y en la comunicaciÃ³n con proveedores LLM.  
  - Implementar procesamiento asÃ­ncrono y/o en lote para mejorar el rendimiento en anÃ¡lisis masivos.

---

## Diagrama del Sistema

El siguiente diagrama Mermaid resume la relaciÃ³n e interacciÃ³n entre los componentes principales del sistema:

```mermaid
graph LR
    A[Interfaz Streamlit] --> B[Procesamiento y ValidaciÃ³n de Archivos]
    B --> C[Parser y NormalizaciÃ³n de Conversaciones]
    A --> D[LLMBackend]
    D --> E[Proveedores LLM (OpenAI, Anthropic, Gemini)]
```

---

## Consideraciones Finales

- **Escalabilidad y Mantenimiento:**  
  La arquitectura modular permite agregar fÃ¡cilmente nuevos proveedores LLM y funcionalidades sin reestructurar la interfaz.
- **Manejo de Errores:**  
  Utilizar bloques try/except y, de ser necesario, logging para facilitar la detecciÃ³n y soluciÃ³n de problemas en producciÃ³n.
- **Seguridad:**  
  Proteger la informaciÃ³n sensible y las API keys es fundamental. Se recomienda revisar y cumplir con las polÃ­ticas de privacidad y normativas vigentes.
- **DocumentaciÃ³n:**  
  Mantener la documentaciÃ³n actualizada conforme se realicen cambios o se integren nuevas funcionalidades.

---

## Diagrama Final

```mermaid
graph LR
App[app] --> Deps[dependencies]
```

---

Happy Coding y Â¡Ã©xito en el anÃ¡lisis de la Voz del Cliente!

Para cualquier duda, sugerencia o contribuciÃ³n, por favor revisa el repositorio de issues o contacta al equipo de desarrollo.

------------------------------------------------------------
## Diagrama Resumido
```mermaid
graph LR\nApp["app"]-->Deps["dependencies"]\n
```


## Diagrama
```mermaid
graph LR\nApp["app"]-->Deps["dependencies"]\n
```
