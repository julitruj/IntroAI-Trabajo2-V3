# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?
- **PropÃ³sito principal**:  
  Esta herramienta te permite procesar y analizar informaciÃ³n de documentos PDF y conversaciones usando modelos de lenguaje basados en inteligencia artificial, todo a travÃ©s de una interfaz web interactiva creada con Streamlit.
  
- **Problema que resuelve**:  
  Transforma documentos y conversaciones (como transcripciones y feedback de clientes) en informaciÃ³n clara y accionable, facilitando la extracciÃ³n de insights Ãºtiles para la toma de decisiones.

- **Beneficios clave**:  
  â€¢ Interfaz intuitiva y fÃ¡cil de usar.  
  â€¢ AutomatizaciÃ³n en la digitalizaciÃ³n y anÃ¡lisis de documentos PDF.  
  â€¢ AnÃ¡lisis inteligente de textos con IA para descubrir patrones y tendencias.  
  â€¢ RecopilaciÃ³n y evaluaciÃ³n de la Voz del Cliente (VoC) para mejorar productos y servicios.
  
- **Audiencia objetivo**:  
  Profesionales de anÃ¡lisis de datos, equipos de atenciÃ³n al cliente, marketing y cualquier usuario que necesite transformar informaciÃ³n no estructurada en insights fÃ¡cilmente comprensibles.

## âœ¨ Funcionalidades Principales

### Interfaz Web Interactiva con Streamlit
- **Â¿QuÃ© hace?**:  
  Ofrece un entorno visual amigable donde puedes acceder a todas las herramientas de la aplicaciÃ³n de manera centralizada.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Ãšsala cada vez que necesites acceder o gestionar cualquier funcionalidad, desde la carga de archivos hasta el anÃ¡lisis con IA.
  
- **Â¿CÃ³mo acceder?**:  
  Ingresa a la URL de la aplicaciÃ³n a travÃ©s de tu navegador. Si se requiere, inicia sesiÃ³n con tus credenciales.
  
- **Resultado esperado**:  
  VisualizarÃ¡s un panel de control con opciones claras para procesar documentos, analizar conversaciones y revisar la Voz del Cliente.

### Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**:  
  Permite cargar y extraer contenido de documentos PDF para su posterior anÃ¡lisis.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesitas digitalizar y transformar la informaciÃ³n contenida en archivos PDF en texto legible y procesable.
  
- **Â¿CÃ³mo acceder?**:  
  Desde el menÃº principal de la interfaz, selecciona "Procesar PDF" y usa el botÃ³n para subir el archivo deseado.
  
- **Resultado esperado**:  
  VerÃ¡s el contenido extraÃ­do del archivo PDF en formato de texto, listo para ser analizado con las otras herramientas de la aplicaciÃ³n.

### AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**:  
  Utiliza avanzados modelos de lenguaje para analizar el texto, identificar tendencias, resumir informaciÃ³n y responder a consultas especÃ­ficas.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites interpretar y resumir grandes volÃºmenes de texto o cuando quieras descubrir patrones y recomendaciones automÃ¡ticamente.
  
- **Â¿CÃ³mo acceder?**:  
  Una vez que un documento ha sido procesado o una conversaciÃ³n transcrita, selecciona la opciÃ³n "Analizar con IA" desde el menÃº.
  
- **Resultado esperado**:  
  RecibirÃ¡s un reporte detallado o un resumen con insights clave derivados del contenido analizado.

### AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**:  
  Analiza transcripciones de conversaciones, chats u otros formatos de comunicaciÃ³n para identificar temas relevantes y evaluar el tono de las interacciones.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Ideal para equipos que necesitan evaluar la calidad del servicio al cliente o entender mejor las inquietudes de los usuarios.
  
- **Â¿CÃ³mo acceder?**:  
  Ve a la secciÃ³n "AnÃ¡lisis de Conversaciones" en la aplicaciÃ³n y carga el archivo o conecta la fuente de datos correspondiente.
  
- **Resultado esperado**:  
  Se generarÃ¡n reportes y grÃ¡ficos visuales que muestran los temas mÃ¡s frecuentes, el Ã¡nimo de las conversaciones y otros insights relevantes.

### AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**:  
  Recoge y analiza feedback y opiniones de los clientes para ayudarte a conocer mejor sus necesidades y expectativas.
  
- **Â¿CuÃ¡ndo usarla?**:  
  Cuando quieras recoger informaciÃ³n directa de tus clientes para mejorar productos o servicios.
  
- **Â¿CÃ³mo acceder?**:  
  Selecciona "Voz del Cliente" en el menÃº principal y sigue las instrucciones para conectar y subir datos de encuestas o comentarios.
  
- **Resultado esperado**:  
  VisualizarÃ¡s dashboards y reportes que resaltan la satisfacciÃ³n de los clientes y Ã¡reas de mejora basadas en sus comentarios.

## ğŸš€ CÃ³mo Empezar

### Primer Uso
1. **Requisitos previos**:  
   AsegÃºrate de tener acceso a la aplicaciÃ³n a travÃ©s de tu navegador y de contar con los documentos o datos (como archivos PDF y transcripciones) que deseas analizar.
   
2. **Acceso inicial**:  
   Ingresa a la aplicaciÃ³n mediante la URL proporcionada. Si es la primera vez, sigue el proceso de registro o inicia sesiÃ³n con tus credenciales.
   
3. **ConfiguraciÃ³n bÃ¡sica**:  
   Configura tus preferencias de usuario, selecciona el idioma, y explora el menÃº principal para familiarizarte con las opciones disponibles.
   
4. **Primera tarea recomendada**:  
   Sube un documento PDF o una transcripciÃ³n para probar el proceso de anÃ¡lisis desde el inicio.

### Flujo TÃ­pico de Uso
1. **Paso 1**:  
   Inicia sesiÃ³n en la interfaz web de la aplicaciÃ³n.
   
2. **Paso 2**:  
   Selecciona la funciÃ³n que necesitas (por ejemplo, "Procesar PDF" o "Analizar Conversaciones").
   
3. **Paso 3**:  
   Sigue los pasos especÃ­ficos para la funcionalidad elegida y revisa el reporte o grÃ¡fico generado.
   
4. **Paso 4**:  
   Utiliza los insights obtenidos para tomar decisiones o mejorar la calidad del servicio/producto.

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: Resumen de Reportes en PDF
SituaciÃ³n: Necesitas resumir y extraer la informaciÃ³n clave de mÃºltiples informes de ventas en formato PDF.  
Pasos: 
1. Sube cada uno de los PDF en la secciÃ³n "Procesar PDF".  
2. Utiliza "AnÃ¡lisis con IA" para obtener un resumen de los datos y descubrir tendencias.  
3. Revisa el reporte final y aplica los insights para ajustar estrategias de ventas.

### Escenario 2: OptimizaciÃ³n del Servicio al Cliente
SituaciÃ³n: Buscas mejorar la calidad del servicio a travÃ©s del anÃ¡lisis de transcripciones de chat.  
Pasos: 
1. Accede a la secciÃ³n "AnÃ¡lisis de Conversaciones" y carga las transcripciones.  
2. Observa los reportes que indican los temas recurrentes y el tono general de las interacciones.  
3. Implementa mejoras basadas en estas conclusiones.

### Escenario 3: EvaluaciÃ³n de la Voz del Cliente
SituaciÃ³n: Quieres obtener feedback sobre un nuevo producto a partir de encuestas y comentarios.  
Pasos:
1. DirÃ­gete a "AnÃ¡lisis de Voz del Cliente".  
2. Conecta las fuentes de feedback disponibles o sube archivos con respuestas.  
3. Analiza el dashboard para identificar Ã¡reas de mejora y puntos fuertes en la percepciÃ³n del producto.

## â“ Preguntas Frecuentes

P: Â¿CÃ³mo subo un archivo PDF para su anÃ¡lisis?  
R: En la pantalla principal, selecciona "Procesar PDF", haz clic en el botÃ³n para cargar tu archivo y espera a que se procese.

P: Â¿QuÃ© hago si no se genera el reporte de anÃ¡lisis de IA?  
R: Revisa que el archivo cargado contenga texto legible y vuelve a intentarlo. Si el problema persiste, contacta al soporte tÃ©cnico.

P: Â¿Es seguro procesar mis documentos en esta aplicaciÃ³n?  
R: SÃ­, la aplicaciÃ³n utiliza protocolos de seguridad para proteger tus datos y garantizar la confidencialidad de la informaciÃ³n procesada.

P: Â¿CuÃ¡les son las limitaciones principales?  
R: La aplicaciÃ³n estÃ¡ optimizada para documentos en idioma espaÃ±ol y puede presentar dificultades con textos altamente especializados o formatos atÃ­picos.

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: Error al cargar un archivo PDF
- SÃ­ntomas: El archivo no se carga correctamente o se muestra un mensaje de error.
- Causa probable: El archivo podrÃ­a estar daÃ±ado o no ser un PDF vÃ¡lido.
- SoluciÃ³n: AsegÃºrate de que el archivo es un PDF correcto, vuelve a intentarlo y, si el problema persiste, contacta al soporte.

### Problema: Resultados incompletos en el anÃ¡lisis con IA
- SÃ­ntomas: El reporte generado no muestra toda la informaciÃ³n esperada.
- Causa probable: El contenido del documento o transcripciÃ³n puede ser insuficiente o poco claro.
- SoluciÃ³n: Verifica que el documento tenga informaciÃ³n relevante y vuelve a procesarlo. Revisa ademÃ¡s las configuraciones de anÃ¡lisis.

### Problema: Interfaz lenta o sin respuesta
- SÃ­ntomas: La aplicaciÃ³n se cuelga o responde muy lentamente.
- Causa probable: Sobrecarga de datos o problemas temporales de conexiÃ³n.
- SoluciÃ³n: Recarga la pÃ¡gina, comprueba tu conexiÃ³n a internet y reintenta la operaciÃ³n. Si el problema continÃºa, comunÃ­cate con soporte.

## ğŸ“ Soporte y Contacto
- **Â¿Necesitas ayuda adicional?**  
  Contacta a soporte tÃ©cnico mediante el correo: soporte@tuempresa.com.
  
- **Â¿Encontraste un error?**  
  Utiliza el formulario de contacto en la secciÃ³n "Soporte" para reportarlo.
  
- **Â¿Tienes sugerencias?**  
  EnvÃ­a tus comentarios y sugerencias a: feedback@tuempresa.com.

---

Esta guÃ­a estÃ¡ diseÃ±ada para ayudarte a sacarle el mÃ¡ximo provecho a la aplicaciÃ³n, facilitando el procesamiento y anÃ¡lisis de tus documentos y conversaciones de forma sencilla y eficiente. Â¡Explora las funcionalidades y transforma tus datos en insights valiosos!

## DocumentaciÃ³n TÃ©cnica
A continuaciÃ³n se muestra la documentaciÃ³n tÃ©cnica completa en Markdown, organizada segÃºn la estructura obligatoria solicitada y basada en el anÃ¡lisis del cÃ³digo, la guÃ­a de usuario y los diagramas proporcionados.

---

# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n estÃ¡ orientada a desarrolladores y equipos tÃ©cnicos interesados en comprender, mantener y extender la aplicaciÃ³n VoC Analyst. La herramienta procesa archivos (por ejemplo, documentos PDF) y analiza la Voz del Cliente (VoC) mediante modelos de lenguaje (LLM). La interfaz se implementa con Streamlit y el backend integra la conexiÃ³n con proveedores de LLM (OpenAI, Anthropic y Google GenAI).

---

## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n arquitectÃ³nico utilizado:**  
  La aplicaciÃ³n adopta una arquitectura modular monolÃ­tica â€œhÃ­bridaâ€ que separa la lÃ³gica de presentaciÃ³n de la lÃ³gica de negocio.  
  - **Capa de PresentaciÃ³n (Frontend):** Se implementa con Streamlit, que permite la carga de archivos, la interacciÃ³n del usuario, la visualizaciÃ³n dinÃ¡mica de resultados y la gestiÃ³n del estado de la sesiÃ³n mediante `st.session_state`.  
  - **Capa de LÃ³gica y AnÃ¡lisis (Backend):** Comprende mÃ³dulos para la extracciÃ³n y preprocesamiento de archivos (utilizando PyPDF2), el parser y normalizaciÃ³n de conversaciones (incluyendo la redacciÃ³n de datos sensibles, PII) y la integraciÃ³n con proveedores de modelos de lenguaje (LLM).

- **Diagrama de componentes:**

  ```mermaid
  graph LR
      A[Interfaz Streamlit (Frontend)] --> B[Procesamiento y ValidaciÃ³n de Archivos]
      A --> C[GestiÃ³n del Estado (st.session_state)]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[Parser y RedacciÃ³n de PII]
      A --> F[LLMBackend (LÃ³gica de Negocio)]
      F --> G[Proveedores LLM (OpenAI, Anthropic, Gemini)]
  ```

- **Flujo de datos principal entre componentes:**  
  1. El usuario accede a la aplicaciÃ³n mediante la interfaz web y carga uno o mÃ¡s archivos, en su mayorÃ­a en formato PDF.  
  2. Se aplican funciones de validaciÃ³n (por ejemplo, `validate_file_size`) y se extrae el contenido textual por medio de `extract_text_from_pdf` (utilizando PyPDF2).  
  3. El texto extraÃ­do es enviado al mÃ³dulo de parser, que normaliza y segmenta la conversaciÃ³n, redactando cualquier informaciÃ³n sensible (PII).  
  4. La capa de negocio usa el mÃ³dulo **LLMBackend** para enviar el contenido a los proveedores LLM (configurados mediante ModelConfig), obteniendo insights (anÃ¡lisis de sentimientos, detecciÃ³n de temas, recomendaciones, etc.).  
  5. Los resultados se almacenan en `st.session_state` y se presentan interactivamente en la interfaz.

- **Dependencias crÃ­ticas y su propÃ³sito:**  
  - **Streamlit:** Facilita la creaciÃ³n de la interfaz web interactiva y la gestiÃ³n del estado de la sesiÃ³n.  
  - **PyPDF2:** Extrae el contenido textual de archivos PDF.  
  - **Pandas:** Permite la manipulaciÃ³n y visualizaciÃ³n de datos a travÃ©s de DataFrames.  
  - **LLM SDKs (openai, anthropic, google-genai):** Integran y conectan la aplicaciÃ³n con proveedores de modelos de lenguaje para realizar anÃ¡lisis semÃ¡ntico avanzado.  
  - **Otras librerÃ­as estÃ¡ndar:** json, os, time, datetime, uuid, zipfile, io, typing, que soportan operaciones bÃ¡sicas y manejo de datos.

---

## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  Principalmente Python (catalogado como â€œotherâ€ en el repositorio).

- **Frameworks / LibrerÃ­as:**  
  - **Streamlit:** (>= 1.49.1) para la creaciÃ³n de la interfaz web interactiva.  
  - **PyPDF2:** (>= 3.0.1) para extraer el contenido textual desde documentos PDF.  
  - **Pandas:** (>= 2.3.2) para la manipulaciÃ³n y visualizaciÃ³n de datos.  
  - **LLM SDKs:**  
    - `openai` para integrarse con la API de OpenAI.  
    - `anthropic` para la integraciÃ³n con proveedores de Anthropic.  
    - `google-genai` para conectar con Google GenAI (Gemini u otros modelos).  
  - **LibrerÃ­as estÃ¡ndar:** json, os, time, datetime, uuid, zipfile, io, typing.

- **Base de Datos:**  
  No se utiliza una base de datos relacional; el almacenamiento se realiza transitoriamente en memoria utilizando `st.session_state`.

- **APIs externas:**  
  Se integran las APIs de proveedores de LLM (OpenAI, Anthropic y Google GenAI) a travÃ©s de llamadas directas en el mÃ³dulo LLMBackend.

- **Infraestructura:**  
  La aplicaciÃ³n se despliega como una aplicaciÃ³n web simple mediante Streamlit, pudiendo ejecutarse en entornos locales, servidores o contenedores Docker.

---

## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Gestiona la interfaz de usuario final, incluyendo la carga y validaciÃ³n de archivos, la configuraciÃ³n de la pÃ¡gina y la visualizaciÃ³n interactiva de resultados. Se encarga ademÃ¡s de gestionar el estado de la sesiÃ³n mediante `st.session_state`.

- **UbicaciÃ³n:**  
  El punto de entrada principal es el archivo `app.py` (ubicado en la raÃ­z o en el directorio `app/`), junto con mÃ³dulos auxiliares como `parser.py` y `utils.py`.

- **Interfaces y Funcionalidades:**  
  - **ConfiguraciÃ³n de la PÃ¡gina:**  
    Se utiliza `st.set_page_config` para definir el tÃ­tulo, el icono, el layout y el estado inicial del sidebar.
  - **GestiÃ³n de Estado:**  
    Con `st.session_state`, se almacenan variables clave como:  
      - `analysis_results`: Resultados del anÃ¡lisis.  
      - `run_id`: Identificador Ãºnico de cada ejecuciÃ³n.  
      - `uploaded_files_data`: Lista con informaciÃ³n y metadatos de los archivos subidos.  
      - `processing_complete`: Indicador del estado de finalizaciÃ³n del anÃ¡lisis.
  - **Funciones Auxiliares:**  
    - `extract_text_from_pdf(pdf_file) â†’ str`: Recorre el PDF, extrae el texto de cada pÃ¡gina y retorna el contenido completo.  
    - `validate_file_size(file) â†’ bool`: Comprueba que el tamaÃ±o del archivo no exceda el lÃ­mite predefinido (ej. 100MB).

- **Ejemplo de CÃ³digo:**

  ```python
  import streamlit as st
  import PyPDF2

  st.set_page_config(
      page_title="VoC Analyst - AnÃ¡lisis de Voz del Cliente con LLM",
      page_icon="ğŸ“Š",
      layout="wide",
      initial_sidebar_state="expanded"
  )

  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None
  if 'run_id' not in st.session_state:
      st.session_state.run_id = None
  if 'uploaded_files_data' not in st.session_state:
      st.session_state.uploaded_files_data = []
  if 'processing_complete' not in st.session_state:
      st.session_state.processing_complete = False

  def extract_text_from_pdf(pdf_file) -> str:
      """Extraer texto de archivo PDF"""
      try:
          pdf_reader = PyPDF2.PdfReader(pdf_file)
          text = ""
          for page in pdf_reader.pages:
              text += page.extract_text() + "\n"
          return text.strip()
      except Exception as e:
          st.error(f"Error al extraer texto de PDF: {str(e)}")
          return ""
  ```

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  Facilitar la integraciÃ³n con proveedores de Modelos de Lenguaje (LLM) para analizar el contenido textual y generar insights (resÃºmenes, anÃ¡lisis de sentimientos, detecciÃ³n de temas y recomendaciones).

- **UbicaciÃ³n:**  
  Se encuentra en el archivo `llm_backend.py` en la raÃ­z del proyecto.

- **Interfaces y Funcionalidades:**  
  - **ModelConfig:**  
    Una clase de configuraciÃ³n (implementada con dataclasses) que define:
    - `provider`: Nombre del proveedor a utilizar (por ejemplo, "openai", "anthropic" o "gemini").
    - `model`: Modelo especÃ­fico a emplear.
    - `api_key`: Clave para la autenticaciÃ³n.
    - `max_retries` y `retry_delay`: ParÃ¡metros para la gestiÃ³n de reintentos.
    
    ```python
    from dataclasses import dataclass

    @dataclass
    class ModelConfig:
        provider: str  # Ej: "openai", "anthropic", "gemini"
        model: str
        api_key: str
        max_retries: int = 3
        retry_delay: float = 1.0
    ```
  
  - **LLMBackend:**  
    Provee mÃ©todos para:
    - Inicializar el cliente LLM adecuado mediante `_initialize_client()`.
    - Cargar los prompts correspondientes con `_load_parse_prompt()` y `_load_analyze_prompt()`.
    - Enviar el texto a analizar mediante `analyze_text(text: str) â†’ Dict[str, Any]` y retornar los insights generados.

---

### 3. Parser y Procesamiento de Conversaciones

- **PropÃ³sito:**  
  Procesar y normalizar las conversaciones extraÃ­das de los archivos o ingresadas manualmente, transformÃ¡ndolas en un formato JSON estructurado para facilitar el anÃ¡lisis posterior.  
  Incluye:
  - La segmentaciÃ³n del texto en turnos de conversaciÃ³n.
  - La extracciÃ³n de metadatos (por ejemplo, `conversation_id`, timestamps y roles).
  - La redacciÃ³n (anonimizaciÃ³n) de informaciÃ³n sensible (PII) sustituyÃ©ndola por etiquetas estandarizadas (p.ej., `[EMAIL]`, `[PHONE]`).

- **UbicaciÃ³n:**  
  Las funciones de parser se encuentran en el archivo `parser.py` o integradas en los mÃ³dulos de procesamiento dentro de `app/`.

- **Dependencias:**  
  Se pueden utilizar expresiones regulares y funciones de manipulaciÃ³n de cadenas para estructurar y anonimizar la informaciÃ³n.

---

## ğŸš€ APIs y Endpoints

Aunque la aplicaciÃ³n no expone endpoints REST pÃºblicos, se han definido â€œAPIs internasâ€ a nivel de funciones y mÃ©todos:

- **FunciÃ³n: extract_text_from_pdf(pdf_file) â†’ str**  
  Extrae el contenido textual de un archivo PDF utilizando PyPDF2, notificando errores a travÃ©s de la interfaz.

- **FunciÃ³n: validate_file_size(file) â†’ bool**  
  Verifica que el archivo subido no exceda el lÃ­mite de tamaÃ±o permitido (por ejemplo, 100MB).

- **MÃ©todo: LLMBackend.analyze_text(text: str) â†’ Dict[str, Any]**  
  EnvÃ­a el texto a analizar, junto con un prompt predefinido, al proveedor LLM configurado y retorna un diccionario con los resultados (insights, anÃ¡lisis de sentimientos, temas, etc.).

- **Funciones del Parser:**  
  Transforman las conversaciones extraÃ­das en un formato JSON estructurado, normalizando la informaciÃ³n y redactando la PII para su anÃ¡lisis posterior.

---

## ğŸ’¾ Modelo de Datos

- **Entidades Principales: ConversaciÃ³n**  
  Se representa internamente como un objeto JSON con la siguiente estructura:
  - `conversation_id`: Identificador Ãºnico.
  - `messages`: Lista de mensajes, donde cada mensaje contiene:
    - `sender`: Rol del emisor (cliente, agente, desconocido).
    - `timestamp`: Momento de envÃ­o (si disponible).
    - `content`: Texto del mensaje con la informaciÃ³n sensible ya redactada.
    - `metadata`: InformaciÃ³n adicional (por ejemplo, canal de comunicaciÃ³n, duraciÃ³n, etc.).

- **Esquemas de Entrada y Salida:**
  - **Entrada:** Archivos PDF o textos ingresados.
  - **Salida:** JSON estructurado con la conversaciÃ³n y los insights obtenidos para ser visualizados en la interfaz.

- **Validaciones y Transformaciones:**  
  - Se valida que el texto extraÃ­do sea vÃ¡lido y no estÃ© vacÃ­o.  
  - Se aplican reglas para redactar y anonimizar datos sensibles (PII).  
  - Se estructura el resultado en un formato JSON homogÃ©neo para facilitar su consumo por mÃ³dulos de visualizaciÃ³n.

---

## ğŸ› ï¸ GuÃ­a de Desarrollo

### 1. ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**  
   - Python 3.8 o superior.  
   - ConexiÃ³n a Internet (para llamadas a las APIs de proveedores LLM en producciÃ³n).

2. **InstalaciÃ³n:**  
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/voc-analyst.git
     cd voc-analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv env
     source env/bin/activate    # En Linux/Mac
     venv\Scripts\activate       # En Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de Entorno:**  
   Configura las API keys mediante variables de entorno:
   - `OPENAI_API_KEY`
   - `ANTHROPIC_API_KEY`
   - `GEMINI_API_KEY`

---

### 2. Estructura del CÃ³digo

La estructura del proyecto es la siguiente:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Punto de entrada (Interfaz de usuario con Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones para parseo y procesamiento de conversaciones
â”‚   â””â”€â”€ utils.py              # Funciones auxiliares (extracciÃ³n de texto, validaciÃ³n, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo para integraciÃ³n con proveedores LLM
â”œâ”€â”€ requirements.txt          # Lista de dependencias
â””â”€â”€ README.md                 # DocumentaciÃ³n general y guÃ­a de usuario
```

---

### 3. EstÃ¡ndares de CÃ³digo

- **Convenciones de Naming:**  
  Utiliza nombres descriptivos en minÃºsculas y con guiones bajos para identificar archivos y funciones (por ejemplo, `extract_text_from_pdf`).
  
- **SeparaciÃ³n de LÃ³gica:**  
  La lÃ³gica de la interfaz (Streamlit) se separa de la lÃ³gica de negocio (LLMBackend y Parser). Se recomienda el uso de inyecciÃ³n de dependencias a travÃ©s de la clase `ModelConfig`.

- **Testing y ValidaciÃ³n:**  
  - Emplear frameworks como pytest para escribir pruebas unitarias y de integraciÃ³n, cubriendo funciones crÃ­ticas como la extracciÃ³n de texto, validaciÃ³n del tamaÃ±o y la interacciÃ³n con el LLM.
  
- **Manejo de Errores y Logging:**  
  Se deben introducir bloques try/except en funciones crÃ­ticas y utilizar mÃ³dulos de logging para registrar errores y facilitar la depuraciÃ³n.

---

## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**  
  - La extracciÃ³n de texto depende de la calidad de los documentos PDF; PDFs basados en imÃ¡genes pueden requerir integraciÃ³n de OCR.
  - El rendimiento en el procesamiento de archivos muy grandes (cercanos a 100MB) puede verse afectado.
  
- **Consideraciones de Rendimiento:**  
  - Se recomienda optimizar el procesamiento en lote para anÃ¡lisis repetitivos y considerar tÃ©cnicas de caching.
  - Ajustar los parÃ¡metros de reintentos (`max_retries` y `retry_delay`) para garantizar una comunicaciÃ³n estable con los proveedores LLM.

- **Aspectos de Seguridad:**  
  - Proteger las API keys utilizando variables de entorno y evitar exponerlas en el cÃ³digo fuente.
  - Redactar la informaciÃ³n sensible (PII) antes de enviarla a proveedores externos, conforme a las polÃ­ticas de privacidad.

- **Mejoras Sugeridas (TODOs):**  
  - Extender el soporte a otros formatos de archivo (por ejemplo, TXT).
  - Integrar OCR para documentos PDF basados en imÃ¡genes.
  - Mejorar la modularidad y el manejo de errores en el parser y en la capa de conexiÃ³n con proveedores LLM.
  - Implementar procesamiento asÃ­ncrono y/o en lote para optimizar el rendimiento en anÃ¡lisis masivos.

---

## Diagrama del Sistema

El siguiente diagrama Mermaid resume la interacciÃ³n entre los componentes principales del sistema:

```mermaid
graph LR
    A[Interfaz Streamlit] --> B[Procesamiento y ValidaciÃ³n de Archivos]
    B --> C[Parser y NormalizaciÃ³n de Conversaciones]
    A --> D[LLMBackend]
    D --> E[Proveedores LLM (OpenAI, Anthropic, Gemini)]
```

---

## Consideraciones Finales

- **Escalabilidad y Mantenimiento:**  
  La arquitectura modular facilita la integraciÃ³n de nuevos proveedores LLM y la extensiÃ³n de funcionalidades sin reestructurar la interfaz.
- **Manejo de Errores:**  
  Es imprescindible el uso de bloques try/except y la implementaciÃ³n de mecanismos de logging para monitorizar y depurar el sistema.
- **Seguridad:**  
  Se debe prestar especial atenciÃ³n a la protecciÃ³n de las API keys y a la redacciÃ³n (anonimizaciÃ³n) de la informaciÃ³n sensible.
- **DocumentaciÃ³n:**  
  MantÃ©n la documentaciÃ³n actualizada conforme se realicen cambios o se integren nuevas funcionalidades.

---

## GuÃ­a de Usuario â€“ Resumen PrÃ¡ctico

1. **Acceso a la AplicaciÃ³n:**  
   Inicia el navegador y visita la URL asignada (ej.: http://localhost:8501) para cargar la interfaz.
2. **Carga de Archivos:**  
   Usa la opciÃ³n â€œCargar PDFâ€ para subir tus documentos o â€œAnalizar ConversaciÃ³nâ€ para procesar transcripciones.
3. **EjecuciÃ³n del AnÃ¡lisis:**  
   Selecciona la funcionalidad de anÃ¡lisis (por ejemplo, â€œAnalizar con IAâ€), y espera a que se procesen los datos.
4. **VisualizaciÃ³n y ExportaciÃ³n:**  
   Revisa los reportes, grÃ¡ficos e insights y utiliza las opciones de exportaciÃ³n (JSON, CSV) si deseas guardar los resultados.
5. **Soporte:**  
   En caso de problemas, consulta la secciÃ³n de â€œPreguntas Frecuentesâ€ o contacta al soporte mediante los correos indicados.

---

## Diagrama Final

```mermaid
graph LR
App[app] --> Deps[dependencies]
```

---

Happy Coding y Â¡Ã©xito en el anÃ¡lisis de la Voz del Cliente!  
Para cualquier duda, sugerencia o contribuciÃ³n, revisa el repositorio de issues o contacta al equipo de desarrollo.

---

## Diagrama (Resumen Visual)

```mermaid
graph LR
App["app"]-->Deps["dependencies"]
```



## Diagrama
```mermaid
graph LR\nApp["app"]-->Deps["dependencies"]\n
```
