# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?
Esta herramienta es una soluciÃ³n interactiva basada en web, desarrollada con Streamlit, que te ayuda a procesar y analizar informaciÃ³n contenida en documentos PDF y conversaciones. Utiliza modelos de lenguaje de inteligencia artificial para extraer insights y detectar sentimientos, emociones y la Voz del Cliente (VoC) de forma rÃ¡pida y precisa.

- **PropÃ³sito principal**: Facilitar el anÃ¡lisis y procesamiento de datos en archivos PDF y textos conversacionales, permitiendo obtener reportes e insights de valor sin necesidad de conocimientos tÃ©cnicos avanzados.
- **Problema que resuelve**: Elimina la complejidad de procesar grandes volÃºmenes de informaciÃ³n en diferentes formatos, ayudÃ¡ndote a transformar datos sin estructurar en informaciÃ³n accionable para optimizar procesos y mejorar la atenciÃ³n al cliente.
- **Beneficios clave**:
  - ObtenciÃ³n automatizada de insights y anÃ¡lisis de sentimientos.
  - DetecciÃ³n de emociones y tendencias en conversaciones.
  - Procesamiento eficiente de documentos PDF.
  - Interfaz amigable e interactiva que simplifica la experiencia.
- **Audiencia objetivo**: Profesionales de anÃ¡lisis de datos, equipos de atenciÃ³n al cliente, departamentos de marketing, y cualquiera que requiera transformar grandes volÃºmenes de informaciÃ³n en insights prÃ¡cticos.

## âœ¨ Funcionalidades Principales

### Interfaz Web Interactiva con Streamlit
- **Â¿QuÃ© hace?**: Permite acceder a todas las herramientas de anÃ¡lisis de forma visual, con botones, menÃºs y grÃ¡ficas fÃ¡ciles de entender.
- **Â¿CuÃ¡ndo usarla?**: Cada vez que necesites revisar, interactuar o modificar algÃºn anÃ¡lisis, o simplemente buscar informaciÃ³n mediante un entorno intuitivo.
- **Â¿CÃ³mo acceder?**: Ingresa a la URL de la aplicaciÃ³n desde tu navegador web.
- **Resultado esperado**: VisualizaciÃ³n clara de todas las opciones y herramientas disponibles, con navegaciÃ³n sencilla por secciones y resultados grÃ¡ficos en pantalla.

### Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**: Extrae y convierte el contenido de documentos PDF para su anÃ¡lisis.
- **Â¿CuÃ¡ndo usarla?**: Cuando dispongas de reportes, facturas, investigaciones u otros documentos en PDF que quieras transformar en datos procesables.
- **Â¿CÃ³mo acceder?**: Selecciona la opciÃ³n â€œProcesar PDFâ€ en la interfaz, carga el archivo deseado desde tu computadora y presiona â€œEnviarâ€.
- **Resultado esperado**: VisualizaciÃ³n del contenido extraÃ­do en formato de texto, listo para ser analizado por la herramienta.

### AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**: Analiza el contenido textual utilizando inteligencia artificial para extraer patrones, identificar temas y detectar palabras clave.
- **Â¿CuÃ¡ndo usarla?**: Al trabajar con textos largos o documentos complejos y cuando necesites extraer insights de manera automatizada.
- **Â¿CÃ³mo acceder?**: Una vez procesado el documento o ingresado el texto, selecciona â€œAnalizar con IAâ€ y espera a que el sistema genere el reporte.
- **Resultado esperado**: Un resumen detallado de temas, palabras clave y patrones encontrados en el contenido.

### AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**: Revisa transcripciones de conversaciones (chat, llamadas, etc.) para identificar puntos importantes y Ã¡reas de mejora.
- **Â¿CuÃ¡ndo usarla?**: Cuando necesites evaluar la calidad de la atenciÃ³n al cliente, el desempeÃ±o de un equipo de ventas o la satisfacciÃ³n general a partir de interacciones.
- **Â¿CÃ³mo acceder?**: Sube el archivo de transcripciÃ³n o copia el texto en el Ã¡rea designada y elige â€œAnalizar ConversaciÃ³nâ€.
- **Resultado esperado**: Un reporte con aspectos destacados de la comunicaciÃ³n, temas recurrentes y valoraciones sobre la interacciÃ³n.

### AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**: Extrae insights especÃ­ficos relacionados con la experiencia del cliente, identificando comentarios positivos, negativos y Ã¡reas de oportunidad.
- **Â¿CuÃ¡ndo usarla?**: Ãšsala cuando busques entender mejor las necesidades y percepciones de tus clientes, o para mejorar productos y servicios.
- **Â¿CÃ³mo acceder?**: Selecciona la opciÃ³n â€œAnÃ¡lisis VoCâ€ en la interfaz, carga las fuentes de feedback de clientes y ejecuta el anÃ¡lisis.
- **Resultado esperado**: Un informe identificando sentimientos y sugerencias clave, con recomendaciones para mejorar la experiencia del cliente.

### AnÃ¡lisis de Sentimientos y Emociones
- **Â¿QuÃ© hace?**: EvalÃºa el tono emocional en los textos, detectando sentimientos positivos, negativos o neutros y resaltando emociones predominantes.
- **Â¿CuÃ¡ndo usarla?**: Cuando necesites comprender la percepciÃ³n emocional en comunicaciones internas o externas, como evaluaciones de servicio o feedback en redes sociales.
- **Â¿CÃ³mo acceder?**: Tras cargar el contenido (ya sea de PDF o conversaciones), selecciona â€œAnÃ¡lisis de Sentimientosâ€ y espera a que se procese el contenido.
- **Resultado esperado**: Un grÃ¡fico o reporte que ilustra la distribuciÃ³n de sentimientos y emociones, facilitando la toma de decisiones basada en la experiencia del usuario.

## ğŸš€ CÃ³mo Empezar

### Primer Uso
1. **Requisitos previos**: AsegÃºrate de contar con una conexiÃ³n a Internet, un navegador actualizado y los archivos (PDF, transcripciones, etc.) que deseas analizar.
2. **Acceso inicial**: Ingresa a la URL de la aplicaciÃ³n desde tu navegador preferido.
3. **ConfiguraciÃ³n bÃ¡sica**: RegÃ­strate o inicia sesiÃ³n si es necesario. Configura tus preferencias de idioma y visualizaciÃ³n.
4. **Primera tarea recomendada**: Sube un documento PDF o ingresa una conversaciÃ³n para experimentar el proceso de anÃ¡lisis desde la extracciÃ³n de informaciÃ³n hasta la visualizaciÃ³n de insights.

### Flujo TÃ­pico de Uso
1. **Paso 1**: Ingresa a la aplicaciÃ³n a travÃ©s de tu navegador y familiarÃ­zate con la interfaz.
2. **Paso 2**: Selecciona el tipo de anÃ¡lisis que deseas realizar (por ejemplo, â€œProcesar PDFâ€ o â€œAnalizar ConversaciÃ³nâ€).
3. **Paso 3**: Sube o ingresa el contenido a analizar y ejecuta la herramienta de IA.
4. **Paso 4**: Revisa el resultado en la pantalla, donde se mostrarÃ¡n los insights, grÃ¡ficos y reportes generados.
5. **Paso 5**: Utiliza la informaciÃ³n para tomar decisiones o acciones basadas en los anÃ¡lisis obtenidos.

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: ExtracciÃ³n y anÃ¡lisis de InformaciÃ³n en Documentos PDF
**SituaciÃ³n**: Necesitas analizar grandes volÃºmenes de informaciÃ³n contenida en reportes mensuales u otros documentos PDF.
**Pasos**:
1. Selecciona â€œProcesar PDFâ€ en la aplicaciÃ³n.
2. Sube el documento y ejecuta el anÃ¡lisis.
3. Revisa el contenido extraÃ­do y utiliza â€œAnalizar con IAâ€ para obtener temas y palabras clave.

### Escenario 2: DetecciÃ³n de Sentimientos en Conversaciones de AtenciÃ³n al Cliente
**SituaciÃ³n**: Quieres evaluar la calidad del servicio al cliente mediante la detecciÃ³n de sentimientos en conversaciones previas.
**Pasos**:
1. Carga la transcripciÃ³n de la conversaciÃ³n mediante la opciÃ³n â€œAnalizar ConversaciÃ³nâ€.
2. Ejecuta el â€œAnÃ¡lisis de Sentimientosâ€ para detectar emociones y tonos.
3. Examina el reporte para identificar Ã¡reas de mejora en la atenciÃ³n al cliente.

### Escenario 3: AnÃ¡lisis de Voz del Cliente (VoC) para Mejorar Productos
**SituaciÃ³n**: Recibes constantemente feedback de clientes en diversos formatos y deseas extraer insights para optimizar tus productos.
**Pasos**:
1. Selecciona â€œAnÃ¡lisis VoCâ€ en la interfaz.
2. Sube o inserta el contenido de feedback.
3. Observa el informe generado, enfocado en comentarios y sugerencias que pueden influir en cambios de producto o servicio.

### Escenario 4: EvaluaciÃ³n de Emociones en Redes Sociales y Encuestas
**SituaciÃ³n**: EstÃ¡s analizando opiniones en redes sociales o encuestas y necesitas identificar emociones predominantes.
**Pasos**:
1. Inserta el contenido textual a travÃ©s de la opciÃ³n â€œAnalizar con IAâ€ o â€œAnÃ¡lisis de Sentimientosâ€.
2. Ejecuta el proceso para extraer sentimientos y emociones.
3. Utiliza el grÃ¡fico o reporte resultante para ajustar tu estrategia de comunicaciÃ³n.

## â“ Preguntas Frecuentes

**P: Â¿CÃ³mo subo un archivo PDF a la aplicaciÃ³n?**  
R: En la interfaz principal, selecciona la opciÃ³n â€œProcesar PDFâ€, haz clic en â€œCargar archivoâ€, elige el documento PDF en tu equipo y presiona â€œEnviarâ€.

**P: Â¿QuÃ© hago si el documento no se procesa correctamente?**  
R: Verifica que el archivo estÃ© en formato PDF y que no estÃ© daÃ±ado. Si el problema persiste, reinicia la aplicaciÃ³n o contacta al soporte para asistencia.

**P: Â¿Es seguro usar esta herramienta para anÃ¡lisis de datos confidenciales?**  
R: SÃ­, la aplicaciÃ³n emplea medidas de seguridad bÃ¡sicas para proteger tu informaciÃ³n. Sin embargo, se recomienda no subir documentos extremadamente sensibles sin realizar las debidas evaluaciones de seguridad.

**P: Â¿CuÃ¡les son las limitaciones principales de la aplicaciÃ³n?**  
R: 
- La aplicaciÃ³n no admite formatos de archivos distintos a PDF para el procesamiento documental.
- Los anÃ¡lisis dependen de la calidad del texto proporcionado.
- No se actualiza en tiempo real a medida que se modifican los documentos.

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: El archivo PDF no se carga o procesa
**SÃ­ntomas**: El botÃ³n de â€œEnviarâ€ no responde o aparece un error de carga.  
**Causa probable**: El archivo puede estar daÃ±ado, en un formato no compatible o haber problemas de conexiÃ³n a Internet.  
**SoluciÃ³n**:  
1. Verifica que el archivo estÃ© en formato PDF y que se abra correctamente en otro visor.  
2. AsegÃºrate de tener una conexiÃ³n estable a Internet.  
3. Si el problema persiste, intenta recargar la pÃ¡gina o contacta al soporte.

### Problema: Los resultados del anÃ¡lisis no aparecen
**SÃ­ntomas**: DespuÃ©s de ejecutar el anÃ¡lisis, la pantalla sigue en blanco o muestra mensajes de error.  
**Causa probable**: Puede deberse a una interrupciÃ³n temporal en el servicio o a datos de baja calidad.  
**SoluciÃ³n**:  
1. Revisa que el contenido ingresado estÃ© completo y sin errores.  
2. Recarga la aplicaciÃ³n y vuelve a intentarlo.  
3. Consulta el apartado de soporte si el problema continÃºa.

### Problema: Tiempo de respuesta lento durante el anÃ¡lisis
**SÃ­ntomas**: El anÃ¡lisis tarda mucho en completarse y la interfaz parece no responder.  
**Causa probable**: El volumen de informaciÃ³n es muy grande o la conexiÃ³n a Internet es lenta.  
**SoluciÃ³n**:  
1. Intenta analizar archivos o conversaciones de tamaÃ±o reducido.  
2. Verifica tu conexiÃ³n a Internet.  
3. Para anÃ¡lisis muy intensivos, considera realizar el proceso en horarios de menor congestiÃ³n.

## ğŸ“ Soporte y Contacto
- **Â¿Necesitas ayuda adicional?** Si tienes dudas o requieres asistencia, por favor contacta al equipo de soporte a travÃ©s del correo soporte@tuempresa.com.
- **Â¿Encontraste un error?** Reporta cualquier fallo o comportamiento inusual en la aplicaciÃ³n enviando un correo a errores@tuempresa.com, incluyendo una descripciÃ³n del problema y, si es posible, capturas de pantalla.
- **Â¿Tienes sugerencias?** Tus opiniones son importantes para nosotros. Puedes enviar feedback y sugerencias a feedback@tuempresa.com.

--- 

Esta guÃ­a estÃ¡ diseÃ±ada para que disfrutes de una experiencia sencilla y efectiva al analizar y procesar tus documentos e interacciones. Â¡Explora la aplicaciÃ³n y sÃ¡cale el mÃ¡ximo provecho a tus datos!

## DocumentaciÃ³n TÃ©cnica
# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n estÃ¡ orientada a desarrolladores y profesionales que necesiten comprender, mantener y extender la aplicaciÃ³n VoC Analyst. Se detalla la arquitectura del sistema, el stack tecnolÃ³gico, los componentes principales, las APIs internas, el modelo de datos, la guÃ­a de desarrollo y los puntos de atenciÃ³n, siguiendo la estructura requerida.

---

## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n ArquitectÃ³nico Utilizado:**  
  La aplicaciÃ³n implementa una arquitectura modular monolÃ­tica â€œhÃ­bridaâ€. La Capa de PresentaciÃ³n (Frontend) se implementa con Streamlit para ofrecer una experiencia web interactiva; la Capa de LÃ³gica de Negocio y AnÃ¡lisis (Backend) se encarga de procesar archivos (por ejemplo, PDF), de extraer y normalizar el contenido de las conversaciones y de comunicarse con diferentes proveedores de Modelos de Lenguaje (LLM) como OpenAI, Anthropic y Google GenAI.

- **Diagrama de Componentes:**  
  El siguiente diagrama Mermaid muestra la relaciÃ³n general entre los componentes:

  ```mermaid
  graph LR
      A[Interfaz Streamlit] --> B[Procesamiento y ValidaciÃ³n de Archivos]
      A --> C[GestiÃ³n del Estado (st.session_state)]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[Funciones de Parser y RedacciÃ³n de PII]
      A --> F[LLMBackend]
      F --> G[Proveedores LLM (OpenAI, Anthropic, Gemini)]
  ```

- **Flujo de Datos Principal:**  
  1. El usuario accede a la aplicaciÃ³n mediante una interfaz web (Streamlit).  
  2. Se cargan archivos (principalmente PDFs); se validan (por ejemplo, comprobando que el tamaÃ±o sea menor a 100MB) y se extrae el contenido utilizando PyPDF2.  
  3. El texto extraÃ­do se envÃ­a al mÃ³dulo de parser, que normaliza la conversaciÃ³n, segmenta mensajes y redacta datos sensibles (PII).  
  4. La Capa de Negocio utiliza el mÃ³dulo LLMBackend para enviar el contenido a proveedores LLM mediante prompts preconfigurados, obteniendo anÃ¡lisis (resÃºmenes, temas, sentimientos, recomendaciones, etc.).  
  5. Los resultados se almacenan en `st.session_state` y se muestran en la interfaz de usuario en paneles y visualizaciones interactivas.

- **Dependencias CrÃ­ticas y su PropÃ³sito:**  
  - **Streamlit:** Construye la interfaz web interactiva y gestiona el estado de la sesiÃ³n.  
  - **PyPDF2:** Extrae el contenido textual de archivos PDF.  
  - **Pandas:** Facilita la manipulaciÃ³n y visualizaciÃ³n de datos en formato tabular.  
  - **LLM SDKs (openai, anthropic, google-genai):** Integran y conectan la aplicaciÃ³n con distintos proveedores de modelos de lenguaje para el anÃ¡lisis avanzado.

---

## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  Principalmente Python (clasificado en â€œotherâ€ en el repositorio).

- **Frameworks y LibrerÃ­as:**  
  - **Streamlit:** (>= 1.49.1) para crear la interfaz web interactiva.  
  - **PyPDF2:** (>= 3.0.1) para la extracciÃ³n de texto desde archivos PDF.  
  - **Pandas:** (>= 2.3.2) para el manejo y presentaciÃ³n de datos.  
  - **LLM SDKs:**  
     - `openai` para conectarse a OpenAI.  
     - `anthropic` para acceder a modelos de Anthropic.  
     - `google-genai` para la integraciÃ³n con Google Gemini.  
  - **LibrerÃ­as estÃ¡ndares:** json, os, time, datetime, uuid, zipfile, io, typing.

- **Base de Datos:**  
  No se utiliza una base de datos tradicional; la aplicaciÃ³n gestiona el almacenamiento temporal de datos en memoria a travÃ©s de `st.session_state`.

- **APIs Externas:**  
  Se integra con las APIs de proveedores LLM (OpenAI, Anthropic y Google GenAI) para realizar anÃ¡lisis de lenguaje e inteligencia artificial.

- **Infraestructura:**  
  La aplicaciÃ³n se despliega como una aplicaciÃ³n web simple mediante Streamlit; es compatible con ejecuciones locales, en servidores o en contenedores Docker.

---

## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Gestionar la interfaz de usuario, la carga y procesamiento de archivos, y la visualizaciÃ³n interactiva de los resultados. Se encarga de inicializar y actualizar el estado de la sesiÃ³n a travÃ©s de `st.session_state`.

- **UbicaciÃ³n:**  
  El punto de entrada principal es, por ejemplo, `app.py` dentro del directorio `app/`.

- **Interfaces y Funcionalidades:**  
  - ConfiguraciÃ³n de la pÃ¡gina mediante `st.set_page_config` (tÃ­tulo, icono, layout y sidebar).  
  - GestiÃ³n del estado de la sesiÃ³n para variables clave como `analysis_results`, `run_id`, `uploaded_files_data` y `processing_complete`.
  - Funciones auxiliares de carga y procesamiento:
    - `extract_text_from_pdf(pdf_file) â†’ str`: Extrae y concatena el texto de cada pÃ¡gina de un PDF.  
    - `validate_file_size(file) â†’ bool`: Verifica que el tamaÃ±o del archivo no supere 100MB.

- **Ejemplo de CÃ³digo:**

  ```python
  import streamlit as st
  import PyPDF2

  st.set_page_config(
      page_title="VoC Analyst - AnÃ¡lisis de Voz del Cliente con LLM",
      page_icon="ğŸ“Š",
      layout="wide",
      initial_sidebar_state="expanded"
  )

  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None
  if 'run_id' not in st.session_state:
      st.session_state.run_id = None
  if 'uploaded_files_data' not in st.session_state:
      st.session_state.uploaded_files_data = []
  if 'processing_complete' not in st.session_state:
      st.session_state.processing_complete = False

  def extract_text_from_pdf(pdf_file) -> str:
      """Extraer texto de archivo PDF"""
      try:
          pdf_reader = PyPDF2.PdfReader(pdf_file)
          text = ""
          for page in pdf_reader.pages:
              text += page.extract_text() + "\n"
          return text.strip()
      except Exception as e:
          st.error(f"Error al extraer texto de PDF: {str(e)}")
          return ""
  ```

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  Gestionar la integraciÃ³n con proveedores de modelos de lenguaje (LLM) para analizar la informaciÃ³n extraÃ­da. Permite configurar dinÃ¡micamente el proveedor y modelo a utilizar, enviar prompts y gestionar la comunicaciÃ³n con la API correspondiente.

- **UbicaciÃ³n:**  
  Se encuentra en el archivo `llm_backend.py` ubicado en la raÃ­z del proyecto.

- **Interfaces y Funcionalidades:**  
  - **ModelConfig:**  
    Define la configuraciÃ³n necesaria para identificar el proveedor LLM, el modelo a usar, la API key y parÃ¡metros de reintentos.
    
    ```python
    from dataclasses import dataclass

    @dataclass
    class ModelConfig:
        """ConfiguraciÃ³n para la selecciÃ³n del modelo LLM"""
        provider: str  # 'openai', 'anthropic', 'gemini'
        model: str
        api_key: str
        max_retries: int = 3
        retry_delay: float = 1.0
    ```
  
  - **LLMBackend:**  
    Implementa mÃ©todos para:
    - Inicializar el cliente LLM apropiado mediante `_initialize_client()`.
    - Cargar prompts para el parsing (`_load_parse_prompt()`) y el anÃ¡lisis (`_load_analyze_prompt()`).
    - Procesar el texto con el mÃ©todo `analyze_text(text: str) â†’ Dict[str, Any]`.
    
    ```python
    class LLMBackend:
        """Servicio backend para el anÃ¡lisis VoC basado en LLM"""
        
        def __init__(self, config: ModelConfig):
            self.config = config
            self.client = self._initialize_client()
            self.parse_prompt = self._load_parse_prompt()
            self.analyze_prompt = self._load_analyze_prompt()
        
        def _initialize_client(self):
            """Inicializa el cliente LLM correspondiente basado en la configuraciÃ³n"""
            if self.config.provider == 'openai':
                return openai.OpenAI(api_key=self.config.api_key)
            elif self.config.provider == 'anthropic':
                return anthropic.Anthropic(api_key=self.config.api_key)
            elif self.config.provider == 'gemini':
                return genai.Client(api_key=self.config.api_key)
            else:
                raise ValueError(f"Proveedor no soportado: {self.config.provider}")
    ```

---

### 3. Parser de Conversaciones y AnÃ¡lisis

- **PropÃ³sito:**  
  Procesar y normalizar el contenido textual extraÃ­do, transformÃ¡ndolo en un formato estructurado (por ejemplo, JSON) para facilitar el anÃ¡lisis posterior mediante modelos de lenguaje. La funcionalidad incluye:
  - **ExtracciÃ³n de metadatos:** Derivar identificadores de conversaciÃ³n, timestamps, roles de interlocutores y otros.
  - **RedacciÃ³n de PII:** Detectar y reemplazar informaciÃ³n sensible (emails, telÃ©fonos, tarjetas) por etiquetas estÃ¡ndar ([EMAIL], [PHONE], [CARD], [ID]).
  - **ValidaciÃ³n del Contenido:** Asegurar que el documento contenga una Ãºnica conversaciÃ³n y que los datos sean consistentes.

- **Ejemplo de Requerimientos del Parser:**

  ```
  ## VoC Conversation Parser

  Transformar el texto crudo de una interacciÃ³n en un JSON estructurado:
  - Detectar conversation_id basado en el nombre del archivo o metadatos.
  - Separar la conversaciÃ³n en turnos, identificando el rol (cliente, agente, desconocido).
  - Redactar informaciÃ³n sensible usando patrones de expresiones regulares.
  ```

---

## ğŸš€ APIs y Endpoints

Aunque la aplicaciÃ³n no expone endpoints REST pÃºblicos, posee APIs internas a nivel funcional que permiten orquestar el proceso de anÃ¡lisis:

- **FunciÃ³n: extract_text_from_pdf(pdf_file) â†’ str:**  
  Extrae el contenido textual desde un archivo PDF y gestiona errores.

- **FunciÃ³n: validate_file_size(file) â†’ bool:**  
  Verifica que el tamaÃ±o del archivo sea menor a 100MB.

- **MÃ©todo: LLMBackend.analyze_text(text: str) â†’ Dict[str, Any]:**  
  EnvÃ­a el texto y el prompt de anÃ¡lisis al proveedor LLM, procesando la respuesta para generar insights y recomendaciones.

- **Parser de Conversaciones:**  
  Funciones internas que transforman la conversaciÃ³n en un JSON estructurado, listo para ser analizado.

---

## ğŸ’¾ Modelo de Datos

- **Entidades Principales:**
  - **ConversaciÃ³n:**  
    Representada como un JSON que puede incluir:
    - `conversation_id`: Identificador Ãºnico.
    - `messages`: Lista de mensajes, donde cada mensaje contiene:
      - `sender`: Rol del emisor (cliente, agente, desconocido).
      - `timestamp`: Momento de envÃ­o del mensaje.
      - `content`: Texto del mensaje, con redacciÃ³n de PII procesada.
      - `metadata`: InformaciÃ³n adicional (canal, duraciÃ³n, etc.).
  
- **Transformaciones y Validaciones:**
  - Validar que el texto extraÃ­do sea no vacÃ­o y estÃ© correctamente formateado.
  - Redactar la informaciÃ³n sensible utilizando expresiones regulares y reglas definidas.
  - Estructurar los datos en un formato JSON para ser consumido por mÃ³dulos de visualizaciÃ³n y anÃ¡lisis.

---

## ğŸ› ï¸ GuÃ­a de Desarrollo

### 1. ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**
   - Python 3.8 o superior.
   - Acceso a Internet (para la conexiÃ³n con proveedores LLM en producciÃ³n).

2. **InstalaciÃ³n:**
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/VoC-Analyst.git
     cd VoC-Analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv venv
     source venv/bin/activate    # En Linux/Mac
     venv\Scripts\activate       # En Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de Entorno:**
   - Configure las API keys para los proveedores LLM utilizando variables de entorno, por ejemplo:  
     - `OPENAI_API_KEY`  
     - `ANTHROPIC_API_KEY`  
     - `GEMINI_API_KEY`

---

### 2. Estructura del CÃ³digo

La estructura de directorios es la siguiente:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Punto de entrada de la aplicaciÃ³n (Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones de parsing y anÃ¡lisis de conversaciones
â”‚   â””â”€â”€ utils.py              # Funciones auxiliares (extracciÃ³n de texto, validaciÃ³n, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo para integraciÃ³n con proveedores LLM
â”œâ”€â”€ requirements.txt          # Lista de dependencias
â””â”€â”€ README.md                 # DocumentaciÃ³n general y guÃ­a de usuario
```

---

### 3. EstÃ¡ndares de CÃ³digo y Pruebas

- **Convenciones de Naming:**  
  Usar nombres descriptivos en minÃºsculas y con guiones bajos para archivos y funciones.
  
- **Patrones de DiseÃ±o:**  
  Seguir la separaciÃ³n de la lÃ³gica de UI (Streamlit) de la lÃ³gica de negocio (LLMBackend, Parser).  
  Utilizar inyecciÃ³n de dependencias para la configuraciÃ³n de proveedores LLM.
  
- **Pruebas y ValidaciÃ³n:**  
  Implementar pruebas unitarias con frameworks como pytest para:
  - Validar la extracciÃ³n de texto de archivos PDF.
  - Probar la funciÃ³n de validaciÃ³n del tamaÃ±o de archivo.
  - Simular peticiones al mÃ³dulo LLMBackend para confirmar la correcta comunicaciÃ³n y manejo de reintentos.
  
- **Manejo de Errores y Logs:**  
  Registrar los errores usando el mÃ³dulo logging y notificar al usuario mediante la interfaz Streamlit.

---

## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**
  - La extracciÃ³n de texto se basa en PyPDF2; documentos basados en imÃ¡genes pueden requerir OCR.
  - El anÃ¡lisis con LLM depende de la calidad del texto extraÃ­do y de la correcta configuraciÃ³n de la API key.
  
- **Consideraciones de Rendimiento:**
  - El procesamiento de archivos muy grandes (cerca de 100MB) puede afectar la respuesta de la aplicaciÃ³n.
  - Se recomienda optimizar el procesamiento en lote o implementar una capa de caching en futuros desarrollos.
  
- **Aspectos de Seguridad:**
  - Proteger las API keys mediante variables de entorno y no exponerlas en el cÃ³digo fuente.
  - Redactar la informaciÃ³n sensible (PII) antes de enviarla a proveedores externos.
  
- **Mejoras Sugeridas (TODOs):**
  - Ampliar el soporte a otros formatos de archivo (por ejemplo, TXT).
  - Integrar capacidad OCR para archivos PDF basados en imagen.
  - Implementar procesamiento asÃ­ncrono y/o en lote para mejorar el rendimiento en anÃ¡lisis repetitivos.

---

## GuÃ­a de Usuario

Aunque la presente documentaciÃ³n tÃ©cnica estÃ¡ orientada a desarrolladores, se incluye a continuaciÃ³n una breve guÃ­a de usuario para comprender el flujo bÃ¡sico de la aplicaciÃ³n:

1. **Acceso a la AplicaciÃ³n:**  
   Abre tu navegador y visita la URL de la aplicaciÃ³n; la interfaz de Streamlit se mostrarÃ¡ con todas las opciones disponibles.

2. **Carga de Archivos:**  
   Usa el botÃ³n â€œSubir Archivoâ€ para cargar tu documento PDF. La aplicaciÃ³n validarÃ¡ y extraerÃ¡ el contenido automÃ¡ticamente.

3. **EjecuciÃ³n del AnÃ¡lisis:**  
   Una vez procesado el archivo, activa el anÃ¡lisis mediante el botÃ³n â€œAnalizar con LLMâ€. El contenido se enviarÃ¡ al mÃ³dulo LLMBackend y se mostrarÃ¡ un informe de resultados.

4. **VisualizaciÃ³n de Resultados:**  
   Los resultados (insights, grÃ¡ficas, resÃºmenes y recomendaciones) se mostrarÃ¡n dinÃ¡micamente en la pantalla. Puedes explorar detalles mediante secciones expandibles y opciones de filtrado.

5. **ExportaciÃ³n y Uso:**  
   Si deseas guardar o exportar los resultados, utiliza las opciones de descarga disponibles en el panel de resultados.

---

## Diagrama del Sistema

El siguiente diagrama Mermaid resume la estructura y flujo de la aplicaciÃ³n:

```mermaid
graph LR
    A[Interfaz Streamlit] --> B[Procesamiento de Archivos]
    A --> C[GestiÃ³n del Estado (st.session_state)]
    B --> D[ExtracciÃ³n de Texto y ValidaciÃ³n]
    A --> E[LLMBackend]
    E --> F[Proveedores LLM (OpenAI, Anthropic, Gemini)]
    B --> G[Parser de Conversaciones y RedacciÃ³n de PII]
```

---

Con esta documentaciÃ³n se espera que desarrolladores y colaboradores puedan comprender la estructura, funcionamiento, y pautas de mantenimiento y extensiÃ³n de VoC Analyst. Se recomienda mantener actualizada la documentaciÃ³n conforme se realicen cambios y mejoras en el proyecto.

Â¡Feliz codificaciÃ³n y Ã©xito en el anÃ¡lisis de la Voz del Cliente!

---

## Diagrama Final
```mermaid
graph LR
App[app] --> Deps[dependencies]
```




## Diagrama
```mermaid
graph LR\nApp["app"]-->Deps["dependencies"]\n
```
