# DocumentaciÃ³n del Proyecto

## GuÃ­a de Usuario
# GuÃ­a de Usuario

Bienvenido a tu herramienta para anÃ¡lisis y procesamiento de informaciÃ³n. Esta guÃ­a te ayudarÃ¡ a conocer, usar y sacar el mÃ¡ximo provecho a la aplicaciÃ³n de forma sencilla y prÃ¡ctica.

---

## ğŸ“± Â¿QuÃ© es esta aplicaciÃ³n?

- **PropÃ³sito principal**:  
  Facilitar el anÃ¡lisis y la extracciÃ³n de informaciÃ³n clave de archivos PDF, conversaciones y opiniones, utilizando inteligencia artificial para ofrecer resultados claros y accionables.

- **Problema que resuelve**:  
  Ayuda a interpretar grandes volÃºmenes de informaciÃ³n (documentos, conversaciones y opiniones de clientes) de forma rÃ¡pida y precisa, permitiÃ©ndote identificar tendencias, sentimientos y detalles importantes.

- **Beneficios clave**:  
  â€¢ Ahorro de tiempo en el procesamiento y anÃ¡lisis de documentos.  
  â€¢ InterpretaciÃ³n automatizada de conversaciones y opiniones.  
  â€¢ Confiabilidad y precisiÃ³n en el anÃ¡lisis de sentimientos, emociones y Voz del Cliente (VoC).

- **Audiencia objetivo**:  
  Profesionales, analistas y equipos de atenciÃ³n al cliente que necesiten transformar grandes volÃºmenes de datos en insights Ãºtiles para la toma de decisiones.

---

## âœ¨ Funcionalidades Principales

### Interfaz Web Interactiva con Streamlit
- **Â¿QuÃ© hace?**:  
  Proporciona una plataforma visual e intuitiva para interactuar con la aplicaciÃ³n y sus funcionalidades, facilitando la navegaciÃ³n y el uso.

- **Â¿CuÃ¡ndo usarla?**:  
  Siempre que necesites realizar anÃ¡lisis o cargar documentos; su diseÃ±o te guÃ­a en cada paso.

- **Â¿CÃ³mo acceder?**:  
  Abre la aplicaciÃ³n en tu navegador web; la interfaz se carga automÃ¡ticamente mostrando las opciones disponibles.

- **Resultado esperado**:  
  Una pantalla amigable con menÃºs y botones claros para iniciar procesos y ver resultados.

### Procesamiento de Archivos PDF
- **Â¿QuÃ© hace?**:  
  Permite cargar y leer archivos PDF para extraer el contenido de texto que serÃ¡ procesado y analizado.

- **Â¿CuÃ¡ndo usarla?**:  
  Cuando necesites analizar informaciÃ³n contenida en documentos PDF, como reportes, informes o manuales.

- **Â¿CÃ³mo acceder?**:  
  Selecciona la opciÃ³n "Cargar PDF" en la interfaz, elige el archivo desde tu dispositivo y presiona "Procesar".

- **Resultado esperado**:  
  El sistema mostrarÃ¡ el contenido extraÃ­do y listo para ser analizado en las siguientes funcionalidades.

### AnÃ¡lisis con Modelos de Lenguaje (IA)
- **Â¿QuÃ© hace?**:  
  Utiliza inteligencia artificial para interpretar y extraer conclusiones del texto procesado, identificando temas, palabras clave y patrones.

- **Â¿CuÃ¡ndo usarla?**:  
  Ideal para obtener un resumen automÃ¡tico o insights sobre documentos y textos largos.

- **Â¿CÃ³mo acceder?**:  
  Una vez procesado el PDF o cargado el texto, selecciona la opciÃ³n "Analizar con IA" y espera unos segundos a que se genere el anÃ¡lisis.

- **Resultado esperado**:  
  Un resumen o reporte con los principales temas, palabras clave y conclusiones extraÃ­das del contenido.

### AnÃ¡lisis de Conversaciones
- **Â¿QuÃ© hace?**:  
  Examina diÃ¡logos y registros de conversaciÃ³n para identificar patrones, temas recurrentes y comportamientos en la comunicaciÃ³n.

- **Â¿CuÃ¡ndo usarla?**:  
  Ãštil en el anÃ¡lisis de interacciones en centros de atenciÃ³n al cliente o en redes sociales.

- **Â¿CÃ³mo acceder?**:  
  Ingresa el registro o transcripciÃ³n de la conversaciÃ³n en el espacio asignado y haz clic en "Analizar ConversaciÃ³n".

- **Resultado esperado**:  
  Un informe que resalta los puntos clave, respuestas frecuentes y posibles Ã¡reas de mejora en la comunicaciÃ³n.

### AnÃ¡lisis de Sentimientos y Emociones
- **Â¿QuÃ© hace?**:  
  Detecta el tono y las emociones expresadas en textos o conversaciones, indicando si la percepciÃ³n es positiva, negativa o neutral.

- **Â¿CuÃ¡ndo usarla?**:  
  Cuando desees conocer cÃ³mo se sienten los clientes o usuarios respecto a un servicio, producto o tema especÃ­fico.

- **Â¿CÃ³mo acceder?**:  
  DespuÃ©s de procesar un texto o conversaciÃ³n, selecciona la opciÃ³n "Analizar Sentimientos" y espera el resultado.

- **Resultado esperado**:  
  Un grÃ¡fico o resumen que muestra la distribuciÃ³n de sentimientos y una breve interpretaciÃ³n de los resultados.

### AnÃ¡lisis de Voz del Cliente (VoC)
- **Â¿QuÃ© hace?**:  
  Se enfoca en captar y analizar la retroalimentaciÃ³n directa del cliente para identificar fortalezas, Ã¡reas de mejora y oportunidades estratÃ©gicas.

- **Â¿CuÃ¡ndo usarla?**:  
  Ideal para equipos de marketing, ventas y atenciÃ³n al cliente que busquen mejorar la experiencia de usuario a travÃ©s de la retroalimentaciÃ³n.

- **Â¿CÃ³mo acceder?**:  
  Selecciona la opciÃ³n "AnÃ¡lisis VoC" en la interfaz, ingresa la retroalimentaciÃ³n o carga el archivo correspondiente y ejecuta el anÃ¡lisis.

- **Resultado esperado**:  
  Un reporte con insights claros y accionables sobre lo que los clientes valoran o desean mejorar en el servicio/producto ofrecido.

---

## ğŸš€ CÃ³mo Empezar

### Primer Uso

1. **Requisitos previos**:  
   - Disponer de un navegador web actualizado.
   - Tener los archivos PDF o conversaciones que deseas analizar, ya sea en tu dispositivo o en formato digital.

2. **Acceso inicial**:  
   - Ingresa a la URL de la aplicaciÃ³n en tu navegador.
   - La pÃ¡gina de inicio te ofrecerÃ¡ un recorrido rÃ¡pido por las opciones disponibles.

3. **ConfiguraciÃ³n bÃ¡sica** (si aplica):  
   - Selecciona el idioma de preferencia y revisa las opciones de visualizaciÃ³n.
   - No se requiere configuraciÃ³n tÃ©cnica adicional.

4. **Primera tarea recomendada**:  
   - Carga un archivo PDF sencillo que contenga texto claro y realiza el primer anÃ¡lisis con IA para familiarizarte con el proceso.

### Flujo TÃ­pico de Uso

1. **Paso 1**:  
   Accede a la interfaz web de la aplicaciÃ³n y elige la opciÃ³n que deseas utilizar (por ejemplo, "Cargar PDF").

2. **Paso 2**:  
   Sube el archivo o introduce el texto/conversaciÃ³n que quieras analizar. Explora las funcionalidades que te guÃ­an en el proceso.

3. **Paso 3**:  
   Revisa el informe o los resultados generados por la aplicaciÃ³n. Si es necesario, ajusta filtros o vuelve a procesar el documento para obtener informaciÃ³n mÃ¡s detallada.

---

## ğŸ’¡ Casos de Uso Comunes

### Escenario 1: AnÃ¡lisis de Reportes de Ventas
**SituaciÃ³n**:  
Necesitas extraer insights de un informe de ventas en PDF para detectar tendencias y Ã¡reas de mejora.

**Pasos**:  
1. Carga el archivo PDF en la aplicaciÃ³n.  
2. Ejecuta el anÃ¡lisis con modelos de lenguaje para extraer palabras clave y temas.  
3. Revisa el resumen y actÃºa en base a los insights obtenidos.

### Escenario 2: EvaluaciÃ³n de Conversaciones de AtenciÃ³n al Cliente
**SituaciÃ³n**:  
Deseas mejorar la calidad del servicio al cliente analizando las interacciones directas.

**Pasos**:  
1. Ingresa o sube las transcripciones de las conversaciones.  
2. Utiliza la funcionalidad "Analizar ConversaciÃ³n" para detectar temas y patrones.  
3. Revisa el informe para identificar Ã¡reas de mejora en la comunicaciÃ³n del equipo.

### Escenario 3: MediciÃ³n del Sentimiento del Cliente en Redes Sociales
**SituaciÃ³n**:  
Quieres conocer cÃ³mo se sienten los usuarios acerca de un nuevo producto.

**Pasos**:  
1. Recopila comentarios y opiniones en texto.  
2. Utiliza la opciÃ³n "Analizar Sentimientos" para procesar los datos.  
3. Observa el grÃ¡fico de sentimientos y utiliza la informaciÃ³n para afinar estrategias de marketing.

### Escenario 4: RecopilaciÃ³n y EvaluaciÃ³n de la Voz del Cliente (VoC)
**SituaciÃ³n**:  
Necesitas recoger y analizar la retroalimentaciÃ³n directa de tus clientes para ajustar tu servicio.

**Pasos**:  
1. Ingresa la retroalimentaciÃ³n de los clientes o carga los archivos correspondientes.  
2. Ejecuta la funcionalidad "AnÃ¡lisis VoC".  
3. Analiza el reporte y diseÃ±a planes de acciÃ³n basados en la informaciÃ³n obtenida.

---

## â“ Preguntas Frecuentes

**P: Â¿CÃ³mo cargo mis archivos PDF en la aplicaciÃ³n?**  
R: Solo debes hacer clic en la opciÃ³n "Cargar PDF" en la interfaz, seleccionar el archivo de tu dispositivo y presionar "Procesar". La aplicaciÃ³n extraerÃ¡ y mostrarÃ¡ el contenido.

**P: Â¿QuÃ© hago si el anÃ¡lisis con IA no me genera resultados claros?**  
R: Revisa que el texto del documento estÃ© correctamente formateado y, si persiste el problema, vuelve a cargar el archivo o prueba con otro documento. AsegÃºrate de seguir los pasos indicados en la guÃ­a.

**P: Â¿Es seguro usar esta herramienta para analizar la Voz del Cliente?**  
R: SÃ­, la aplicaciÃ³n estÃ¡ diseÃ±ada para manejar tu informaciÃ³n con altos estÃ¡ndares de seguridad y privacidad, asegurando que tus datos se procesen de forma confidencial.

**P: Â¿CuÃ¡les son las limitaciones principales?**  
R: La herramienta se centra en el anÃ¡lisis de informaciÃ³n textual. No puede procesar otros tipos de archivos (como imÃ¡genes sin texto) ni reemplazar el juicio humano en decisiones crÃ­ticas.

---

## ğŸ†˜ SoluciÃ³n de Problemas

### Problema: El archivo PDF no se carga correctamente
**SÃ­ntomas**:  
- La aplicaciÃ³n muestra un mensaje de error o no se visualiza el documento completo.

**Causa probable**:  
- El archivo puede estar daÃ±ado o no ser compatible.

**SoluciÃ³n**:  
1. Verifica que el PDF estÃ© completo y no daÃ±ado.  
2. AsegÃºrate de que el archivo tenga texto seleccionable (no imÃ¡genes escaneadas sin OCR).  
3. Vuelve a cargar el documento siguiendo las instrucciones de "Cargar PDF".

---

### Problema: El anÃ¡lisis con IA se demora demasiado
**SÃ­ntomas**:  
- La respuesta tarda en generarse o se queda cargando.

**Causa probable**:  
- Pueden existir muchos datos o una conexiÃ³n lenta.

**SoluciÃ³n**:  
1. Prueba con un documento mÃ¡s corto para verificar el funcionamiento.  
2. Revisa tu conexiÃ³n a internet y asegÃºrate de tener una red estable.  
3. Si el problema persiste, recarga la pÃ¡gina y vuelve a intentarlo.

---

### Problema: No aparecen resultados en el anÃ¡lisis de conversaciones o sentimientos
**SÃ­ntomas**:  
- Los informes llegan vacÃ­os o sin informaciÃ³n relevante.

**Causa probable**:  
- El texto ingresado podrÃ­a no contener suficiente informaciÃ³n o estar mal formateado.

**SoluciÃ³n**:  
1. AsegÃºrate de que la transcripciÃ³n o comentario tenga contenido claro y estructurado.  
2. Verifica que estÃ©s utilizando la funcionalidad correcta para el tipo de anÃ¡lisis que necesitas.  
3. Si persiste, consulta el apartado de Preguntas Frecuentes o contacta soporte.

---

## ğŸ“ Soporte y Contacto

- **Â¿Necesitas ayuda adicional?**  
  Puedes contactar al equipo de soporte a travÃ©s del correo: soporte@tuaplicacion.com

- **Â¿Encontraste un error?**  
  Utiliza la opciÃ³n "Reportar un error" en la aplicaciÃ³n o envÃ­a un correo a: errores@tuaplicacion.com

- **Â¿Tienes sugerencias?**  
  Â¡Nos encanta escuchar tu opiniÃ³n! EnvÃ­anos tus sugerencias y feedback a: feedback@tuaplicacion.com

---

Esta guÃ­a estÃ¡ diseÃ±ada para que, sin necesidad de conocimientos tÃ©cnicos, puedas aprovechar al mÃ¡ximo cada funcionalidad de la aplicaciÃ³n. Disfruta de una experiencia sencilla y productiva en el anÃ¡lisis y procesamiento de informaciÃ³n. Â¡Bienvenido!

## DocumentaciÃ³n TÃ©cnica
A continuaciÃ³n se muestra la documentaciÃ³n tÃ©cnica completa en Markdown, organizada segÃºn la estructura requerida y basada en el anÃ¡lisis del cÃ³digo y la informaciÃ³n disponible del repositorio.

------------------------------------------------------------

# DocumentaciÃ³n TÃ©cnica

Esta documentaciÃ³n estÃ¡ orientada a desarrolladores y profesionales interesados en comprender, mantener y extender la aplicaciÃ³n VoC Analyst. Se detalla la arquitectura general, el stack tecnolÃ³gico, los componentes principales, las â€œAPIs internasâ€ (funciones clave) y la guÃ­a de desarrollo, asÃ­ como la descripciÃ³n necesaria para la correcta utilizaciÃ³n y personalizaciÃ³n del sistema.

------------------------------------------------------------

## ğŸ—ï¸ Arquitectura del Sistema

- **PatrÃ³n arquitectÃ³nico utilizado:**  
  La aplicaciÃ³n adopta una arquitectura modular monolÃ­tica â€œhÃ­bridaâ€, en la que se integran la interfaz de usuario (Frontend) y el procesamiento/negocio (Backend) en una Ãºnica aplicaciÃ³n. La UI se implementa con Streamlit, mientras que el procesamiento de archivos, extracciÃ³n de texto y la integraciÃ³n con modelos de lenguaje (LLM) se realizan en mÃ³dulos internos.

- **Diagrama de componentes:**  
  A continuaciÃ³n se presenta un diagrama Mermaid que resume la relaciÃ³n entre las principales partes de la aplicaciÃ³n:

  ```mermaid
  graph LR
      A[AplicaciÃ³n Streamlit] --> B[Procesamiento de Archivos]
      A --> C[Estado de SesiÃ³n y UI]
      B --> D[ExtracciÃ³n de Texto (PyPDF2)]
      B --> E[ValidaciÃ³n de Archivos]
      A --> F[LLMBackend]
      F --> G[ModelConfig & Clientes LLM]
      B --> H[Parser de Conversaciones]
  ```

  - **A:** Representa la UI desarrollada con Streamlit.
  - **B:** Componente responsable de la extracciÃ³n y validaciÃ³n de archivos.
  - **C:** GestiÃ³n del estado de sesiÃ³n (st.session_state) para almacenar resultados, IDs y datos de archivos.
  - **D y E:** Funciones de extracciÃ³n (usando PyPDF2) y validaciÃ³n (tamaÃ±o, etc.) de archivos.
  - **F y G:** El mÃ³dulo LLMBackend plantea la abstracciÃ³n para comunicarse con distintos proveedores de LLM mediante la configuraciÃ³n (ModelConfig).
  - **H:** MÃ³dulo de parser y anÃ¡lisis que se encarga de normalizar las conversaciones, segmentar mensajes y redactar informaciÃ³n sensible.

- **Flujo de datos principal entre componentes:**  
  1. El usuario carga uno o varios archivos (preferiblemente PDF) mediante la interfaz Streamlit.  
  2. Se ejecutan funciones de validaciÃ³n (por ejemplo, `validate_file_size`) y extracciÃ³n de texto (con `extract_text_from_pdf` utilizando PyPDF2).  
  3. El texto extraÃ­do se procesa, en algunos casos pasando por un parser que segmenta la conversaciÃ³n, identifica metadatos y redacta PII (informaciÃ³n sensible).  
  4. La capa de negocio utiliza el mÃ³dulo LLMBackend, que mediante la configuraciÃ³n (ModelConfig) y las funciones _load_parse_prompt/_load_analyze_prompt, envÃ­a el contenido a los proveedores LLM (OpenAI, Anthropic, Gemini) para anÃ¡lisis avanzado (resumen, detecciÃ³n de temas, sentimiento, recomendaciones, etc.).  
  5. Los resultados se almacenan en st.session_state y se muestran en la interfaz (paneles de KPIs, grÃ¡ficas de temas, asignaciÃ³n de mensajes, exportaciÃ³n de resultados, etc.).

- **Dependencias crÃ­ticas y su propÃ³sito:**  
  - **Streamlit:** Facilita la creaciÃ³n de una interfaz web interactiva y la gestiÃ³n del estado de la sesiÃ³n.  
  - **PyPDF2:** Se utiliza para interpretar y extraer el contenido textual de documentos PDF.  
  - **Pandas:** Permite la manipulaciÃ³n y visualizaciÃ³n tabular de datos, Ãºtil para mostrar resÃºmenes y tablas de anÃ¡lisis.  
  - **LLM SDKs (openai, anthropic, google-genai):** Estas librerÃ­as permiten la integraciÃ³n con servicios de modelos de lenguaje e inteligencia artificial, responsables del procesamiento semÃ¡ntico y la generaciÃ³n de insights a partir del contenido textual.

------------------------------------------------------------

## ğŸ“‹ Stack TecnolÃ³gico

- **Lenguajes:**  
  Principalmente Python (interpretable como â€œotherâ€ en la clasificaciÃ³n del repositorio).

- **Frameworks y LibrerÃ­as:**  
  - **Streamlit:** (>=1.49.1) para la creaciÃ³n de la interfaz web interactiva.  
  - **PyPDF2:** (>=3.0.1) para la extracciÃ³n de texto desde archivos en PDF.  
  - **Pandas:** (>=2.3.2) para el manejo de datos y la presentaciÃ³n a travÃ©s de dataframes.  
  - **LLM SDKs:**  
    - `openai`: para la integraciÃ³n con modelos de OpenAI.  
    - `anthropic`: para conectar con proveedores de Anthropic.  
    - `google-genai`: para la integraciÃ³n con Google GenAI (Gemini).  
  - Otras librerÃ­as estÃ¡ndar: `json`, `os`, `time`, `uuid`, `zipfile`, `io`, y `typing`.

- **Base de datos:**  
  No se utiliza una base de datos relacional; el procesamiento y almacenamiento de datos se realiza de forma transitoria mediante st.session_state.

- **APIs externas:**  
  Se integran servicios externos mediante llamadas a APIs de proveedores LLM, tales como OpenAI, Anthropic y Google GenAI.

- **Infraestructura:**  
  La aplicaciÃ³n se despliega como una aplicaciÃ³n web simple (puede ejecutarse localmente, en servidores o en contenedores Docker) mediante Streamlit.

------------------------------------------------------------

## ğŸ”§ Componentes Principales

### 1. AplicaciÃ³n Streamlit

- **PropÃ³sito:**  
  Gestionar la interfaz de usuario, la carga de archivos, la visualizaciÃ³n de resultados y el estado de la sesiÃ³n.

- **UbicaciÃ³n:**  
  Principalmente en el archivo de entrada (por ejemplo, `app.py`) y mÃ³dulos auxiliares en el directorio `app/`.

- **Interfaces:**  
  - ConfiguraciÃ³n de la pÃ¡gina mediante `st.set_page_config`.  
  - Uso de `st.session_state` para almacenar variables como:
    - `analysis_results`: Resultados obtenidos del anÃ¡lisis.
    - `run_id`: Identificador Ãºnico de la ejecuciÃ³n.
    - `uploaded_files_data`: Datos y metadatos de los archivos subidos.
    - `processing_complete`: Indicador del estado final del procesamiento.
  - Funciones auxiliares:
    - `extract_text_from_pdf(pdf_file) â†’ str`: Extrae el contenido textual de un PDF.  
    - `validate_file_size(file) â†’ bool`: Valida que el tamaÃ±o del archivo no supere los 100 MB.

- **Dependencias:**  
  Requiere Streamlit, PyPDF2 y Pandas para su funcionamiento.

---

### 2. MÃ³dulo LLMBackend

- **PropÃ³sito:**  
  Gestionar la integraciÃ³n con proveedores de modelos de lenguaje (LLM) y enviar solicitudes para analizar el texto extraÃ­do.

- **UbicaciÃ³n:**  
  En el archivo `llm_backend.py`.

- **Interfaces / MÃ©todos Expuestos:**
  - **ModelConfig:**  
    Una clase de configuraciÃ³n que incluye campos como:
    - `provider`: Proveedor (ej. "openai", "anthropic", "gemini").
    - `model`: Modelo especÃ­fico a utilizar.
    - `api_key`: Clave para la autenticaciÃ³n.
    - `max_retries` y `retry_delay`: ParÃ¡metros para reintentos en caso de fallo.
  - **LLMBackend:**  
    MÃ©todos clave:
    - `__init__(config: ModelConfig)`: Inicializa la conexiÃ³n y carga los prompts.
    - `_initialize_client()`: Selecciona e instancia el cliente adecuado basado en el proveedor.
    - `_load_parse_prompt()` y `_load_analyze_prompt()`: Cargan los prompts necesarios para el parseo y anÃ¡lisis.
    - `analyze_text(text: str) â†’ Dict[str, Any]`: EnvÃ­a el texto a analizar y devuelve los insights generados por el modelo LLM.

- **Dependencias:**  
  Utiliza las librerÃ­as especÃ­ficas para cada proveedor (openai, anthropic, google-genai).

---

### 3. Procesamiento y ExtracciÃ³n de Archivos

- **PropÃ³sito:**  
  Gestionar la carga, validaciÃ³n y extracciÃ³n de texto de archivos, enfocado principalmente en archivos PDF.

- **Funciones Clave:**
  - `extract_text_from_pdf(pdf_file) â†’ str`:  
    Recorrido de cada pÃ¡gina del PDF para extraer el contenido.  
    Incluye manejo de errores a travÃ©s de bloques try/except y notificaciÃ³n al usuario.
  - `validate_file_size(file) â†’ bool`:  
    Verifica que el tamaÃ±o del archivo no exceda 100 MB (se usa la bÃºsqueda de la posiciÃ³n final del puntero).

---

### 4. Parser y AnÃ¡lisis de Conversaciones

- **PropÃ³sito:**  
  Procesar el contenido textual extraÃ­do para:
  - Normalizar la conversaciÃ³n.
  - Extraer metadatos (por ejemplo, `conversation_id`, timestamps, roles de los interlocutores).
  - Redactar informaciÃ³n sensible (PII) reemplazÃ¡ndola por etiquetas estÃ¡ndar (ej. [EMAIL], [PHONE], [CARD], [ID]).

- **ImplementaciÃ³n:**  
  Se aplican tÃ©cnicas de procesamiento de lenguaje natural (NLP) para segmentar el texto, identificar patrones y generar un JSON estructurado que serÃ¡ utilizado para generar insights y visualizaciones.

---

## ğŸš€ APIs y Endpoints

**Nota:** Aunque la aplicaciÃ³n no expone endpoints REST, cuenta con â€œAPIs internasâ€ (funciones) que permiten la orquestaciÃ³n del flujo de procesamiento y anÃ¡lisis:

- **FunciÃ³n:** `extract_text_from_pdf(pdf_file) â†’ str`  
  Extrae el contenido textual de un archivo PDF usando PyPDF2, notificando errores a travÃ©s de la interfaz de Streamlit.

- **FunciÃ³n:** `validate_file_size(file) â†’ bool`  
  Comprueba que el tamaÃ±o del archivo subido sea menor a 100 MB.

- **MÃ©todo:** `LLMBackend.analyze_text(text: str) â†’ Dict[str, Any]`  
  EnvÃ­a el contenido textual a travÃ©s del modelo LLM configurado y devuelve un diccionario con los resultados del anÃ¡lisis (por ejemplo, insights, resumen, puntuaciones de sentimiento, temas, etc.).

- **Parser de Conversaciones:**  
  FunciÃ³n o conjunto de funciones que segmentan la entrada en turnos de conversaciÃ³n, identifican metadatos y transforman el texto en un formato estructurado.

------------------------------------------------------------

## ğŸ’¾ Modelo de Datos

- **Entidades Principales:**
  - **ConversaciÃ³n:**  
    Representada en un JSON estructurado con campos como:
    - `conversation_id`: Identificador Ãºnico.
    - `messages`: Lista de mensajes, cada uno con:
      - `sender`: Rol del emisor (cliente, agente o desconocido).
      - `timestamp`: Momento en que se enviÃ³ el mensaje.
      - `content`: Texto del mensaje (con PII redactada).
      - `metadata`: Datos adicionales (canal, duraciÃ³n, etc.).

- **Esquemas de Entrada y Salida:**  
  - **Entrada:** Documentos PDF o cadenas de texto a analizar.
  - **Salida:** Estructuras JSON que agrupan mensajes, insights, temas y recomendaciones.

- **Validaciones y Transformaciones:**  
  - Validar que el texto no estÃ© vacÃ­o y se pueda procesar correctamente.  
  - Redactar informaciÃ³n sensible utilizando patrones (regex) para reemplazar datos como emails, telÃ©fonos, etc.

------------------------------------------------------------

## ğŸ› ï¸ GuÃ­a de Desarrollo

### ConfiguraciÃ³n del Entorno

1. **Prerrequisitos:**  
   - Python 3.8 o superior.
   - Acceso a Internet para la comunicaciÃ³n con APIs externas de LLM (si se utiliza en modo producciÃ³n).

2. **InstalaciÃ³n:**
   - Clonar el repositorio:
     ```bash
     git clone https://github.com/tu_usuario/VoC-Analyst.git
     cd VoC-Analyst
     ```
   - Crear y activar un entorno virtual:
     ```bash
     python -m venv venv
     source venv/bin/activate    # En Linux/Mac
     venv\Scripts\activate       # En Windows
     ```
   - Instalar las dependencias:
     ```bash
     pip install -r requirements.txt
     ```

3. **Variables de Entorno:**  
   - Configura las variables (por ejemplo, `OPENAI_API_KEY`, `ANTHROPIC_API_KEY`, `GEMINI_API_KEY`) para el uso seguro de las APIs de LLM.
   
---

### Estructura del CÃ³digo

El repositorio se organiza generalmente en la siguiente estructura:

```
VoC-Analyst/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Punto de entrada de la aplicaciÃ³n (interfaz Streamlit)
â”‚   â”œâ”€â”€ parser.py             # Funciones para parsear y analizar conversaciones
â”‚   â””â”€â”€ utils.py              # Utilidades (extracciÃ³n de texto, validaciÃ³n, etc.)
â”œâ”€â”€ llm_backend.py            # MÃ³dulo para integraciÃ³n y configuraciÃ³n de proveedores LLM
â”œâ”€â”€ requirements.txt          # Lista de dependencias
â””â”€â”€ README.md                 # DocumentaciÃ³n general
```

---

### EstÃ¡ndares de CÃ³digo y Patrones Recomendados

- **Convenciones de Naming:**  
  Se recomienda utilizar nombres descriptivos en minÃºsculas y guiones bajos para funciones y archivos (por ejemplo, `extract_text_from_pdf`).

- **Patrones de DiseÃ±o:**  
  Se sigue un enfoque modular en la separaciÃ³n de la lÃ³gica de UI (Streamlit) y la lÃ³gica de negocio (LLMBackend, Parser).  
  Se recomienda inyectar configuraciones (por ejemplo, ModelConfig) para mantener la flexibilidad y la escalabilidad del sistema.

- **Estrategia de Testing:**  
  Implementar pruebas unitarias y de integraciÃ³n utilizando frameworks como pytest para:
  - Validar la extracciÃ³n de texto.
  - Probar la validaciÃ³n del tamaÃ±o de archivos.
  - Simular peticiones al mÃ³dulo LLMBackend y asegurar la correcta gestiÃ³n de reintentos y respuestas.
  
---

## ğŸ” Puntos de AtenciÃ³n

- **Limitaciones Conocidas:**
  - La aplicaciÃ³n depende de la capacidad de extracciÃ³n de texto de archivos PDF; documentos basados en imÃ¡genes pueden requerir OCR.
  - Los anÃ¡lisis realizados por modelos de lenguaje pueden depender de la calidad y claridad del texto extraÃ­do.
  
- **Consideraciones de Rendimiento:**
  - Procesar archivos muy grandes (cercanos a 100MB) puede ralentizar la aplicaciÃ³n.
  - Es recomendable implementar procesamiento en lote o caching para anÃ¡lisis repetitivos.

- **Aspectos de Seguridad:**
  - Proteger las API keys utilizando variables de entorno.
  - Redactar informaciÃ³n sensible (PII) antes de enviar datos a proveedores externos.

- **TODOs y Mejoras Sugeridas:**
  - Ampliar soporte a otros formatos de archivo (por ejemplo, TXT).
  - Integrar OCR para PDFs basados en imÃ¡genes.
  - Implementar una capa de caching para mejorar el rendimiento de anÃ¡lisis repetitivos.
  
---

## Diagrama de Dependencias

El siguiente diagrama Mermaid resume la interacciÃ³n y relaciones entre los componentes principales del sistema:

```mermaid
graph LR
    A[AplicaciÃ³n Streamlit] --> B[Procesamiento e ExtracciÃ³n de Archivos]
    A --> C[Estado de SesiÃ³n y UI]
    B --> D[Funciones: extract_text_from_pdf, validate_file_size]
    A --> E[LLMBackend]
    E --> F[ModelConfig y Clientes LLM (OpenAI, Anthropic, Gemini)]
    B --> G[Parser de Conversaciones y RedacciÃ³n de PII]
```

---

## ğŸ”§ GuÃ­a de Desarrollo (Resumen)

1. **ConfiguraciÃ³n del Entorno:**  
   Clona el repositorio, activa el entorno virtual e instala las dependencias.

2. **EjecuciÃ³n de la AplicaciÃ³n:**  
   Ejecuta `streamlit run app/app.py` para iniciar la interfaz.

3. **ExtensiÃ³n y ConfiguraciÃ³n:**  
   - Modifica `llm_backend.py` para integrar nuevos proveedores o ajustar los prompts de anÃ¡lisis.  
   - Actualiza el modelo y la configuraciÃ³n mediante la clase ModelConfig.

4. **Testing y ValidaciÃ³n:**  
   Implementa y ejecuta pruebas unitarias con pytest para funciones crÃ­ticas; asegÃºrate de que la UI refleje correctamente el estado.

5. **Mantenimiento y Buenas PrÃ¡cticas:**  
   Siguiendo el enfoque modular y documentando cada cambio, se facilita la colaboraciÃ³n y la escalabilidad del proyecto.

------------------------------------------------------------

## GuÃ­a de Usuario

Esta guÃ­a de usuario estÃ¡ diseÃ±ada para el uso final de la aplicaciÃ³n, explicando paso a paso cÃ³mo interactuar con la herramienta.

### 1. Acceso a la AplicaciÃ³n

- Abre tu navegador web y accede a la URL asignada (por ejemplo, http://localhost:8501 si ejecutas la aplicaciÃ³n localmente).

### 2. Carga del Archivo PDF

- En la pantalla principal, utiliza el botÃ³n â€œCargar Archivoâ€ para seleccionar el documento PDF que deseas analizar.
- Una vez seleccionado, la aplicaciÃ³n iniciarÃ¡ un proceso de extracciÃ³n de texto y validaciÃ³n del tamaÃ±o.

### 3. EjecuciÃ³n del AnÃ¡lisis

- Tras la carga, puedes iniciar el anÃ¡lisis haciendo clic en â€œAnalizar con LLMâ€. (Nota: se requiere proporcionar una API key vÃ¡lida para acceder a los modelos LLM.)
- La aplicaciÃ³n procesarÃ¡ el contenido:
  - ExtraerÃ¡ el texto del PDF.
  - AplicarÃ¡ el parser para segmentar la conversaciÃ³n y redactar la informaciÃ³n sensible.
  - EnviarÃ¡ el contenido al proveedor LLM configurado para que genere insights (resÃºmenes, detecciÃ³n de temas, anÃ¡lisis de sentimiento y recomendaciones).

### 4. VisualizaciÃ³n de Resultados

- Una vez finalizado el anÃ¡lisis, se mostrarÃ¡n los resultados en diferentes secciones:
  - Indicadores clave (KPIs) como Net Promoter Score (NPS), CSAT y puntajes de sentimiento.
  - Temas descubiertos, listados en tablas y secciones expandibles que muestran descripciones y resÃºmenes.
  - AsignaciÃ³n de mensajes, donde se muestran extractos de la conversaciÃ³n junto con la clasificaciÃ³n de sentimientos.
  
### 5. ExportaciÃ³n de Resultados

- La interfaz permite exportar los resultados completos en formatos como JSON o CSV para uso externo o anÃ¡lisis adicional.

### Preguntas Frecuentes (FAQ)

**Â¿QuÃ© tipos de archivos puedo procesar?**  
Actualmente, la herramienta soporta archivos PDF con texto seleccionable. Se evaluarÃ¡ el soporte para otros formatos en futuras versiones.

**Â¿Necesito conocimientos tÃ©cnicos para usar la aplicaciÃ³n?**  
No. La interfaz es intuitiva y cuenta con instrucciones claras para cada paso. Cualquier usuario podrÃ¡ cargar documentos y visualizar los resultados sin necesidad de conocimientos avanzados.

**Â¿CÃ³mo se protege la privacidad de mi informaciÃ³n?**  
Los documentos se procesan de manera local o en entornos seguros y la informaciÃ³n sensible se redirige mediante tÃ©cnicas de redacciÃ³n antes de enviarla a modelos externos.

**Â¿QuÃ© hago si el anÃ¡lisis falla o se muestra un error?**  
Verifica que el archivo PDF estÃ© en buen estado. Si el problema persiste, consulta la secciÃ³n de soporte o contacta al equipo tÃ©cnico para asistencia.

------------------------------------------------------------

## ConclusiÃ³n

Esta documentaciÃ³n tÃ©cnica y la guÃ­a de usuario tienen como objetivo proporcionar una visiÃ³n completa del sistema VoC Analyst, abarcando tanto aspectos de desarrollo como de uso final. Gracias a su arquitectura modular y la integraciÃ³n con modelos de lenguaje, la aplicaciÃ³n permite extraer insights valiosos a partir de interacciones y documentos, facilitando la toma de decisiones y el anÃ¡lisis de la voz del cliente.

Para dudas, mejoras o contribuciones, se recomienda revisar el cÃ³digo fuente y consultar la secciÃ³n de issues del repositorio.

------------------------------------------------------------

## Diagrama del Sistema

```mermaid
graph LR
    App[app] --> Deps[dependencies]
```

------------------------------------------------------------

Happy Coding!  
Â¡Buena suerte y que disfrutes de una experiencia de anÃ¡lisis poderosa y eficiente con VoC Analyst!


## Diagrama
```mermaid
graph LR
App[app]-->Deps[dependencies]

```
