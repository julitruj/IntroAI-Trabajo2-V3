# Documentaci√≥n del Proyecto

## Documentaci√≥n T√©cnica

A continuaci√≥n se presenta la documentaci√≥n t√©cnica completa en markdown del repositorio, orientada a desarrolladores que deseen comprender la arquitectura, componentes principales, APIs internas y la forma de desarrollo e integraci√≥n de los m√≥dulos.

---

# Documentaci√≥n T√©cnica ‚Äì VoC Analyst

Este repositorio implementa una aplicaci√≥n para el an√°lisis de la Voz del Cliente (VoC) utilizando procesamiento de archivos, extracci√≥n de texto y an√°lisis con modelos de lenguaje (LLM). La interfaz de usuario se realiza mediante Streamlit y el backend integra m√∫ltiples proveedores LLM (OpenAI, Anthropic y Google GenAI) para generar insights y recomendaciones basadas en conversaciones de clientes.

---

## Tabla de Contenidos

1. [Resumen](#resumen)
2. [Arquitectura General](#arquitectura-general)
3. [Componentes Principales](#componentes-principales)
   - [1. Aplicaci√≥n Streamlit](#aplicaci√≥n-streamlit)
   - [2. M√≥dulo LLMBackend](#m√≥dulo-llmbackend)
   - [3. M√≥dulo de Conversaci√≥n y Parser](#m√≥dulo-de-conversaci√≥n-y-parser)
4. [Configuraci√≥n y Dependencias](#configuraci√≥n-y-dependencias)
5. [Gu√≠as de Desarrollo](#gu√≠as-de-desarrollo)
   - [Instalaci√≥n y Ejecuci√≥n](#instalaci√≥n-y-ejecuci√≥n)
   - [Extender y Configurar LLMBackend](#extender-y-configurar-llmbackend)
   - [Pruebas y Validaci√≥n](#pruebas-y-validaci√≥n)
6. [Consideraciones y Buenas Pr√°cticas](#consideraciones-y-buenas-pr√°cticas)

---

## Resumen

El repositorio est√° construido en varios lenguajes y m√≥dulos (se√±alados como "other" en la clasificaci√≥n de lenguajes) e integra diversas librer√≠as para el procesamiento de documentos PDF, manejo de datos (con Pandas), y comunicaci√≥n con APIs de proveedores LLM. La interfaz gr√°fica se maneja mediante Streamlit, lo que permite a los usuarios cargar archivos, visualizar resultados de an√°lisis y seguir el flujo de procesamiento de documentos en tiempo real.

---

## Arquitectura General

El flujo de datos y la interacci√≥n entre m√≥dulos se puede resumir en el siguiente diagrama Mermaid:

```mermaid
graph LR
  A[Aplicaci√≥n Streamlit] --> B[M√≥dulo LLMBackend]
  B --> C[Proveedores LLM (OpenAI, Anthropic, Google GenAI)]
  A --> D[M√≥dulo de Conversaci√≥n y Parser]
  D --> E[Extracci√≥n y Redacci√≥n de PII]
```

- La **Aplicaci√≥n Streamlit** act√∫a como la interfaz principal para la interacci√≥n del usuario.
- El **M√≥dulo LLMBackend** se encarga de inicializar la conexi√≥n con el proveedor LLM configurado y de procesar los prompts de an√°lisis.
- El **M√≥dulo de Conversaci√≥n y Parser** se encarga de procesar y normalizar las conversaciones (incluyendo la detecci√≥n de PII) para la posterior generaci√≥n de insights.
- Cada m√≥dulo se comunica y transmite datos de entrada/salida, permitiendo un flujo de procesamiento modular y extensible.

---

## Componentes Principales

### Aplicaci√≥n Streamlit

- **Prop√≥sito:**  
  La aplicaci√≥n principal se configura mediante Streamlit para gestionar la carga de archivos, mostrar el progreso de an√°lisis, y visualizar los resultados (gr√°ficos, datos en tablas, etc.).
  
- **Caracter√≠sticas Principales:**  
  - Configuraci√≥n inicial de la p√°gina (t√≠tulo, √≠cono, layout y sidebar).
  - Gesti√≥n del estado de sesi√≥n con variables como `analysis_results`, `run_id`, `uploaded_files_data` y `processing_complete`.
  - Funciones auxiliares, como:
    - `extract_text_from_pdf(pdf_file)`: Extrae texto de archivos PDF utilizando la librer√≠a PyPDF2.
    - `validate_file_size(file)`: Valida que el tama√±o del archivo no supere el l√≠mite definido (ej. 100MB).

- **Ejemplo de Uso en C√≥digo:**

  ```python
  import streamlit as st
  import PyPDF2

  # Configuraci√≥n de la p√°gina con Streamlit
  st.set_page_config(
      page_title="VoC Analyst - An√°lisis de Voz del Cliente con LLM",
      page_icon="üìä",
      layout="wide",
      initial_sidebar_state="expanded"
  )

  # Inicializaci√≥n del estado de sesi√≥n
  if 'analysis_results' not in st.session_state:
      st.session_state.analysis_results = None

  def extract_text_from_pdf(pdf_file) -> str:
      """Extraer texto de archivo PDF"""
      try:
          pdf_reader = PyPDF2.PdfReader(pdf_file)
          text = ""
          for page in pdf_reader.pages:
              text += page.extract_text() + "\n"
          return text.strip()
      except Exception as e:
          st.error(f"Error al extraer texto de PDF: {str(e)}")
          return ""
  ```

### M√≥dulo LLMBackend

- **Prop√≥sito:**  
  Integrar y gestionar el acceso a m√∫ltiples proveedores de LLM para la generaci√≥n de an√°lisis sobre la Voz del Cliente.

- **Componentes y Funcionalidades Clave:**
  - **ModelConfig:**  
    Un dataclass para la configuraci√≥n del modelo, que incluye el proveedor (`openai`, `anthropic`, `gemini`), el modelo a utilizar, la API key y par√°metros de reintentos.
  
  - **LLMBackend:**  
    Clase encargada de:
    - Inicializar la conexi√≥n con el proveedor adecuado (OpenAI, Anthropic o Google GenAI).
    - Cargar los prompts necesarios para el parsing y an√°lisis de la conversaci√≥n.
    - Manejar las peticiones y respuestas de la API LLM.

- **Ejemplo de Configuraci√≥n y Uso:**

  ```python
  from dataclasses import dataclass
  import openai
  import anthropic
  from google import genai

  @dataclass
  class ModelConfig:
      provider: str  # 'openai', 'anthropic', 'gemini'
      model: str
      api_key: str
      max_retries: int = 3
      retry_delay: float = 1.0

  class LLMBackend:
      """Backend service for LLM-based VoC analysis"""

      def __init__(self, config: ModelConfig):
          self.config = config
          self.client = self._initialize_client()
          self.parse_prompt = self._load_parse_prompt()
          self.analyze_prompt = self._load_analyze_prompt()

      def _initialize_client(self):
          """Initialize the appropriate LLM client"""
          if self.config.provider == 'openai':
              return openai.OpenAI(api_key=self.config.api_key)
          elif self.config.provider == 'anthropic':
              return anthropic.Anthropic(api_key=self.config.api_key)
          elif self.config.provider == 'gemini':
              return genai.Client(api_key=self.config.api_key)
          else:
              raise ValueError(f"Unsupported provider: {self.config.provider}")
  ```

### M√≥dulo de Conversaci√≥n y Parser

- **Prop√≥sito:**  
  Procesar archivos de texto que contienen interacciones entre clientes y agentes. Se encarga de:
  - Normalizar y estructurar conversaciones en formato JSON.
  - Extraer metadatos y redireccionar datos, como la identificaci√≥n de conversai√≥n e informaci√≥n de PII (redactada).

- **Requisitos y Funciones:**
  - **Identificaci√≥n de Conversaci√≥n:**  
    - Extraer o derivar `conversation_id` (por ejemplo, usando el nombre del archivo).
    - Detectar y etiquetar el idioma de la transcripci√≥n.
    - Validar que se trate de una √∫nica interacci√≥n.
  
  - **An√°lisis a Nivel de Mensaje:**  
    - Dividir la conversaci√≥n en turnos.
    - Extraer timestamps y determinar el rol de cada interlocutor (cliente, agente o desconocido).
    - Extraer metadatos adicionales (por canal, duraci√≥n, agent_id, etc.).
  
  - **Redacci√≥n de PII:**  
    Identificar y reemplazar datos sensibles (correos electr√≥nicos, tel√©fonos, n√∫meros de tarjetas, etc.) por etiquetas uniformes como [EMAIL], [PHONE], [CARD] y [ID].

- **Ejemplo de Requisitos (Extracto):**

  ```
  ## VoC Conversation Parser

  ### Objetivo
  Transformar un archivo de interacci√≥n en un JSON estructurado, normalizando mensajes y redactando PII.

  ### Requerimientos:
  1. Identificar la conversaci√≥n y extraer el conversation_id.
  2. Parsear cada turno y ubicar timestamps, roles (cliente/agente) y canales.
  3. Redactar informaci√≥n sensible:
     - Email ‚Üí [EMAIL]
     - Tel√©fono ‚Üí [PHONE]
     - Tarjeta de cr√©dito ‚Üí [CARD]
     - Identificaciones ‚Üí [ID]
  4. Extraer metadatos adicionales (interaction_id, agent_id, etc.)
  ```

---

## Configuraci√≥n y Dependencias

El proyecto utiliza las siguientes dependencias principales:

- streamlit>=1.49.1
- openai>=1.106.1
- anthropic>=0.66.0
- google-genai>=1.33.0
- pandas>=2.3.2
- pypdf2>=3.0.1

**Archivo requirements.txt:**

```
streamlit>=1.49.1
openai>=1.106.1
anthropic>=0.66.0
google-genai>=1.33.0
pandas>=2.3.2
pypdf2>=3.0.1
```

Estas dependencias se instalan com√∫nmente a trav√©s de:

  pip install -r requirements.txt

---

## Gu√≠as de Desarrollo

### Instalaci√≥n y Ejecuci√≥n

1. Clonar el repositorio:

   git clone https://tu-repositorio/url.git

2. Crear un entorno virtual (opcional pero recomendado):

   python -m venv venv  
   source venv/bin/activate  (Linux/macOS)  
   venv\Scripts\activate     (Windows)

3. Instalar las dependencias:

   pip install -r requirements.txt

4. Ejecutar la aplicaci√≥n:

   streamlit run app.py

   Nota: Asegurarse de que el archivo principal (por ejemplo, app.py) corresponda a la entrada de Streamlit.

### Extender y Configurar LLMBackend

- **Configuraci√≥n Inicial:**  
  Configure la clase ModelConfig con los detalles del proveedor de LLM que desea utilizar:
  
  ```python
  config = ModelConfig(
      provider="openai",  # o 'anthropic' / 'gemini'
      model="gpt-4",
      api_key="YOUR_API_KEY"
  )
  llm_backend = LLMBackend(config=config)
  ```

- **Extensible:**  
  Para agregar nuevos proveedores, se debe extender el m√©todo _initialize_client dentro de la clase LLMBackend e implementar la l√≥gica de autenticaci√≥n/biblioteca.

### Pruebas y Validaci√≥n

- **Pruebas Unitarias:**  
  Se recomienda escribir pruebas unitarias para cada funci√≥n de extracci√≥n y parsing, en particular para:
  - Extracci√≥n de texto desde PDFs.
  - Funciones que validan el tama√±o de archivo.
  - Funciones de redacci√≥n de PII (para emails, tel√©fonos, etc.).

- **Logs y Manejo de Errores:**  
  La aplicaci√≥n utiliza el logging (nivel INFO) para hacer seguimiento del flujo de ejecuci√≥n y la detecci√≥n de errores en la conexi√≥n con el LLM.  
  Verifique los mensajes de error en la consola o en las notificaciones de la interfaz Streamlit.

---

## Consideraciones y Buenas Pr√°cticas

- Mantener las claves API y otra informaci√≥n sensible fuera del c√≥digo fuente, por ejemplo, usando variables de entorno o archivos de configuraci√≥n.
- Asegurarse de que los archivos cargados por el usuario pasen las validaciones (como tama√±o m√°ximo) antes de proceder con el procesamiento.
- Extender la modularidad del c√≥digo siguiendo patrones de dise√±o (por ejemplo, separando la l√≥gica de UI de la l√≥gica de negocio) para facilitar futuras mejoras o integraciones.
- Utilizar control de versiones y realizar pruebas en cada cambio para evitar regresiones en la funcionalidad del an√°lisis de VoC.

---

Esta documentaci√≥n tiene el objetivo de guiar tanto a nuevos desarrolladores como a los colaboradores habituales en la comprensi√≥n y extensi√≥n de la funcionalidad de VoC Analyst. Si se requieren aclaraciones adicionales, se recomienda revisar los comentarios en el c√≥digo y los commit messages del repositorio para conocer el historial y los motivos de cada cambio.



## Diagrama
```mermaid
graph LR
A[app]-->B[dependencies]

```


---

## Gu√≠a de Usuario

# Gu√≠a de Usuario de la Aplicaci√≥n

Bienvenido a la gu√≠a de usuario de nuestra aplicaci√≥n. Este documento est√° dise√±ado para ayudarte a comprender las principales funcionalidades, el uso b√°sico de la aplicaci√≥n y resolver las dudas m√°s comunes.

---

## 1. Descripci√≥n de la Aplicaci√≥n

Nuestra aplicaci√≥n es una soluci√≥n dise√±ada para facilitar la gesti√≥n de tareas y la interacci√≥n entre usuarios en un entorno digital. Aunque las tecnolog√≠as utilizadas no han sido determinadas y la integraci√≥n con endpoints externos actualmente no est√° disponible, la aplicaci√≥n est√° pensada para ofrecer una interfaz intuitiva y amigable que permita a los usuarios:

- Gestionar sus actividades diarias.
- Visualizar informaci√≥n relevante en un panel central.
- Personalizar la experiencia de usuario a trav√©s de diversas opciones de configuraci√≥n.

Esta gu√≠a te ayudar√° a sacar el m√°ximo provecho de las funcionalidades que la aplicaci√≥n tiene para ofrecer.

---

## 2. Principales Funcionalidades

A continuaci√≥n, se describen las funcionalidades clave disponibles en la aplicaci√≥n:

- **Inicio de Sesi√≥n y Registro**  
  Permite a los usuarios crear una cuenta o iniciar sesi√≥n en una cuenta existente para acceder a la plataforma.
  
- **Panel de Control**  
  Una vista centralizada donde se muestran datos relevantes, notificaciones y accesos directos a secciones importantes.
  
- **Gesti√≥n de Tareas**  
  Herramienta para crear, editar, asignar y marcar tareas como completadas. Ideal para organizar actividades y proyectos personales o de equipo.
  
- **Configuraci√≥n de Perfil**  
  Opci√≥n para actualizar informaci√≥n personal, cambiar la contrase√±a y ajustar preferencias de notificaci√≥n.
  
- **Reportes y Estad√≠sticas**  
  Secci√≥n para visualizar reportes resumidos y gr√°ficos que ayudan a analizar el progreso y la eficiencia de las tareas gestionadas.
  
- **Soporte y Ayuda**  
  Acceso a recursos de ayuda, documentaci√≥n adicional y contacto con el soporte t√©cnico para resolver cualquier incidencia.

---

## 3. Descripci√≥n de Uso

A continuaci√≥n, encontrar√°s una gu√≠a paso a paso sobre el uso de la aplicaci√≥n:

### 3.1 Acceso a la Aplicaci√≥n

1. **Abrir la Aplicaci√≥n:**  
   Inicia la aplicaci√≥n desde el escritorio, la web o la ubicaci√≥n en la que est√© instalada.

2. **Inicio de Sesi√≥n/Registro:**  
   - Si ya tienes una cuenta, ingresa tu usuario y contrase√±a para iniciar sesi√≥n.
   - Si eres un nuevo usuario, selecciona la opci√≥n de registro e ingresa los datos solicitados para crear tu cuenta.

### 3.2 Navegaci√≥n en el Panel de Control

- **Panel Central:**  
  Una vez iniciada la sesi√≥n, se mostrar√° el panel de control con un resumen de tus tareas, notificaciones y accesos directos a las secciones m√°s utilizadas.

- **Men√∫ de Navegaci√≥n:**  
  Utiliza el men√∫ lateral o superior para acceder a las diferentes secciones, tales como Gesti√≥n de Tareas, Reportes o Configuraci√≥n.

### 3.3 Gesti√≥n de Tareas

1. **Crear una Nueva Tarea:**  
   Selecciona la opci√≥n ‚ÄúNueva Tarea‚Äù y completa los campos requeridos (t√≠tulo, descripci√≥n, fecha l√≠mite, etc.).
   
2. **Editar o Eliminar Tareas:**  
   Haz clic en el icono de edici√≥n o eliminaci√≥n ubicado junto a la tarea correspondiente para realizar modificaciones o retirarla de la lista.

3. **Marcar Tarea como Completada:**  
   Para finalizar una tarea, selecciona el icono de verificaci√≥n (check) o marca la casilla correspondiente.

### 3.4 Configuraci√≥n de Perfil

- Accede a la secci√≥n ‚ÄúMi Perfil‚Äù o ‚ÄúConfiguraci√≥n‚Äù para:
  - Actualizar tus datos personales.
  - Cambiar tu contrase√±a.
  - Configurar las notificaciones y otras preferencias de la aplicaci√≥n.

### 3.5 Soporte y Ayuda

- Si encuentras alg√∫n inconveniente o tienes preguntas no resueltas en esta gu√≠a, accede a la secci√≥n ‚ÄúSoporte‚Äù para:
  - Consultar art√≠culos de ayuda.
  - Enviar una solicitud de soporte t√©cnico.
  - Revisar las FAQ adicionales.

---

## 4. Preguntas Frecuentes (FAQ)

### 4.1 ¬øC√≥mo creo una nueva cuenta en la aplicaci√≥n?  
Para crear una cuenta, selecciona la opci√≥n "Registrarse" en la pantalla de inicio y sigue las instrucciones ingresando tus datos personales. Recibir√°s un correo de confirmaci√≥n para activar tu cuenta.

### 4.2 ¬øOlvid√© mi contrase√±a, c√≥mo puedo recuperarla?  
Haz clic en "¬øOlvidaste tu contrase√±a?" en la pantalla de inicio de sesi√≥n. Se te pedir√° ingresar tu correo electr√≥nico y recibir√°s un enlace para restablecer tu contrase√±a.

### 4.3 ¬øPuedo personalizar el panel de control?  
S√≠, en la secci√≥n de Configuraci√≥n encontrar√°s opciones para personalizar la vista del panel de control, como elegir qu√© widgets o secciones se muestran seg√∫n tus preferencias.

### 4.4 ¬øQu√© debo hacer si encuentro un error o fallo en la aplicaci√≥n?  
Si experimentas alg√∫n error:
- Aseg√∫rate de que la aplicaci√≥n est√© actualizada a la √∫ltima versi√≥n.
- Consulta la secci√≥n ‚ÄúSoporte‚Äù para buscar soluciones en la documentaci√≥n.
- Si el problema persiste, contacta al equipo de soporte t√©cnico a trav√©s del formulario de contacto disponible en la secci√≥n de ayuda.

### 4.5 ¬øLa aplicaci√≥n es compatible con dispositivos m√≥viles?  
S√≠, la aplicaci√≥n est√° dise√±ada para ser responsiva y funcionar en diferentes dispositivos, incluidos tel√©fonos m√≥viles y tabletas, ofreciendo una experiencia √≥ptima sin importar el tama√±o de pantalla.

---

Esperamos que esta gu√≠a te sea de utilidad para comenzar a usar la aplicaci√≥n. Si tienes m√°s preguntas o necesitas asistencia adicional, no dudes en contactar a nuestro equipo de soporte. ¬°Gracias por elegir nuestra aplicaci√≥n!